{"version":3,"file":"iris.esm.js","sources":["../src/lodash.ts","../src/util.ts","../src/Key.ts","../src/peers.ts","../src/db/Actor.ts","../src/db/Message.ts","../src/db/adapters/Memory.ts","../src/db/adapters/IndexedDB.ts","../src/db/adapters/Websocket.ts","../src/db/Router.ts","../src/db/Node.ts","../src/global.ts","../src/Attribute.ts","../src/public.ts","../src/Channel.ts","../src/private.ts","../src/local.ts","../src/blockedUsers.ts","../src/group.ts","../src/notifications.ts","../src/electron.ts","../src/session.ts","../src/static.ts","../src/SignedMessage.ts","../src/index.ts"],"sourcesContent":["// @ts-nocheck\nconst _ = {\n  throttle: (func: Function, limit: number) => {\n    let inThrottle: boolean;\n    return function() {\n      const args = arguments;\n      const context = this;\n      if (!inThrottle) {\n        func.apply(context, args);\n        inThrottle = true;\n        setTimeout(() => inThrottle = false, limit);\n      }\n    };\n  },\n  debounce: (func: Function, limit: number) => {\n    let inDebounce: boolean;\n    return function() {\n      const args = arguments;\n      const context = this;\n      clearTimeout(inDebounce);\n      inDebounce = setTimeout(() => func.apply(context, args), limit);\n    };\n  },\n  sample: (arr: any[]) => arr[Math.floor(Math.random() * arr.length)],\n  sampleSize: (arr: any[], size: number) => {\n    const shuffled = arr.slice(0);\n    let i = arr.length;\n    let min = i - size;\n    let temp;\n    let index;\n    while (i-- > min) {\n      index = Math.floor((i + 1) * Math.random());\n      temp = shuffled[index];\n      shuffled[index] = shuffled[i];\n      shuffled[i] = temp;\n    }\n    return shuffled.slice(min);\n  },\n  defer: (func: Function) => setTimeout(func, 0),\n  once: (func: Function) => {\n    let called = false;\n    return function() {\n      if (called) {\n        return;\n      }\n      called = true;\n      func.apply(this, arguments);\n    };\n  },\n  omit: (obj: any, keys: string[]) => {\n    const newObj = {};\n    Object.keys(obj).forEach(key => {\n      if (!keys.includes(key)) {\n        newObj[key] = obj[key];\n      }\n    });\n    return newObj;\n  },\n  defaults: (obj: any, defaults: any) => {\n    Object.keys(defaults).forEach(key => {\n      if (obj[key] === undefined) {\n        obj[key] = defaults[key];\n      }\n    });\n    return obj;\n  },\n  pickBy: (obj: any, predicate: Function) => {\n    const newObj = {};\n    Object.keys(obj).forEach(key => {\n      if (predicate(obj[key])) {\n        newObj[key] = obj[key];\n      }\n    });\n    return newObj;\n  },\n  isEqual: (a: any, b: any) => {\n    if (a === b) {\n      return true;\n    }\n    if (a instanceof Date && b instanceof Date) {\n      return a.getTime() === b.getTime();\n    }\n    if (!a || !b || (typeof a !== 'object' && typeof b !== 'object')) {\n      return a !== a && b !== b;\n    }\n    if (a.prototype !== b.prototype) {\n      return false;\n    }\n    const keys = Object.keys(a);\n    if (keys.length !== Object.keys(b).length) {\n      return false;\n    }\n    return keys.every(k => _.isEqual(a[k], b[k]));\n  },\n  uniq: (arr: any[]) => {\n    const set = new Set(arr);\n    return Array.from(set);\n  }\n};\n\nexport default _;","// @ts-nocheck\n/* eslint no-useless-escape: \"off\", camelcase: \"off\" */\n\nimport _ from './lodash';\n\n// eslint-disable-line no-unused-vars\n\nlet isNode = false;\ntry {\n  isNode = Object.prototype.toString.call(global.process) === `[object process]`;\n} catch (e) { null; }\n\nconst userAgent = !isNode && navigator && navigator.userAgent && navigator.userAgent.toLowerCase();\nconst isElectron = (userAgent && userAgent.indexOf(' electron/') > -1);\n\nconst isMobile = !isNode && (function() {\n  if (isElectron) { return false; }\n  let check = false;\n  (function(a) {if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;})(navigator.userAgent || navigator.vendor || '');\n  return check;\n})();\n\nfunction gunOnceDefined(node: any) {\n  return new Promise(resolve => {\n    node.on((val: any, _k: any, _a: any, eve: any) => {\n      if (val !== undefined) {\n        eve.off();\n        resolve(val);\n      }\n    });\n  });\n}\n\nconst animals = [\n  'canidae',\n  'felidae',\n  'cat',\n  'cattle',\n  'dog',\n  'donkey',\n  'goat',\n  'horse',\n  'pig',\n  'rabbit',\n  'aardvark',\n  'aardwolf',\n  'albatross',\n  'alligator',\n  'alpaca',\n  'amphibian',\n  'anaconda',\n  'angelfish',\n  'anglerfish',\n  'ant',\n  'anteater',\n  'antelope',\n  'antlion',\n  'ape',\n  'aphid',\n  'armadillo',\n  'asp',\n  'baboon',\n  'badger',\n  'bandicoot',\n  'barnacle',\n  'barracuda',\n  'basilisk',\n  'bass',\n  'bat',\n  'bear',\n  'beaver',\n  'bedbug',\n  'bee',\n  'beetle',\n  'bird',\n  'bison',\n  'blackbird',\n  'boa',\n  'boar',\n  'bobcat',\n  'bobolink',\n  'bonobo',\n  'booby',\n  'bovid',\n  'bug',\n  'butterfly',\n  'buzzard',\n  'camel',\n  'canid',\n  'capybara',\n  'cardinal',\n  'caribou',\n  'carp',\n  'cat',\n  'catshark',\n  'caterpillar',\n  'catfish',\n  'cattle',\n  'centipede',\n  'cephalopod',\n  'chameleon',\n  'cheetah',\n  'chickadee',\n  'chicken',\n  'chimpanzee',\n  'chinchilla',\n  'chipmunk',\n  'clam',\n  'clownfish',\n  'cobra',\n  'cockroach',\n  'cod',\n  'condor',\n  'constrictor',\n  'coral',\n  'cougar',\n  'cow',\n  'coyote',\n  'crab',\n  'crane',\n  'crawdad',\n  'crayfish',\n  'cricket',\n  'crocodile',\n  'crow',\n  'cuckoo',\n  'cicada',\n  'damselfly',\n  'deer',\n  'dingo',\n  'dinosaur',\n  'dog',\n  'dolphin',\n  'donkey',\n  'dormouse',\n  'dove',\n  'dragonfly',\n  'dragon',\n  'duck',\n  'eagle',\n  'earthworm',\n  'earwig',\n  'echidna',\n  'eel',\n  'egret',\n  'elephant',\n  'elk',\n  'emu',\n  'ermine',\n  'falcon',\n  'ferret',\n  'finch',\n  'firefly',\n  'fish',\n  'flamingo',\n  'flea',\n  'fly',\n  'flyingfish',\n  'fowl',\n  'fox',\n  'frog',\n  'gamefowl',\n  'galliform',\n  'gazelle',\n  'gecko',\n  'gerbil',\n  'gibbon',\n  'giraffe',\n  'goat',\n  'goldfish',\n  'goose',\n  'gopher',\n  'gorilla',\n  'grasshopper',\n  'grouse',\n  'guan',\n  'guanaco',\n  'guineafowl',\n  'gull',\n  'guppy',\n  'haddock',\n  'halibut',\n  'hamster',\n  'hare',\n  'harrier',\n  'hawk',\n  'hedgehog',\n  'heron',\n  'herring',\n  'hippopotamus',\n  'hookworm',\n  'hornet',\n  'horse',\n  'hoverfly',\n  'hummingbird',\n  'hyena',\n  'iguana',\n  'impala',\n  'jackal',\n  'jaguar',\n  'jay',\n  'jellyfish',\n  'junglefowl',\n  'kangaroo',\n  'kingfisher',\n  'kite',\n  'kiwi',\n  'koala',\n  'koi',\n  'krill',\n  'ladybug',\n  'lamprey',\n  'landfowl',\n  'lark',\n  'leech',\n  'lemming',\n  'lemur',\n  'leopard',\n  'leopon',\n  'limpet',\n  'lion',\n  'lizard',\n  'llama',\n  'lobster',\n  'locust',\n  'loon',\n  'louse',\n  'lungfish',\n  'lynx',\n  'macaw',\n  'mackerel',\n  'magpie',\n  'mammal',\n  'manatee',\n  'mandrill',\n  'marlin',\n  'marmoset',\n  'marmot',\n  'marsupial',\n  'marten',\n  'mastodon',\n  'meadowlark',\n  'meerkat',\n  'mink',\n  'minnow',\n  'mite',\n  'mockingbird',\n  'mole',\n  'mollusk',\n  'mongoose',\n  'monkey',\n  'moose',\n  'mosquito',\n  'moth',\n  'mouse',\n  'mule',\n  'muskox',\n  'narwhal',\n  'newt',\n  'nightingale',\n  'ocelot',\n  'octopus',\n  'opossum',\n  'orangutan',\n  'orca',\n  'ostrich',\n  'otter',\n  'owl',\n  'ox',\n  'panda',\n  'panther',\n  'parakeet',\n  'parrot',\n  'parrotfish',\n  'partridge',\n  'peacock',\n  'peafowl',\n  'pelican',\n  'penguin',\n  'perch',\n  'pheasant',\n  'pig',\n  'pigeon',\n  'pike',\n  'pinniped',\n  'piranha',\n  'planarian',\n  'platypus',\n  'pony',\n  'porcupine',\n  'porpoise',\n  'possum',\n  'prawn',\n  'primate',\n  'ptarmigan',\n  'puffin',\n  'puma',\n  'python',\n  'quail',\n  'quelea',\n  'quokka',\n  'rabbit',\n  'raccoon',\n  'rat',\n  'rattlesnake',\n  'raven',\n  'reindeer',\n  'reptile',\n  'rhinoceros',\n  'roadrunner',\n  'rodent',\n  'rook',\n  'rooster',\n  'roundworm',\n  'sailfish',\n  'salamander',\n  'salmon',\n  'sawfish',\n  'scallop',\n  'scorpion',\n  'seahorse',\n  'shark',\n  'sheep',\n  'shrew',\n  'shrimp',\n  'silkworm',\n  'silverfish',\n  'skink',\n  'skunk',\n  'sloth',\n  'slug',\n  'smelt',\n  'snail',\n  'snake',\n  'snipe',\n  'sole',\n  'sparrow',\n  'spider',\n  'spoonbill',\n  'squid',\n  'squirrel',\n  'starfish',\n  'stingray',\n  'stoat',\n  'stork',\n  'sturgeon',\n  'swallow',\n  'swan',\n  'swift',\n  'swordfish',\n  'swordtail',\n  'tahr',\n  'takin',\n  'tapir',\n  'tarantula',\n  'tarsier',\n  'termite',\n  'tern',\n  'thrush',\n  'tick',\n  'tiger',\n  'tiglon',\n  'toad',\n  'tortoise',\n  'toucan',\n  'trout',\n  'tuna',\n  'turkey',\n  'turtle',\n  'tyrannosaurus',\n  'urial',\n  'vicuna',\n  'viper',\n  'vole',\n  'vulture',\n  'wallaby',\n  'walrus',\n  'wasp',\n  'warbler',\n  'weasel',\n  'whale',\n  'whippet',\n  'whitefish',\n  'wildcat',\n  'wildebeest',\n  'wildfowl',\n  'wolf',\n  'wolverine',\n  'wombat',\n  'woodpecker',\n  'worm',\n  'wren',\n  'xerinae',\n  'yak',\n  'zebra',\n  'alpaca',\n  'cat',\n  'cattle',\n  'chicken',\n  'dog',\n  'donkey',\n  'ferret',\n  'gayal',\n  'goldfish',\n  'guppy',\n  'horse',\n  'koi',\n  'llama',\n  'sheep',\n  'yak',\n  'unicorn',\n];\n\nconst adjectives = [\n  'average',\n  'big',\n  'colossal',\n  'fat',\n  'giant',\n  'gigantic',\n  'great',\n  'huge',\n  'immense',\n  'large',\n  'little',\n  'long',\n  'mammoth',\n  'massive',\n  'miniature',\n  'petite',\n  'puny',\n  'short',\n  'small',\n  'tall',\n  'tiny',\n  'boiling',\n  'breezy',\n  'broken',\n  'bumpy',\n  'chilly',\n  'cold',\n  'cool',\n  'creepy',\n  'crooked',\n  'cuddly',\n  'curly',\n  'damaged',\n  'damp',\n  'dirty',\n  'dry',\n  'dusty',\n  'filthy',\n  'flaky',\n  'fluffy',\n  'wet',\n  'broad',\n  'chubby',\n  'crooked',\n  'curved',\n  'deep',\n  'flat',\n  'high',\n  'hollow',\n  'low',\n  'narrow',\n  'round',\n  'shallow',\n  'skinny',\n  'square',\n  'steep',\n  'straight',\n  'wide',\n  'ancient',\n  'brief',\n  'early',\n  'fast',\n  'late',\n  'long',\n  'modern',\n  'old',\n  'quick',\n  'rapid',\n  'short',\n  'slow',\n  'swift',\n  'young',\n  'abundant',\n  'empty',\n  'few',\n  'heavy',\n  'light',\n  'many',\n  'numerous',\n  'Sound',\n  'cooing',\n  'deafening',\n  'faint',\n  'harsh',\n  'hissing',\n  'hushed',\n  'husky',\n  'loud',\n  'melodic',\n  'moaning',\n  'mute',\n  'noisy',\n  'purring',\n  'quiet',\n  'raspy',\n  'resonant',\n  'screeching',\n  'shrill',\n  'silent',\n  'soft',\n  'squealing',\n  'thundering',\n  'voiceless',\n  'whispering',\n  'bitter',\n  'delicious',\n  'fresh',\n  'juicy',\n  'ripe',\n  'rotten',\n  'salty',\n  'sour',\n  'spicy',\n  'stale',\n  'sticky',\n  'strong',\n  'sweet',\n  'tasteless',\n  'tasty',\n  'thirsty',\n  'fluttering',\n  'fuzzy',\n  'greasy',\n  'grubby',\n  'hard',\n  'hot',\n  'icy',\n  'loose',\n  'melted',\n  'plastic',\n  'prickly',\n  'rainy',\n  'rough',\n  'scattered',\n  'shaggy',\n  'shaky',\n  'sharp',\n  'shivering',\n  'silky',\n  'slimy',\n  'slippery',\n  'smooth',\n  'soft',\n  'solid',\n  'steady',\n  'sticky',\n  'tender',\n  'tight',\n  'uneven',\n  'weak',\n  'wet',\n  'wooden',\n  'afraid',\n  'angry',\n  'annoyed',\n  'anxious',\n  'arrogant',\n  'ashamed',\n  'awful',\n  'bad',\n  'bewildered',\n  'bored',\n  'combative',\n  'condemned',\n  'confused',\n  'creepy',\n  'cruel',\n  'dangerous',\n  'defeated',\n  'defiant',\n  'depressed',\n  'disgusted',\n  'disturbed',\n  'eerie',\n  'embarrassed',\n  'envious',\n  'evil',\n  'fierce',\n  'foolish',\n  'frantic',\n  'frightened',\n  'grieving',\n  'helpless',\n  'homeless',\n  'hungry',\n  'hurt',\n  'ill',\n  'jealous',\n  'lonely',\n  'mysterious',\n  'naughty',\n  'nervous',\n  'obnoxious',\n  'outrageous',\n  'panicky',\n  'repulsive',\n  'scary',\n  'scornful',\n  'selfish',\n  'sore',\n  'tense',\n  'terrible',\n  'thoughtless',\n  'tired',\n  'troubled',\n  'upset',\n  'uptight',\n  'weary',\n  'wicked',\n  'worried',\n  'agreeable',\n  'amused',\n  'brave',\n  'calm',\n  'charming',\n  'cheerful',\n  'comfortable',\n  'cooperative',\n  'courageous',\n  'delightful',\n  'determined',\n  'eager',\n  'elated',\n  'enchanting',\n  'encouraging',\n  'energetic',\n  'enthusiastic',\n  'excited',\n  'exuberant',\n  'fair',\n  'faithful',\n  'fantastic',\n  'fine',\n  'friendly',\n  'funny',\n  'gentle',\n  'glorious',\n  'good',\n  'happy',\n  'healthy',\n  'helpful',\n  'hilarious',\n  'jolly',\n  'joyous',\n  'kind',\n  'lively',\n  'lovely',\n  'lucky',\n  'obedient',\n  'perfect',\n  'pleasant',\n  'proud',\n  'relieved',\n  'silly',\n  'smiling',\n  'splendid',\n  'successful',\n  'thoughtful',\n  'victorious',\n  'vivacious',\n  'witty',\n  'wonderful',\n  'zealous',\n  'zany',\n  'other',\n  'good',\n  'new',\n  'old',\n  'great',\n  'high',\n  'small',\n  'different',\n  'large',\n  'local',\n  'social',\n  'important',\n  'long',\n  'young',\n  'national',\n  'british',\n  'right',\n  'early',\n  'possible',\n  'big',\n  'little',\n  'political',\n  'able',\n  'late',\n  'general',\n  'full',\n  'far',\n  'low',\n  'public',\n  'available',\n  'bad',\n  'main',\n  'sure',\n  'clear',\n  'major',\n  'economic',\n  'only',\n  'likely',\n  'real',\n  'black',\n  'particular',\n  'international',\n  'special',\n  'difficult',\n  'certain',\n  'open',\n  'whole',\n  'white',\n  'free',\n  'short',\n  'easy',\n  'strong',\n  'european',\n  'central',\n  'similar',\n  'human',\n  'common',\n  'necessary',\n  'single',\n  'personal',\n  'hard',\n  'private',\n  'poor',\n  'financial',\n  'wide',\n  'foreign',\n  'simple',\n  'recent',\n  'concerned',\n  'american',\n  'various',\n  'close',\n  'fine',\n  'english',\n  'wrong',\n  'present',\n  'royal',\n  'natural',\n  'individual',\n  'nice',\n  'french',\n  'nihilist',\n  'solipsist',\n  'materialist',\n  'surrealist',\n  'heroic',\n  'awesome',\n  'hedonist',\n  'absurd',\n  'current',\n  'modern',\n  'labour',\n  'legal',\n  'happy',\n  'final',\n  'red',\n  'normal',\n  'serious',\n  'previous',\n  'total',\n  'prime',\n  'significant',\n  'industrial',\n  'sorry',\n  'dead',\n  'specific',\n  'appropriate',\n  'top',\n  'soviet',\n  'basic',\n  'military',\n  'original',\n  'successful',\n  'aware',\n  'hon',\n  'popular',\n  'heavy',\n  'professional',\n  'direct',\n  'dark',\n  'cold',\n  'ready',\n  'green',\n  'useful',\n  'effective',\n  'western',\n  'traditional',\n  'scottish',\n  'german',\n  'independent',\n  'deep',\n  'interesting',\n  'considerable',\n  'involved',\n  'physical',\n  'hot',\n  'existing',\n  'responsible',\n  'complete',\n  'medical',\n  'blue',\n  'extra',\n  'past',\n  'male',\n  'interested',\n  'fair',\n  'essential',\n  'beautiful',\n  'civil',\n  'primary',\n  'obvious',\n  'future',\n  'environmental',\n  'positive',\n  'senior',\n  'nuclear',\n  'annual',\n  'relevant',\n  'huge',\n  'rich',\n  'commercial',\n  'safe',\n  'regional',\n  'practical',\n  'official',\n  'separate',\n  'key',\n  'chief',\n  'regular',\n  'due',\n  'additional',\n  'active',\n  'powerful',\n  'complex',\n  'standard',\n  'impossible',\n  'light',\n  'warm',\n  'middle',\n  'fresh',\n  'sexual',\n  'front',\n  'domestic',\n  'actual',\n  'united',\n  'technical',\n  'ordinary',\n  'cheap',\n  'strange',\n  'internal',\n  'excellent',\n  'quiet',\n  'soft',\n  'potential',\n  'northern',\n  'religious',\n  'quick',\n  'very',\n  'famous',\n  'cultural',\n  'proper',\n  'broad',\n  'joint',\n  'formal',\n  'limited',\n  'conservative',\n  'lovely',\n  'usual',\n  'ltd',\n  'unable',\n  'rural',\n  'initial',\n  'substantial',\n  'bright',\n  'average',\n  'leading',\n  'reasonable',\n  'immediate',\n  'suitable',\n  'equal',\n  'detailed',\n  'working',\n  'overall',\n  'female',\n  'afraid',\n  'democratic',\n  'growing',\n  'sufficient',\n  'scientific',\n  'eastern',\n  'correct',\n  'inc',\n  'irish',\n  'expensive',\n  'educational',\n  'mental',\n  'dangerous',\n  'critical',\n  'increased',\n  'familiar',\n  'unlikely',\n  'double',\n  'perfect',\n  'slow',\n  'tiny',\n  'dry',\n  'historical',\n  'thin',\n  'daily',\n  'southern',\n  'increasing',\n  'wild',\n  'alone',\n  'urban',\n  'empty',\n  'married',\n  'narrow',\n  'liberal',\n  'supposed',\n  'upper',\n  'apparent',\n  'tall',\n  'busy',\n  'bloody',\n  'prepared',\n  'russian',\n  'moral',\n  'careful',\n  'clean',\n  'attractive',\n  'japanese',\n  'vital',\n  'thick',\n  'alternative',\n  'fast',\n  'ancient',\n  'elderly',\n  'rare',\n  'external',\n  'capable',\n  'brief',\n  'wonderful',\n  'grand',\n  'typical',\n  'entire',\n  'grey',\n  'constant',\n  'vast',\n  'surprised',\n  'ideal',\n  'terrible',\n  'academic',\n  'funny',\n  'minor',\n  'pleased',\n  'severe',\n  'ill',\n  'corporate',\n  'negative',\n  'permanent',\n  'weak',\n  'brown',\n  'fundamental',\n  'odd',\n  'crucial',\n  'inner',\n  'used',\n  'criminal',\n  'contemporary',\n  'sharp',\n  'sick',\n  'near',\n  'roman',\n  'massive',\n  'unique',\n  'secondary',\n  'parliamentary',\n  'african',\n  'unknown',\n  'subsequent',\n  'angry',\n  'alive',\n  'guilty',\n  'lucky',\n  'enormous',\n  'well',\n  'yellow',\n  'unusual',\n  'net',\n  'tough',\n  'dear',\n  'extensive',\n  'glad',\n  'remaining',\n  'agricultural',\n  'alright',\n  'healthy',\n  'italian',\n  'principal',\n  'tired',\n  'efficient',\n  'comfortable',\n  'chinese',\n  'relative',\n  'friendly',\n  'conventional',\n  'willing',\n  'sudden',\n  'proposed',\n  'voluntary',\n  'slight',\n  'valuable',\n  'dramatic',\n  'golden',\n  'temporary',\n  'federal',\n  'keen',\n  'flat',\n  'silent',\n  'indian',\n  'worried',\n  'pale',\n  'statutory',\n  'welsh',\n  'dependent',\n  'firm',\n  'wet',\n  'competitive',\n  'armed',\n  'radical',\n  'outside',\n  'acceptable',\n  'sensitive',\n  'living',\n  'pure',\n  'global',\n  'emotional',\n  'sad',\n  'secret',\n  'rapid',\n  'adequate',\n  'fixed',\n  'sweet',\n  'administrative',\n  'wooden',\n  'remarkable',\n  'comprehensive',\n  'surprising',\n  'solid',\n  'rough',\n  'mere',\n  'mass',\n  'brilliant',\n  'maximum',\n  'absolute',\n  'electronic',\n  'visual',\n  'electric',\n  'cool',\n  'spanish',\n  'literary',\n  'continuing',\n  'supreme',\n  'chemical',\n  'genuine',\n  'exciting',\n  'written',\n  'advanced',\n  'extreme',\n  'classical',\n  'fit',\n  'favourite',\n  'widespread',\n  'confident',\n  'straight',\n  'proud',\n  'numerous',\n  'opposite',\n  'distinct',\n  'mad',\n  'helpful',\n  'given',\n  'disabled',\n  'consistent',\n  'anxious',\n  'nervous',\n  'awful',\n  'stable',\n  'constitutional',\n  'satisfied',\n  'conscious',\n  'developing',\n  'strategic',\n  'holy',\n  'smooth',\n  'dominant',\n  'remote',\n  'theoretical',\n  'outstanding',\n  'pink',\n  'pretty',\n  'clinical',\n  'minimum',\n  'honest',\n  'impressive',\n  'related',\n  'residential',\n  'extraordinary',\n  'plain',\n  'visible',\n  'accurate',\n  'distant',\n  'still',\n  'greek',\n  'complicated',\n  'musical',\n  'precise',\n  'gentle',\n  'broken',\n  'live',\n  'silly',\n  'fat',\n  'tight',\n  'monetary',\n  'round',\n  'psychological',\n  'violent',\n  'unemployed',\n  'inevitable',\n  'junior',\n  'sensible',\n  'grateful',\n  'pleasant',\n  'dirty',\n  'structural',\n  'welcome',\n  'deaf',\n  'above',\n  'continuous',\n  'blind',\n  'overseas',\n  'mean',\n  'entitled',\n  'delighted',\n  'loose',\n  'occasional',\n  'evident',\n  'desperate',\n  'fellow',\n  'universal',\n  'square',\n  'steady',\n  'classic',\n  'equivalent',\n  'intellectual',\n  'victorian',\n  'level',\n  'ultimate',\n  'creative',\n  'lost',\n  'medieval',\n  'clever',\n  'linguistic',\n  'convinced',\n  'judicial',\n  'raw',\n  'sophisticated',\n  'asleep',\n  'vulnerable',\n  'illegal',\n  'outer',\n  'revolutionary',\n  'bitter',\n  'changing',\n  'australian',\n  'native',\n  'imperial',\n  'strict',\n  'wise',\n  'informal',\n  'flexible',\n  'collective',\n  'frequent',\n  'experimental',\n  'spiritual',\n  'intense',\n  'rational',\n  'generous',\n  'inadequate',\n  'prominent',\n  'logical',\n  'bare',\n  'historic',\n  'modest',\n  'dutch',\n  'acute',\n  'electrical',\n  'valid',\n  'weekly',\n  'gross',\n  'automatic',\n  'loud',\n  'reliable',\n  'mutual',\n  'liable',\n  'multiple',\n  'ruling',\n  'curious',\n  'sole',\n  'managing',\n  'pregnant',\n  'latin',\n  'nearby',\n  'exact',\n  'underlying',\n  'identical',\n  'satisfactory',\n  'marginal',\n  'distinctive',\n  'electoral',\n  'urgent',\n  'presidential',\n  'controversial',\n  'everyday',\n  'encouraging',\n  'organic',\n  'continued',\n  'expected',\n  'statistical',\n  'desirable',\n  'innocent',\n  'improved',\n  'exclusive',\n  'marked',\n  'experienced',\n  'unexpected',\n  'superb',\n  'sheer',\n  'disappointed',\n  'frightened',\n  'gastric',\n  'romantic',\n  'naked',\n  'reluctant',\n  'magnificent',\n  'convenient',\n  'established',\n  'closed',\n  'uncertain',\n  'artificial',\n  'diplomatic',\n  'tremendous',\n  'marine',\n  'mechanical',\n  'retail',\n  'institutional',\n  'mixed',\n  'required',\n  'biological',\n  'known',\n  'functional',\n  'straightforward',\n  'superior',\n  'digital',\n  'spectacular',\n  'unhappy',\n  'confused',\n  'unfair',\n  'aggressive',\n  'spare',\n  'painful',\n  'abstract',\n  'asian',\n  'associated',\n  'legislative',\n  'monthly',\n  'intelligent',\n  'hungry',\n  'explicit',\n  'nasty',\n  'just',\n  'faint',\n  'coloured',\n  'ridiculous',\n  'amazing',\n  'comparable',\n  'successive',\n  'realistic',\n  'back',\n  'decent',\n  'decentralized',\n  'bitcoin',\n  'cypherpunk',\n  'unnecessary',\n  'flying',\n  'random',\n  'influential',\n  'dull',\n  'genetic',\n  'neat',\n  'marvellous',\n  'crazy',\n  'damp',\n  'giant',\n  'secure',\n  'bottom',\n  'skilled',\n  'subtle',\n  'elegant',\n  'brave',\n  'lesser',\n  'parallel',\n  'steep',\n  'intensive',\n  'casual',\n  'tropical',\n  'lonely',\n  'partial',\n  'preliminary',\n  'concrete',\n  'alleged',\n  'assistant',\n  'vertical',\n  'upset',\n  'delicate',\n  'mild',\n  'occupational',\n  'excessive',\n  'progressive',\n  'exceptional',\n  'integrated',\n  'striking',\n  'continental',\n  'okay',\n  'harsh',\n  'combined',\n  'fierce',\n  'handsome',\n  'characteristic',\n  'chronic',\n  'compulsory',\n  'interim',\n  'objective',\n  'splendid',\n  'magic',\n  'systematic',\n  'obliged',\n  'payable',\n  'fun',\n  'horrible',\n  'primitive',\n  'fascinating',\n  'ideological',\n  'metropolitan',\n  'surrounding',\n  'estimated',\n  'peaceful',\n  'premier',\n  'operational',\n  'technological',\n  'kind',\n  'advisory',\n  'hostile',\n  'precious',\n  'accessible',\n  'determined',\n  'excited',\n  'impressed',\n  'provincial',\n  'smart',\n  'endless',\n  'isolated',\n  'drunk',\n  'geographical',\n  'like',\n  'dynamic',\n  'boring',\n  'forthcoming',\n  'unfortunate',\n  'definite',\n  'super',\n  'notable',\n  'indirect',\n  'stiff',\n  'wealthy',\n  'awkward',\n  'lively',\n  'neutral',\n  'artistic',\n  'content',\n  'mature',\n  'colonial',\n  'ambitious',\n  'evil',\n  'magnetic',\n  'verbal',\n  'legitimate',\n  'sympathetic',\n  'empirical',\n  'head',\n  'shallow',\n  'vague',\n  'naval',\n  'depressed',\n  'shared',\n  'added',\n  'shocked',\n  'mid',\n  'worthwhile',\n  'qualified',\n  'missing',\n  'blank',\n  'absent',\n  'favourable',\n  'polish',\n  'israeli',\n  'developed',\n  'profound',\n  'representative',\n  'enthusiastic',\n  'dreadful',\n  'rigid',\n  'reduced',\n  'cruel',\n  'coastal',\n  'peculiar',\n  'swiss',\n  'crude',\n  'extended',\n  'selected',\n  'eager',\n  'canadian',\n  'bold',\n  'relaxed',\n  'corresponding',\n  'running',\n  'planned',\n  'applicable',\n  'immense',\n  'allied',\n  'comparative',\n  'uncomfortable',\n  'conservation',\n  'productive',\n  'beneficial',\n  'bored',\n  'charming',\n  'minimal',\n  'mobile',\n  'turkish',\n  'orange',\n  'rear',\n  'passive',\n  'suspicious',\n  'overwhelming',\n  'fatal',\n  'resulting',\n  'symbolic',\n  'registered',\n  'neighbouring',\n  'calm',\n  'irrelevant',\n  'patient',\n  'compact',\n  'profitable',\n  'rival',\n  'loyal',\n  'moderate',\n  'distinguished',\n  'interior',\n  'noble',\n  'insufficient',\n  'eligible',\n  'mysterious',\n  'varying',\n  'managerial',\n  'molecular',\n  'olympic',\n  'linear',\n  'prospective',\n  'printed',\n  'parental',\n  'diverse',\n  'elaborate',\n  'furious',\n  'fiscal',\n  'burning',\n  'useless',\n  'semantic',\n  'embarrassed',\n  'inherent',\n  'philosophical',\n  'deliberate',\n  'awake',\n  'variable',\n  'promising',\n  'unpleasant',\n  'varied',\n  'sacred',\n  'selective',\n  'inclined',\n  'tender',\n  'hidden',\n  'worthy',\n  'intermediate',\n  'sound',\n  'protective',\n  'fortunate',\n  'slim',\n  'defensive',\n  'divine',\n  'stuck',\n  'driving',\n  'invisible',\n  'misleading',\n  'circular',\n  'mathematical',\n  'inappropriate',\n  'liquid',\n  'persistent',\n  'solar',\n  'doubtful',\n  'manual',\n  'architectural',\n  'intact',\n  'incredible',\n  'devoted',\n  'prior',\n  'tragic',\n  'respectable',\n  'optimistic',\n  'convincing',\n  'unacceptable',\n  'decisive',\n  'competent',\n  'spatial',\n  'respective',\n  'binding',\n  'relieved',\n  'nursing',\n  'toxic',\n  'select',\n  'redundant',\n  'integral',\n  'then',\n  'probable',\n  'amateur',\n  'fond',\n  'passing',\n  'specified',\n  'territorial',\n  'horizontal',\n  'inland',\n  'cognitive',\n  'regulatory',\n  'miserable',\n  'resident',\n  'polite',\n  'scared',\n  'gothic',\n  'civilian',\n  'instant',\n  'lengthy',\n  'adverse',\n  'korean',\n  'unconscious',\n  'anonymous',\n  'aesthetic',\n  'orthodox',\n  'static',\n  'unaware',\n  'costly',\n  'fantastic',\n  'foolish',\n  'fashionable',\n  'causal',\n  'compatible',\n  'wee',\n  'implicit',\n  'dual',\n  'ok',\n  'cheerful',\n  'subjective',\n  'forward',\n  'surviving',\n  'exotic',\n  'purple',\n  'cautious',\n  'visiting',\n  'aggregate',\n  'ethical',\n  'teenage',\n  'dying',\n  'disastrous',\n  'delicious',\n  'confidential',\n  'underground',\n  'thorough',\n  'grim',\n  'autonomous',\n  'atomic',\n  'frozen',\n  'colourful',\n  'injured',\n  'uniform',\n  'ashamed',\n  'glorious',\n  'wicked',\n  'coherent',\n  'rising',\n  'shy',\n  'novel',\n  'balanced',\n  'delightful',\n  'arbitrary',\n  'adjacent',\n  'worrying',\n  'weird',\n  'unchanged',\n  'rolling',\n  'evolutionary',\n  'intimate',\n  'sporting',\n  'disciplinary',\n  'formidable',\n  'lexical',\n  'noisy',\n  'gradual',\n  'accused',\n  'homeless',\n  'supporting',\n  'coming',\n  'renewed',\n  'excess',\n  'retired',\n  'rubber',\n  'chosen',\n  'outdoor',\n  'embarrassing',\n  'preferred',\n  'bizarre',\n  'appalling',\n  'agreed',\n  'imaginative',\n  'governing',\n  'accepted',\n  'vocational',\n  'mighty',\n  'puzzled',\n  'worldwide',\n  'organisational',\n  'sunny',\n  'eldest',\n  'eventual',\n  'spontaneous',\n  'vivid',\n  'rude',\n  'faithful',\n  'ministerial',\n  'innovative',\n  'controlled',\n  'conceptual',\n  'unwilling',\n  'civic',\n  'meaningful',\n  'alive',\n  'brainy',\n  'breakable',\n  'busy',\n  'careful',\n  'cautious',\n  'clever',\n  'concerned',\n  'crazy',\n  'curious',\n  'dead',\n  'different',\n  'difficult',\n  'doubtful',\n  'easy',\n  'famous',\n  'fragile',\n  'helpful',\n  'helpless',\n  'important',\n  'impossible',\n  'innocent',\n  'inquisitive',\n  'modern',\n  'open',\n  'outstanding',\n  'poor',\n  'powerful',\n  'puzzled',\n  'real',\n  'rich',\n  'shy',\n  'sleepy',\n  'super',\n  'tame',\n  'uninterested',\n  'wandering',\n  'wild',\n  'wrong',\n  'adorable',\n  'alert',\n  'average',\n  'beautiful',\n  'blonde',\n  'bloody',\n  'blushing',\n  'bright',\n  'clean',\n  'clear',\n  'cloudy',\n  'colorful',\n  'crowded',\n  'cute',\n  'dark',\n  'drab',\n  'distinct',\n  'dull',\n  'elegant',\n  'fancy',\n  'filthy',\n  'glamorous',\n  'gleaming',\n  'graceful',\n  'grotesque',\n  'homely',\n  'light',\n  'misty',\n  'motionless',\n  'muddy',\n  'plain',\n  'poised',\n  'quaint',\n  'shiny',\n  'smoggy',\n  'sparkling',\n  'spotless',\n  'stormy',\n  'strange',\n  'ugly',\n  'unsightly',\n  'unusual',\n  'bad',\n  'better',\n  'beautiful',\n  'big',\n  'black',\n  'blue',\n  'bright',\n  'clumsy',\n  'crazy',\n  'dizzy',\n  'dull',\n  'fat',\n  'frail',\n  'friendly',\n  'funny',\n  'great',\n  'green',\n  'gigantic',\n  'gorgeous',\n  'grumpy',\n  'handsome',\n  'happy',\n  'horrible',\n  'itchy',\n  'jittery',\n  'jolly',\n  'kind',\n  'long',\n  'lazy',\n  'magnificent',\n  'magenta',\n  'many',\n  'mighty',\n  'mushy',\n  'nasty',\n  'new',\n  'nice',\n  'nosy',\n  'nutty',\n  'nutritious',\n  'odd',\n  'orange',\n  'ordinary',\n  'pretty',\n  'precious',\n  'prickly',\n  'purple',\n  'quaint',\n  'quiet',\n  'quick',\n  'quickest',\n  'rainy',\n  'rare',\n  'ratty',\n  'red',\n  'roasted',\n  'robust',\n  'round',\n  'sad',\n  'scary',\n  'scrawny',\n  'short',\n  'silly',\n  'stingy',\n  'strange',\n  'striped',\n  'spotty',\n  'tart',\n  'tall',\n  'tame',\n  'tan',\n  'tender',\n  'testy',\n  'tricky',\n  'tough',\n  'ugly',\n  'ugliest',\n  'vast',\n  'watery',\n  'wasteful',\n  'wonderful',\n  'yellow',\n  'yummy',\n  'zany',\n];\n\nexport default {\n  gunOnceDefined,\n  async getHash (str: string, format = `base64`) {\n    if (!str) {\n      return undefined;\n    }\n    const encoder = new TextEncoder();\n    const data = encoder.encode(str);\n    const buffer = await crypto.subtle.digest('SHA-256', data);\n    const hash = this.arrayBufferToBase64(buffer);\n    if (format === `hex`) {\n      return this.base64ToHex(hash);\n    }\n    console.log('hash', hash);\n    return hash;\n  },\n\n  capitalize(s: string) {\n    return s.charAt(0).toUpperCase() + s.slice(1)\n  },\n\n  generateName() {\n    return `${this.capitalize(_.sample(adjectives)!)} ${this.capitalize(_.sample(animals)!)}`;\n  },\n\n  base64ToHex(str: string) {\n    const raw = atob(str);\n    let result = '';\n    for (let i = 0; i < raw.length; i++) {\n      const hex = raw.charCodeAt(i).toString(16);\n      result += (hex.length === 2 ? hex : `0${ hex}`);\n    }\n    return result;\n  },\n\n  arrayBufferToBase64( buffer ) {\n    var binary = '';\n    var bytes = new Uint8Array( buffer );\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode( bytes[ i ] );\n    }\n    return window.btoa( binary );\n  },\n\n  getCaret(el: HTMLInputElement) {\n    if (el.selectionStart) {\n      return el.selectionStart;\n    } else { // @ts-ignore\n      if (document.selection) {\n        el.focus();\n        // @ts-ignore\n        const r = document.selection.createRange();\n        if (r === null) {\n          return 0;\n        }\n        // @ts-ignore\n        const re = el.createTextRange(), rc = re.duplicate();\n        re.moveToBookmark(r.getBookmark());\n        rc.setEndPoint('EndToStart', re);\n        return rc.text.length;\n      }\n    }\n    return 0;\n  },\n\n  injectCss() {\n    const elementId = `irisStyle`;\n    if (document.getElementById(elementId)) {\n      return;\n    }\n    const sheet = document.createElement(`style`);\n    sheet.id = elementId;\n    sheet.innerHTML = `\n      .iris-follow-button .hover {\n        display: none;\n      }\n\n      .iris-follow-button.following:hover .hover {\n        display: inline;\n      }\n\n      .iris-follow-button.following:hover .nonhover {\n        display: none;\n      }\n\n      .iris-identicon * {\n        box-sizing: border-box;\n      }\n\n      .iris-identicon {\n        vertical-align: middle;\n        border-radius: 50%;\n        text-align: center;\n        display: inline-block;\n        position: relative;\n        max-width: 100%;\n      }\n\n      .iris-distance {\n        z-index: 2;\n        position: absolute;\n        left:0%;\n        top:2px;\n        width: 100%;\n        text-align: right;\n        color: #fff;\n        text-shadow: 0 0 1px #000;\n        font-size: 75%;\n        line-height: 75%;\n        font-weight: bold;\n      }\n\n      .iris-pie {\n        border-radius: 50%;\n        position: absolute;\n        top: 0;\n        left: 0;\n        box-shadow: 0px 0px 0px 0px #82FF84;\n        padding-bottom: 100%;\n        max-width: 100%;\n        -webkit-transition: all 0.2s ease-in-out;\n        -moz-transition: all 0.2s ease-in-out;\n        transition: all 0.2s ease-in-out;\n      }\n\n      .iris-card {\n        padding: 10px;\n        background-color: #f7f7f7;\n        color: #777;\n        border: 1px solid #ddd;\n        display: flex;\n        flex-direction: row;\n        overflow: hidden;\n      }\n\n      .iris-card a {\n        -webkit-transition: color 150ms;\n        transition: color 150ms;\n        text-decoration: none;\n        color: #337ab7;\n      }\n\n      .iris-card a:hover, .iris-card a:active {\n        text-decoration: underline;\n        color: #23527c;\n      }\n\n      .iris-pos {\n        color: #3c763d;\n      }\n\n      .iris-neg {\n        color: #a94442;\n      }\n\n      .iris-identicon img {\n        position: absolute;\n        top: 0;\n        left: 0;\n        max-width: 100%;\n        border-radius: 50%;\n        border-color: transparent;\n        border-style: solid;\n      }\n\n      .iris-chat-open-button {\n        background-color: #1e1e1e;\n        color: #fff;\n        padding: 15px;\n        cursor: pointer;\n        user-select: none;\n      }\n\n      .iris-chat-open-button svg {\n        width: 1em;\n      }\n\n      .iris-chat-open-button, .iris-chat-box {\n        position: fixed;\n        bottom: 0.5rem;\n        right: 0.5rem;\n        border-radius: 8px;\n        font-family: system-ui;\n        font-size: 15px;\n      }\n\n      .iris-chat-box {\n        background-color: #fff;\n        max-height: 25rem;\n        box-shadow: 2px 2px 20px rgba(0, 0, 0, 0.2);\n        height: calc(100% - 44px);\n        display: flex;\n        flex-direction: column;\n        width: 320px;\n        color: rgb(38, 38, 38);\n      }\n\n      .iris-chat-box.minimized {\n        height: auto;\n      }\n\n      .iris-chat-box.minimized .iris-chat-header {\n        border-radius: 8px;\n        cursor: pointer;\n      }\n\n      .iris-chat-box.minimized .iris-chat-messages, .iris-chat-box.minimized .iris-typing-indicator, .iris-chat-box.minimized .iris-chat-input-wrapper, .iris-chat-box.minimized .iris-chat-minimize, .iris-chat-box.minimized .iris-chat-close {\n        display: none;\n      }\n\n      .iris-chat-header {\n        background-color: #1e1e1e;\n        height: 44px;\n        color: #fff;\n        border-radius: 8px 8px 0 0;\n        text-align: center;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        flex: none;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n\n      .iris-chat-header-text {\n        flex: 1;\n      }\n\n      .iris-online-indicator {\n        color: #bfbfbf;\n        margin-right: 5px;\n        font-size: 12px;\n        user-select: none;\n        flex: none;\n      }\n\n      .iris-online-indicator.yes {\n        color: #80bf5f;\n      }\n\n      .iris-typing-indicator {\n        display: none;\n        background-color: rgba(255, 255, 255, 0.5);\n        font-size: 12px;\n        padding: 2px;\n        color: #777;\n      }\n\n      .iris-typing-indicator.yes {\n        display: block;\n      }\n\n      .iris-chat-messages {\n        flex: 1;\n        padding: 15px;\n        overflow-y: scroll;\n      }\n\n      .iris-chat-input-wrapper {\n        flex: none;\n        padding: 15px;\n        background-color: #efefef;\n        display: flex;\n        flex-direction: row;\n        border-radius: 0 0 8px 8px;\n      }\n\n      .iris-chat-input-wrapper textarea {\n        padding: 15px 8px;\n        border-radius: 4px;\n        border: 1px solid rgba(0,0,0,0);\n        width: auto;\n        font-size: 15px;\n        resize: none;\n        flex: 1;\n      }\n\n      .iris-chat-input-wrapper textarea:focus {\n        outline: none;\n        border: 1px solid #6dd0ed;\n      }\n\n      .iris-chat-input-wrapper button svg {\n        display: inline-block;\n        font-size: inherit;\n        height: 1em;\n        width: 1em;\n        overflow: visible;\n        vertical-align: -0.125em;\n      }\n\n      .iris-chat-input-wrapper button, .iris-chat-input-wrapper button:hover, .iris-chat-input-wrapper button:active, .iris-chat-input-wrapper button:focus {\n        flex: none;\n        color: #999;\n        background-color: transparent;\n        font-size: 30px;\n        padding: 5px;\n        border: 1px solid rgba(0,0,0,0);\n        border-radius: 4px;\n        margin-left: 5px;\n      }\n\n      .iris-chat-input-wrapper button:active, .iris-chat-input-wrapper button:focus {\n        outline: none;\n        border: 1px solid #6dd0ed;\n      }\n\n      .iris-chat-message {\n        display: flex;\n        flex-direction: column;\n        margin-bottom: 2px;\n        overflow-wrap: break-word;\n      }\n\n      .iris-msg-content {\n        background-color: #efefef;\n        padding: 6px 10px;\n        border-radius: 8px;\n        box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.1);\n        flex: none;\n        max-width: 75%;\n      }\n\n      .emoji {\n        font-size: 1.3em;\n        line-height: 1em;\n      }\n\n      .iris-chat-message .emoji-only {\n        font-size: 3em;\n        text-align: center;\n      }\n\n      .iris-seen {\n        color: rgba(0, 0, 0, 0.45);\n        user-select: none;\n      }\n\n      .iris-seen.yes {\n        color: #4fc3f7;\n      }\n\n      .iris-seen svg {\n        width: 18px;\n      }\n\n      .iris-delivered-checkmark {\n        display: none;\n      }\n\n      .delivered .iris-delivered-checkmark {\n        display: initial;\n      }\n\n      .iris-chat-minimize, .iris-chat-close {\n        user-select: none;\n        cursor: pointer;\n        width: 45px;\n        line-height: 44px;\n      }\n\n      .iris-chat-message.their {\n        align-items: flex-start;\n      }\n\n      .iris-chat-message.their + .iris-chat-message.our .iris-msg-content, .day-separator + .iris-chat-message.our .iris-msg-content {\n        margin-top: 15px;\n        border-radius: 8px 0px 8px 8px;\n      }\n\n      .iris-chat-message.their:first-of-type .iris-msg-content {\n        border-radius: 0px 8px 8px 8px;\n      }\n\n      .iris-chat-message.our:first-of-type .iris-msg-content {\n        border-radius: 8px 0px 8px 8px;\n      }\n\n      .iris-chat-message.our + .iris-chat-message.their .iris-msg-content, .day-separator + .iris-chat-message.their .iris-msg-content {\n        margin-top: 15px;\n        border-radius: 0px 8px 8px 8px;\n      }\n\n      .iris-chat-message.our {\n        align-items: flex-end;\n      }\n\n      .iris-chat-message.our .iris-msg-content {\n        background-color: #c5ecf7;\n      }\n\n      .iris-chat-message .time {\n        text-align: right;\n        font-size: 12px;\n        color: rgba(0, 0, 0, 0.45);\n      }\n\n      .iris-non-string {\n        color: blue;\n      }\n\n      .day-separator {\n        display: inline-block;\n        border-radius: 8px;\n        background-color: rgba(227, 249, 255, 0.91);\n        padding: 6px 10px;\n        margin-top: 15px;\n        margin-left: auto;\n        margin-right: auto;\n        text-transform: uppercase;\n        font-size: 13px;\n        color: rgba(74, 74, 74, 0.88);\n        box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.1);\n        user-select: none;\n      }\n\n      .day-separator:first-of-type {\n        margin-top: 0;\n      }\n\n      *[contenteditable=\"true\"]:not(:focus) {\n        cursor: pointer;\n      }\n\n      *[contenteditable=\"true\"] {\n        outline: none;\n      }\n\n      [placeholder]:empty:before {\n        content: attr(placeholder);\n        color: #999;\n      }\n\n      [placeholder]:empty:focus {\n        cursor: text;\n      }\n      `;\n    document.head.prepend(sheet);\n  },\n\n  getUrlParameter(sParam: string, sParams: string) {\n    const sPageURL = sParams || window.location.search.substring(1);\n    const sURLVariables = sPageURL.split('&');\n    let sParameterName, i;\n\n    for (i = 0; i < sURLVariables.length; i++) {\n      sParameterName = sURLVariables[i].split('=');\n      if (sParameterName[0] === sParam) {\n        return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);\n      }\n    }\n    return;\n  },\n\n  formatTime(date: Date) {\n    // @ts-ignore\n    const t: any = date.toLocaleTimeString(undefined, {timeStyle: 'short'});\n    const s = t.split(':');\n    if (s.length === 3) { // safari tries to display seconds\n      return `${s[0] }:${ s[1] }${s[2].slice(2)}`;\n    }\n    return t;\n  },\n\n  formatDate(date: Date) {\n    const t = date.toLocaleString(undefined, {dateStyle: 'short', timeStyle: 'short'});\n    const s = t.split(':');\n    if (s.length === 3) { // safari tries to display seconds\n      return `${s[0] }:${ s[1] }${s[2].slice(2)}`;\n    }\n    return t;\n  },\n\n  getDaySeparatorText(date: Date, dateStr: string, now?: Date, nowStr?: string) {\n    if (!now) {\n      now = new Date();\n      // @ts-ignore\n      nowStr = now.toLocaleDateString({dateStyle: 'short'});\n    }\n    if (dateStr === nowStr) {\n      return 'today';\n    }\n    const dayDifference = Math.round((now - date) / (1000 * 60 * 60 * 24));\n    if (dayDifference === 0) {\n      return 'today';\n    }\n    if (dayDifference === 1) {\n      return 'yesterday';\n    }\n    if (dayDifference <= 5) {\n      return date.toLocaleDateString(undefined, {weekday: 'long'});\n    }\n    return dateStr;\n  },\n\n  getProfileLink(pub: string) {\n    return `${window.location.origin}/#/profile/${encodeURIComponent(pub)}`;\n  },\n\n  truncateString(s: string, length = 30) {\n    return s.length > length ? `${s.slice(0, length)}...` : s;\n  },\n\n  createElement(type: string, cls?: string, parent?: HTMLElement) {\n    const el = document.createElement(type);\n    if (cls) {\n      el.setAttribute('class', cls);\n    }\n    if (parent) {\n      parent.appendChild(el);\n    }\n    return el;\n  },\n\n  isNode,\n  isElectron,\n  isMobile,\n\n  throttle: (func: Function, limit: number) => {\n    let inThrottle: boolean;\n    return function() {\n      const args = arguments;\n      const context = this;\n      if (!inThrottle) {\n        func.apply(context, args);\n        inThrottle = true;\n        setTimeout(() => inThrottle = false, limit);\n      }\n    };\n  },\n  debounce: (func: Function, delay: number) => {\n    let inDebounce: boolean;\n    return function() {\n      const context = this;\n      const args = arguments;\n      clearTimeout(inDebounce);\n      inDebounce = setTimeout(() => func.apply(context, args), delay);\n    };\n  },\n  sample: (arr: any[]) => arr[Math.floor(Math.random() * arr.length)],\n  sampleSize: (arr: any[], size: number) => {\n    const shuffled = arr.slice(0);\n    let i = arr.length;\n    let min = i - size;\n    let temp;\n    let index;\n    while (i-- > min) {\n      index = Math.floor((i + 1) * Math.random());\n      temp = shuffled[index];\n      shuffled[index] = shuffled[i];\n      shuffled[i] = temp;\n    }\n    return shuffled.slice(min);\n  },\n  defer: (func: Function) => setTimeout(func, 0),\n  once: (func: Function) => {\n    let called = false;\n    return function() {\n      if (called) {\n        return;\n      }\n      called = true;\n      func.apply(this, arguments);\n    };\n  },\n  omit: (obj: any, keys: string[]) => {\n    const newObj = {};\n    Object.keys(obj).forEach(key => {\n      if (!keys.includes(key)) {\n        newObj[key] = obj[key];\n      }\n    });\n    return newObj;\n  }\n};\n","/*eslint no-useless-escape: \"off\", camelcase: \"off\" */\n\nimport util from './util';\n// eslint-disable-line no-unused-vars\n\nlet myKey: any;\n\nclass Key {\n  static async getActiveKey(datadir = `.`, keyfile = `iris.key`, fs?: any) {\n    if (myKey) {\n      return myKey;\n    }\n    if (fs) {\n      const privKeyFile = `${datadir}/${keyfile}`;\n      if (fs.existsSync(privKeyFile)) {\n        const f = fs.readFileSync(privKeyFile, `utf8`);\n        myKey = Key.fromString(f);\n      } else {\n        const newKey = await Key.generate();\n        myKey = myKey || newKey; // eslint-disable-line require-atomic-updates\n        fs.writeFileSync(privKeyFile, Key.toString(myKey));\n        fs.chmodSync(privKeyFile, 400);\n      }\n      if (!myKey) {\n        throw new Error(`loading default key failed - check ${datadir}/${keyfile}`);\n      }\n    } else {\n      const str = window.localStorage.getItem(`iris.myKey`);\n      if (str) {\n        myKey = Key.fromString(str);\n      } else {\n        const newKey = await Key.generate();\n        myKey = myKey || newKey; // eslint-disable-line require-atomic-updates\n        window.localStorage.setItem(`iris.myKey`, Key.toString(myKey));\n      }\n      if (!myKey) {\n        throw new Error(`loading default key failed - check localStorage iris.myKey`);\n      }\n    }\n    return myKey;\n  }\n\n  static getDefault(datadir = `.`, keyfile = `iris.key`) {\n    return Key.getActiveKey(datadir, keyfile);\n  }\n\n  static async getActivePub(datadir = `.`, keyfile = `iris.key`) {\n    const key = await Key.getActiveKey(datadir, keyfile);\n    return key.pub;\n  }\n\n  static setActiveKey(key: any, save = true, datadir = `.`, keyfile = `iris.key`, fs: any) {\n    myKey = key;\n    if (!save) return;\n    if (util.isNode) {\n      const privKeyFile = `${datadir}/${keyfile}`;\n      fs.writeFileSync(privKeyFile, Key.toString(myKey));\n      fs.chmodSync(privKeyFile, 400);\n    } else {\n      window.localStorage.setItem(`iris.myKey`, Key.toString(myKey));\n    }\n  }\n\n  static toString(key: any) {\n    return JSON.stringify(key);\n  }\n\n  static getId(key: any) {\n    if (!(key && key.pub)) {\n      throw new Error(`missing param`);\n    }\n    return key.pub; // hack until GUN supports lookups by keyID\n    //return util.getHash(key.pub);\n  }\n\n  static fromString(str: string) {\n    return JSON.parse(str);\n  }\n\n  // copied from Gun.SEA\n  static async generate() {\n    try {\n      var ecdhSubtle = window.crypto.subtle;\n      // First: ECDSA keys for signing/verifying...\n      var sa = await ecdhSubtle.generateKey({name: 'ECDSA', namedCurve: 'P-256'}, true, ['sign', 'verify'])\n        .then(async (keys) => {\n          // privateKey scope doesn't leak out from here!\n          //const { d: priv } = await shim.subtle.exportKey('jwk', keys.privateKey)\n          var key: any = {};\n          key.priv = (await ecdhSubtle.exportKey('jwk', keys.privateKey)).d;\n          var pub = await ecdhSubtle.exportKey('jwk', keys.publicKey);\n          //const pub = Buff.from([ x, y ].join(':')).toString('base64') // old\n          key.pub = pub.x + '.' + pub.y; // new\n          // x and y are already base64\n          // pub is UTF8 but filename/URL safe (https://www.ietf.org/rfc/rfc3986.txt)\n          // but split on a non-base64 letter.\n          return key;\n        })\n\n      // To include PGPv4 kind of keyId:\n      // const pubId = await SEA.keyid(keys.pub)\n      // Next: ECDH keys for encryption/decryption...\n\n      try {\n        var dh = await ecdhSubtle.generateKey({name: 'ECDH', namedCurve: 'P-256'}, true, ['deriveKey'])\n          .then(async (keys) => {\n            // privateKey scope doesn't leak out from here!\n            var key: any = {};\n            key.epriv = (await ecdhSubtle.exportKey('jwk', keys.privateKey)).d;\n            var pub = await ecdhSubtle.exportKey('jwk', keys.publicKey);\n            //const epub = Buff.from([ ex, ey ].join(':')).toString('base64') // old\n            key.epub = pub.x + '.' + pub.y; // new\n            // ex and ey are already base64\n            // epub is UTF8 but filename/URL safe (https://www.ietf.org/rfc/rfc3986.txt)\n            // but split on a non-base64 letter.\n            return key;\n          })\n      } catch (e) {\n        if (e == 'Error: ECDH is not a supported algorithm') {\n          console.log('Ignoring ECDH...')\n        } else {\n          throw e\n        }\n      }\n      dh = dh || {};\n\n      var r = {pub: sa.pub, priv: sa.priv, /* pubId, */ epub: dh.epub, epriv: dh.epriv}\n      return r;\n    } catch (e) {\n      console.log(e);\n      throw e;\n      return;\n    }\n  }\n\n  static async sign(_data: any, _pair: any, _cb?: Function, _opt = {}) {\n  /*\n    try {\n      if(undefined === data){ throw '`undefined` not allowed.' }\n      var json = await JSON.parse(data);\n      var pub = pair.pub;\n      var priv = pair.priv;\n      var jwk = S.jwk(pub, priv);\n      var hash = await sha(json);\n      var sig = await window.crypto.subtle.importKey('jwk', jwk, {name: 'ECDSA', namedCurve: 'P-256'}, false, ['sign'])\n      .then((key) => window.crypto.subtle.sign({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, new Uint8Array(hash))) // privateKey scope doesn't leak out from here!\n      var r = {m: json, s: shim.Buffer.from(sig, 'binary').toString(opt.encode || 'base64')}\n      if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\n\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) {\n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }     */\n    return '';\n  }\n\n  static async secret(pub: any, pair: any) {\n    // ecdh secret\n\n    pub = pub.split('.');\n    const x = pub[0], y = pub[1];\n    const jwk: any = {kty: \"EC\", crv: \"P-256\", x: x, y: y, ext: true};\n    jwk.key_ops = pair.epriv ? ['sign'] : ['verify'];\n    if(pair.epriv){ jwk.d = pair.epriv; }\n\n    try {\n      var secret = await window.crypto.subtle.importKey('jwk', jwk, {name: 'ECDH', namedCurve: 'P-256'}, false, ['deriveKey'])\n        .then((key) => window.crypto.subtle.deriveKey({name: 'ECDH', public: key}, pair.priv, {name: 'AES-GCM', length: 256}, false, ['encrypt', 'decrypt']))\n      var r = await window.crypto.subtle.exportKey('raw', secret);\n      return r;\n    } catch(e) {\n      throw(e);\n    }\n  }\n\n  static async encrypt(_data: any, _pair: any, _cb?: Function, _opt = {}) {\n    /*\n    try {\n      opt = opt || {};\n      var key = (pair||opt).epriv || pair;\n      if(u === data){ throw '`undefined` not allowed.' }\n      if(!key){\n        if(!SEA.I){ throw 'No encryption key.' }\n        pair = await SEA.I(null, {what: data, how: 'encrypt', why: opt.why});\n        key = pair.epriv || pair;\n      }\n      var msg = (typeof data == 'string')? data : await shim.stringify(data);\n      var rand = {s: shim.random(9), iv: shim.random(15)}; // consider making this 9 and 15 or 18 or 12 to reduce == padding.\n      var ct = await aeskey(key, rand.s, opt).then((aes) => (shim.subtle).encrypt({ // Keeping the AES key scope as private as possible...\n        name: opt.name || 'AES-GCM', iv: new Uint8Array(rand.iv)\n      }, aes, new shim.TextEncoder().encode(msg)));\n      var r = {\n        ct: shim.Buffer.from(ct, 'binary').toString(opt.encode || 'base64'),\n        iv: rand.iv.toString(opt.encode || 'base64'),\n        s: rand.s.toString(opt.encode || 'base64')\n      }\n      if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\n\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) {\n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }\n    */\n    return '';\n  }\n\n  static verify(_msg: any, _pubKey: any) {\n    //return Gun.SEA.verify(msg.slice(1), pubKey);\n    return true;\n  }\n}\n\nexport default Key;\n","import session from './session';\nimport _ from './lodash';\nimport util from './util';\nimport publicState from './global';\nimport Key from './Key';\n\nconst ELECTRON_GUN_URL = 'http://localhost:8767/gun';\nlet maxConnectedPeers = 1;\n\ntype Peer = {\n  url?: string;\n  enabled?: boolean;\n  from?: string;\n  visibility?: string;\n}\n\ntype Peers = {\n  [key: string]: Peer\n}\n\nconst DEFAULT_PEERS: Peers = {\n  'wss://gun-rs.iris.to/gun': {},\n//  'wss://gun-us.herokuapp.com/gun': {},\n};\n\nconst loc = window.location;\nconst host = loc.host;\nconst is_localhost_but_not_dev = host.startsWith('localhost') && host !== 'localhost:8080';\nif (loc.hostname.endsWith('herokuapp.com') || is_localhost_but_not_dev) {\n  Object.keys(DEFAULT_PEERS).forEach(url => DEFAULT_PEERS[url].enabled = false);\n  DEFAULT_PEERS[`${loc.origin}/gun`] = {enabled: true};\n}\n\n/**\n * Networking and peer management utilities\n */\nexport default {\n  known: {} as Peers,\n\n  /** */\n  async add(peer: Peer) {\n    if (peer.from) {\n      Object.keys(this.known).forEach(k => {\n        if (this.known[k].from === peer.from) { // remove previous peer url from the same user\n          delete this.known[k];\n        }\n      });\n    }\n    const url = peer.url || '';\n    this.known[url] = this.known[url] || _.omit(peer, ['url']);\n    if (peer.visibility === 'public') {\n      // rolling some crypto operations to obfuscate actual url in case we want to remove it\n      let secret = await Key.secret(session.getKey().epub, session.getKey()) || '';\n      let encryptedUrl = await Key.encrypt(peer.url, secret);\n      let encryptedUrlHash = await util.getHash(encryptedUrl);\n      publicState().user().get('peers').get(encryptedUrlHash).put({url: peer.url, lastSeen: new Date().toISOString()});\n    }\n    if (peer.enabled !== false) {\n      peer.url && this.connect(peer.url); // this calls savePeers()\n    } else {\n      this.save();\n    }\n  },\n\n  /** */\n  remove(url: string) {\n    delete this.known[url];\n    this.save();\n  },\n\n  /** */\n  disconnect(peerFromGun: any) {\n    publicState().on('bye', peerFromGun);\n    peerFromGun.url = '';\n  },\n\n  save() {\n    localStorage.setItem('gunPeers', JSON.stringify(this.known));\n  },\n\n  getSaved() {\n    let p: any = localStorage.getItem('gunPeers');\n    if (p && p !== 'undefined') {\n      p = JSON.parse(p);\n    } else {\n      p = DEFAULT_PEERS;\n    }\n    if (util.isElectron) {\n      p[ELECTRON_GUN_URL] = {};\n    }\n    Object.keys(p).forEach(k => _.defaults(p[k], {enabled: true}));\n    return p;\n  },\n\n  /** */\n  reset() {\n    localStorage.setItem('gunPeers', '');\n    this.known = this.getSaved();\n  },\n\n  /** */\n  connect(url: string) {\n    if (this.isMixedContent(url)) { return; }\n    if (this.known[url]) {\n      this.known[url].enabled = true;\n      publicState().opt({peers: [url]});\n      this.save();\n    } else {\n      this.add({url});\n    }\n  },\n\n  /** */\n  disable(url: string, peerFromGun: any) {\n    this.known[url].enabled = false;\n    if (peerFromGun) {\n      this.disconnect(peerFromGun);\n    }\n    this.save();\n  },\n\n  isMixedContent(url: string) {\n    return window.location.protocol === 'https:' && (url.indexOf('http:') === 0);\n  },\n\n  random() {\n    const connectToLocalElectron = util.isElectron && this.known[ELECTRON_GUN_URL] && this.known[ELECTRON_GUN_URL].enabled !== false;\n    const sampleSize = connectToLocalElectron ? Math.max(maxConnectedPeers - 1, 1) : maxConnectedPeers;\n    const sample = _.sampleSize(\n      Object.keys(\n        _.pickBy(this.known, (peer: any, url: string) => {\n          return !this.isMixedContent(url) && peer.enabled && !(util.isElectron && url === ELECTRON_GUN_URL);\n        })\n      ), sampleSize\n    );\n    console.log('random sample', sample, 'from', this.known);\n    if (sample && connectToLocalElectron) {\n      sample.push(ELECTRON_GUN_URL);\n    }\n    return sample;\n  },\n\n  checkGunPeerCount() {\n    return;\n    let peersFromGun = publicState().back('opt.peers');\n    let connectedPeers = Object.values(peersFromGun).filter((peer: any) => {\n      if (peer && peer.wire && peer.wire.constructor.name !== 'WebSocket') {\n        console.log('WebRTC peer', peer);\n      }\n      return peer && peer.wire && peer.wire.readyState === 1  && peer.wire.bufferedAmount === 0 && peer.wire.constructor.name === 'WebSocket';\n    });\n    if (connectedPeers.length < maxConnectedPeers) {\n      let unconnectedPeers = Object.keys(this.known).filter(url => {\n        let addedToGun = Object.values(peersFromGun).map((peer:any) => peer.url).indexOf(url) > -1;\n        let enabled = this.known[url].enabled;\n        const mixedContent = (window.location.protocol === 'https:' && (url.indexOf('http:') === 0));\n        return !mixedContent && enabled && !addedToGun;\n      });\n      if (unconnectedPeers.length) {\n        const sample = String(_.sample(unconnectedPeers));\n        this.connect(sample);\n      }\n    }\n    if (connectedPeers.length > maxConnectedPeers) {\n      this.disconnect(_.sample(connectedPeers));\n    }\n  },\n\n  init() {\n    this.known = this.getSaved();\n    /* use the default value of 1 for now because of memory issue\n    local().get('settings').get('maxConnectedPeers').on(n => {\n      if (n !== undefined) maxConnectedPeers = n;\n    });\n     */\n    setInterval(() => this.checkGunPeerCount(), 1000);\n  }\n};\n","import {Message} from './Message';\n\nexport function generateUuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        const r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n        return v.toString(16);\n    });\n}\n\nexport class Actor {\n    id: string;\n\n    handle(_message: Message) {\n        throw new Error('not implemented');\n    }\n\n    // so we can support a similar api as Channels\n    postMessage(message: Message) {\n        this.handle(message);\n    }\n\n    constructor(id = generateUuid()) {\n        this.id = id;\n    }\n}","import {Actor} from './Actor';\nimport {Children} from \"./Node\";\n\nexport class Message {\n    // When Messages are sent over BroadcastChannel, class name is lost.\n    static fromObject(obj: any): Message {\n        if (obj.type === 'get') {\n            return Get.fromObject(obj);\n        } else if (obj.type === 'put') {\n            return Put.fromObject(obj);\n        } else {\n            throw new Error('not implemented');\n        }\n    }\n\n    static deserialize(str: string, from: Actor): Message {\n        const obj = JSON.parse(str);\n        if (obj.get) {\n            return Get.deserialize(obj, str, from);\n        } else if (obj.put) {\n            return Put.deserialize(obj, str, from);\n        } else if (obj.dam && obj.dam === \"hi\") {\n            return Hi.deserialize(obj);\n        } else {\n            throw new Error('unknown message type');\n        }\n    }\n\n    serialize(): string {\n        throw new Error('not implemented');\n    }\n}\n\nfunction generateMsgId(): string {\n    return Math.random().toString(36).slice(2, 10);\n}\n\nexport class Get implements Message {\n    type: string = 'get';\n    id: string;\n    nodeId: string;\n    from: Actor;\n    recipients?: string[];\n    childKey?: string;\n    jsonStr?: string;\n    checksum?: string;\n\n    serialize(): string {\n        if (this.jsonStr) {\n            return this.jsonStr;\n        }\n\n        // TODO remove \"global/\", replace /^user\\// with ~\n        let nodeId = this.nodeId.replace(/^global\\//, '').replace(/^user\\//, '~');\n        const obj: any = {\n            \"#\": this.id,\n            get: {\n                \"#\": nodeId,\n                \".\": this.childKey\n            },\n        };\n\n        if (this.childKey) {\n            obj.get['.'] = this.childKey;\n        }\n        this.jsonStr = JSON.stringify(obj);\n        return this.jsonStr;\n    }\n\n    static deserialize(obj: any, jsonStr: string, from: Actor): Get {\n        const id = obj['#'];\n        let nodeId = obj.get['#']; // TODO add \"global/\" prefix, replace /^~/ with \"user/\"\n        if (nodeId.startsWith('~')) {\n            nodeId = 'user/' + nodeId.slice(1);\n        }\n        nodeId = 'global/' + nodeId;\n        const childKey = obj.get['.'];\n        return new Get(id, nodeId, from, undefined, childKey, jsonStr);\n    }\n\n    static fromObject(obj: any): Get {\n        return new Get(obj.id, obj.nodeId, obj.from, obj.recipients, obj.childKey, obj.jsonStr, obj.checksum);\n    }\n\n    static new(nodeId: string, from: Actor, recipients?: string[], childKey?: string, jsonStr?: string, checksum?: string): Get {\n        const id = generateMsgId();\n        return new Get(id, nodeId, from, recipients, childKey, jsonStr, checksum);\n    }\n\n    constructor(id: string, nodeId: string, from: Actor, recipients?: string[], childKey?: string, jsonStr?: string, checksum?: string) {\n        this.id = id;\n        this.from = from;\n        this.nodeId = nodeId;\n        this.recipients = recipients;\n        this.childKey = childKey;\n        this.jsonStr = jsonStr;\n        this.checksum = checksum;\n    }\n}\n\nexport type UpdatedNodes = {\n    [key: string]: Children;\n};\n\nexport class Put implements Message {\n    type: string = 'put';\n    id: string;\n    from: Actor;\n    updatedNodes: UpdatedNodes;\n    inResponseTo?: string;\n    recipients?: string[];\n    jsonStr?: string;\n    checksum?: string;\n\n    serialize(): string {\n        const obj = {\n            \"#\" : this.id,\n            \"put\": {} as any\n        };\n\n        // iterate over this.updatedNodes\n        for (const [nodeId, children] of Object.entries(this.updatedNodes)) {\n            let myNodeId = nodeId.replace(/^global\\//, '').replace(/^user\\//, '~');\n            const node: any = obj.put[myNodeId] = {};\n            for (const [childKey, childValue] of Object.entries(children)) {\n                if (!childValue) {\n                    continue;\n                }\n                const data = childValue;\n                node[childKey] = data.value;\n                node[\"_\"] = node[\"_\"] || {};\n                node[\"_\"][\">\"] = node[\"_\"][\">\"] || {};\n                node[\"_\"][\">\"][childKey] = data.updatedAt;\n            }\n        }\n        return JSON.stringify(obj);\n    }\n\n    static deserialize(obj: any, jsonStr: string, from: Actor): Put {\n        const id = obj['#'];\n        const updatedNodes: UpdatedNodes = {};\n        type SerializedChildren = {\n            [key: string]: any;\n        }\n        for (const [nodeId, c] of Object.entries(obj.put)) {\n            const children = c as SerializedChildren;\n            const node: any = {};\n            for (const [childKey, childValue] of Object.entries(children)) {\n                if (childKey === '_') {\n                    continue;\n                }\n                const updatedAt = children['_']['>'][childKey];\n                node[childKey] = {\n                    value: childValue,\n                    updatedAt,\n                };\n            }\n            const myNodeId = 'global/' + nodeId.replace(/^~/, 'user/');\n            updatedNodes[myNodeId] = node;\n        }\n        return new Put(id, updatedNodes, from, undefined, undefined, jsonStr);\n    }\n\n    static fromObject(obj: any): Put {\n        return new Put(obj.id, obj.updatedNodes, obj.from, obj.inResponseTo, obj.recipients, obj.jsonStr, obj.checksum);\n    }\n\n    static new(updatedNodes: UpdatedNodes, from: Actor, inResponseTo?: string, recipients?: string[], jsonStr?: string, checksum?: string): Put {\n        const id = generateMsgId();\n        return new Put(id, updatedNodes, from, inResponseTo, recipients, jsonStr, checksum);\n    }\n\n    static newFromKv(key: string, children: Children, from:Actor) {\n        const updatedNodes: UpdatedNodes = {};\n        updatedNodes[key] = children;\n        return Put.new(updatedNodes, from);\n    }\n\n    constructor(id: string, updatedNodes: UpdatedNodes, from: Actor, inResponseTo?: string, recipients?: string[], jsonStr?: string, checksum?: string) {\n        this.id = id;\n        this.from = from;\n        this.updatedNodes = updatedNodes;\n        this.inResponseTo = inResponseTo;\n        this.recipients = recipients;\n        this.jsonStr = jsonStr;\n        this.checksum = checksum;\n    }\n}\n\nexport class Hi implements Message {\n    type: string = 'hi';\n    peerId: string;\n    jsonStr?: string;\n\n    //{\"#\":\"aHHO9Srurq9nh6Q9\",\"dam\":\"hi\"}\n\n\n    serialize(): string {\n        if (this.jsonStr) {\n            return this.jsonStr;\n        }\n\n        const obj: any = {\n            dam: \"hi\",\n            \"#\": this.peerId,\n        };\n\n        this.jsonStr = JSON.stringify(obj);\n        return this.jsonStr;\n    }\n\n    static deserialize(obj: any): Hi {\n        const peerId = obj['#'];\n        return new Hi(peerId);\n    }\n\n    constructor(peerId: string, jsonStr?: string) {\n        this.peerId = peerId;\n        this.jsonStr = jsonStr;\n    }\n}\n\nconst parseGet = (get: any, from: Actor): Get => {\n    return new Get(get.id, get.nodeId, from, get.recipients, get.childKey, get.jsonStr, get.checksum);\n}\n\nconst parsePut = (put: any, from: Actor): Put => {\n    return new Put(put.id, put.updatedNodes, from, put.inResponseTo, put.recipients, put.jsonStr, put.checksum);\n}\n\nexport function messageFromJsonString(jsonStr: string, from: Actor): Message {\n    const obj = JSON.parse(jsonStr);\n    if (obj.get) {\n        return parseGet(obj.get, from);\n    } else if (obj.put) {\n        return parsePut(obj.put, from);\n    } else {\n        throw new Error('Unknown message type');\n    }\n}","import {Put, Get, Message} from '../Message'\nimport { Actor } from '../Actor';\nimport QuickLRU from 'quick-lru';\nimport {Children} from \"../Node\";\n//import {NodeData} from \"../Node\";\n// import * as Comlink from \"comlink\";\n\nexport default class Memory extends Actor {\n    config = {};\n    store: QuickLRU<string, Children> = new QuickLRU({ maxSize: 10000 });\n\n    constructor(config: any = {}) {\n        super();\n        this.config = config;\n    }\n\n    handle(message: Message) {\n        if (message instanceof Put) {\n            console.log('Memory handle Put', message);\n            this.handlePut(message);\n        } else if (message instanceof Get) {\n            console.log('Memory handle Get', message);\n            this.handleGet(message);\n        } else {\n            console.log('Memory got unknown message', message);\n        }\n    }\n\n    handleGet(message: Get) {\n        if (!message.from) {\n            console.log('no from in get message');\n            return;\n        }\n        let children = this.store.get(message.nodeId);\n        if (children) {\n            console.log('have', message.nodeId, children);\n            if (message.childKey) {\n                if (children[message.childKey]) {\n                    const o: Children = {};\n                    o[message.childKey] = children[message.childKey];\n                    children = o;\n                }\n            }\n            const putMessage = Put.newFromKv(message.nodeId, children, this);\n            putMessage.inResponseTo = message.id;\n            console.log('memory sending', putMessage);\n            message.from && message.from.postMessage(putMessage);\n        } else {\n            console.log('dont have', message.nodeId);\n        }\n    }\n\n    mergeAndSave(nodeName: string, children: Children) {\n        const existing = this.store.get(nodeName);\n\n        // TODO check updatedAt timestamp\n        if (existing === undefined) {\n            this.store.set(nodeName, children);\n        } else {\n            for (const [key, value] of Object.entries(children)) {\n                console.log('merging', key, value);\n                if (existing[key] && existing[key].updatedAt >= value.updatedAt) {\n                    continue;\n                }\n                existing[key] = value;\n            }\n            console.log('merging', nodeName, existing, children);\n            this.store.set(nodeName, existing);\n        }\n    }\n\n    async handlePut(put: Put) {\n        for (const [nodeName, children] of Object.entries(put.updatedNodes)) {\n            if (!children) {\n                console.log('deleting', nodeName);\n                this.store.delete(nodeName);\n                continue;\n            }\n            this.mergeAndSave(nodeName, children);\n        }\n    }\n}\n\n/*\nlet actor;\nglobal.onconnect = () => {\n    if (actor) {\n        console.log ('worker already exists');\n    } else {\n        console.log('starting worker');\n        actor = actor || new IndexedDB();\n    }\n}\n */\n\n// self.onconnect = (e) => Comlink.expose(actor, e.ports[0]);","import {Put, Get, Message} from '../Message'\nimport { Actor } from '../Actor';\nimport _ from \"../../lodash\";\nimport Dexie from 'dexie';\nimport {Children, NodeData} from \"../Node\";\n// import * as Comlink from \"comlink\";\n\nclass MyDexie extends Dexie {\n    nodes: Dexie.Table<NodeData, string>;\n    constructor(dbName: string) {\n        super(dbName);\n        this.version(1).stores({\n            nodes: \", value, updatedAt\"\n        });\n        this.nodes = this.table(\"nodes\");\n    }\n}\n\nexport default class IndexedDB extends Actor {\n    config = {};\n    notStored = new Set();\n    putQueue: any = {};\n    getQueue: any = {};\n    i = 0;\n    queue = 0;\n    db: MyDexie;\n\n    constructor(config: any = {}) {\n        super();\n        this.config = config;\n        const dbName = (config.dbName || 'iris');\n        this.db = new MyDexie(dbName);\n        this.db.open().catch((err) => {\n            console.error(err.stack || err);\n        });\n    }\n\n    put(nodeId: string, value: any) {\n        // add puts to a queue and dexie bulk write them once per 500ms\n        this.putQueue[nodeId] = value;\n        this.throttledPut();\n    }\n\n    throttledPut = _.throttle(() => {\n        const keys = Object.keys(this.putQueue);\n        const values = keys.map(key => {\n            this.notStored.delete(key);\n            return this.putQueue[key];\n        });\n        this.db.nodes.bulkPut(values, keys);\n        this.putQueue = {};\n    }, 500);\n\n    get(path: string, callback: Function) {\n        this.getQueue[path] = this.getQueue[path] || [];\n        this.getQueue[path].push(callback);\n        this.throttledGet();\n    }\n\n    throttledGet = _.throttle(() => {\n        // clone this.getQueue and clear it\n        const queue = this.getQueue;\n        const keys = Object.keys(queue);\n        this.db.nodes.bulkGet(keys).then((values: (any | undefined)[]) => {\n            for (let i = 0; i < keys.length; i++) {\n                const key = keys[i];\n                const value = values[i];\n                const callbacks = queue[key];\n                // console.log('have', key, value);\n                for (const callback of callbacks) {\n                    callback(value);\n                }\n            }\n        });\n        this.getQueue = {};\n    }, 100);\n\n    handle(message: Message) {\n        if (message instanceof Put) {\n            console.log('indexeddb handle Put', message);\n            this.handlePut(message);\n        } else if (message instanceof Get) {\n            console.log('indexeddb handle Get', message);\n            this.handleGet(message);\n        } else {\n            console.log('worker got unknown message', message);\n        }\n    }\n\n    handleGet(message: Get) {\n        console.log('indexeddb handleGet', message);\n        if (this.notStored.has(message.nodeId)) {\n            // TODO message implying that the key is not stored\n            return;\n        }\n        this.get(message.nodeId, (children: any) => {\n            // TODO: this takes a long time to return\n            if (children === undefined) {\n                this.notStored.add(message.nodeId);\n                // TODO message implying that the key is not stored\n            } else {\n                const putMessage = Put.newFromKv(message.nodeId, children, this);\n                putMessage.inResponseTo = message.id;\n                console.log('indexeddb sending', putMessage);\n                message.from && message.from.postMessage(putMessage);\n            }\n        });\n    }\n\n    mergeAndSave(path: string, children: Children) {\n        this.get(path, (existing: any) => {\n            // TODO check updatedAt timestamp\n            if (existing === undefined) {\n                this.put(path, children);\n            } else {\n                for (const [key, value] of Object.entries(children)) {\n                    console.log('merging', key, value);\n                    if (existing[key] && existing[key].updatedAt >= value.updatedAt) {\n                        continue;\n                    }\n                    existing[key] = value;\n                }\n                this.put(path, existing);\n            }\n        });\n    }\n\n    savePath(path: string, value: any) {\n        if (value === undefined) {\n            this.db.nodes.delete(path);\n            this.notStored.add(path);\n        } else {\n            this.notStored.delete(path);\n            this.mergeAndSave(path, value);\n        }\n    }\n\n    async handlePut(put: Put) {\n        for (const [nodeName, children] of Object.entries(put.updatedNodes)) {\n            if (!children) {\n                console.log('deleting', nodeName);\n                continue;\n            }\n            this.mergeAndSave(nodeName, children);\n        }\n    }\n}\n\n/*\nlet actor;\nglobal.onconnect = () => {\n    if (actor) {\n        console.log ('worker already exists');\n    } else {\n        console.log('starting worker');\n        actor = actor || new IndexedDB();\n    }\n}\n */\n\n// self.onconnect = (e) => Comlink.expose(actor, e.ports[0]);","import {Get, Message, Put} from \"../Message\";\nimport {Actor} from \"../Actor\";\n//@ts-ignore\n\nexport default class Websocket extends Actor {\n    ws: WebSocket;\n    router: Actor;\n    sendQueue: string[] = [];\n\n    constructor(url: string, router: Actor) {\n        super('websocket:' + url);\n        console.log('Websocket', url);\n        this.router = router;\n        this.ws = new WebSocket(url.replace('http', 'ws'));\n        this.ws.onopen = () => {\n            //this.ws.send(new Hi(this.router.peerId).serialize());\n            console.log(`Connected to ${url}`);\n            this.sendQueue.forEach((message) => this.ws.send(message));\n            this.sendQueue = [];\n        }\n        this.ws.onmessage = (event) => {\n            try {\n                const message = Message.deserialize(event.data, this);\n                this.router.postMessage(message);\n            } catch (e) {\n                console.log('Failed to deserialize message', event.data, e);\n            }\n        }\n        this.ws.onclose = () => {\n            console.log(`Disconnected from ${url}`);\n        }\n        this.ws.onerror = () => {\n            console.log(`Error on ${url}`);\n        }\n    }\n\n    handle(message: Message): void {\n        if (message instanceof Get || message instanceof Put) {\n            if (message.from === this) {\n                return;\n            }\n            if (this.ws.readyState === WebSocket.OPEN) {\n                this.ws.send(message.serialize());\n            } else if (this.ws.readyState === WebSocket.CONNECTING) {\n                this.sendQueue.push(message.serialize());\n            }\n        }\n    }\n}\n\n\n","import {Actor} from \"./Actor\";\nimport Memory from \"./adapters/Memory\";\nimport IndexedDB from \"./adapters/IndexedDB\";\nimport Websocket from \"./adapters/Websocket\";\nimport {Put, Get, Message} from \"./Message\";\n// import * as Comlink from \"comlink\";\n\n/*\nclass SeenGetMessage {\n    constructor(id, from, lastReplyChecksum) {\n        this.id = id;\n        this.from = from;\n        this.lastReplyChecksum = lastReplyChecksum;\n    }\n}\n*/\n\nexport default class Router extends Actor {\n    storageAdapters: Set<Actor> = new Set();\n    networkAdapters: Set<Actor> = new Set();\n    serverPeers: Set<Actor> = new Set();\n    seenMessages: Set<string> = new Set();\n    seenGetMessages: Map<string, Message> = new Map();\n    subscribersByTopic: Map<string, Set<Actor>> = new Map();\n    msgCounter = 0;\n    peerId: string;\n\n    constructor(config: any = {}) {\n        super('router');\n        // default random id\n        this.peerId = config.peerId || Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n        this.storageAdapters.add(new Memory(config));\n        this.storageAdapters.add(new IndexedDB(config));\n        console.log('config', config);\n        if (config.peers) {\n            for (const peer of config.peers) {\n                if (peer) {\n                    this.serverPeers.add(new Websocket(peer, this));\n                }\n            }\n        }\n    }\n\n    handle(message: Message) {\n        //console.log('router received', message);\n        if (message instanceof Put || message instanceof Get) {\n            if (this.seenMessages.has(message.id)) {\n                return;\n            }\n            this.seenMessages.add(message.id);\n            if (message instanceof Put) {\n                this.handlePut(message);\n            } else if (message instanceof Get) {\n                this.handleGet(message);\n            }\n        }\n    }\n\n    handlePut(put: Put) {\n        console.log('router handlePut', put);\n        const sendTo: Set<Actor> = new Set();\n        Object.keys(put.updatedNodes).forEach(path => {\n            // topic is first 3 nodes of path\n            const topic = path.split('/').slice(0, 3).join('/');\n            const subscribers = this.subscribersByTopic.get(topic);\n            // send to storage adapters\n            //console.log('put subscribers', subscribers);\n            for (const storageAdapter of this.storageAdapters) {\n                if (put.from !== storageAdapter) {\n                    sendTo.add(storageAdapter);\n                }\n            }\n\n            for (const peer of this.serverPeers) {\n                if (put.from !== peer) {\n                    sendTo.add(peer);\n                }\n            }\n\n            if (subscribers) {\n                for (const subscriber of subscribers) {\n                    if (subscriber !== put.from) {\n                        sendTo.add(subscriber);\n                    }\n                }\n            }\n        });\n        for (const actor of sendTo) {\n            actor.postMessage(put);\n        }\n    }\n\n    opt(opts: any) {\n        if (opts.peers) {\n            for (const peer of opts.peers) {\n                if (peer) {\n                    this.serverPeers.add(new Websocket(peer, this));\n                }\n            }\n        }\n    }\n\n    handleGet(get: Get) {\n        const topic = get.nodeId.split('/')[1];\n        const sendTo: Set<Actor> = new Set();\n        for (const storageAdapter of this.storageAdapters) {\n            if (get.from !== storageAdapter) {\n                sendTo.add(storageAdapter);\n            }\n        }\n        for (const peer of this.serverPeers) {\n            if (get.from !== peer) {\n                sendTo.add(peer);\n            }\n        }\n        if (!this.subscribersByTopic.has(topic)) {\n            this.subscribersByTopic.set(topic, new Set());\n        }\n        const subscribers = this.subscribersByTopic.get(topic);\n        if (subscribers) {\n            if (!subscribers.has(get.from)) {\n                subscribers.add(get.from);\n            }\n        }\n        for (const actor of sendTo) {\n            actor.postMessage(get);\n        }\n    }\n}\n\n/*\nlet actor: Actor;\nself.onconnect = () => {\n    console.log('router shared worker connected');\n    actor = actor || new Router();\n}\n*/\n\n// self.onconnect = (e) => Comlink.expose(actor, e.ports[0]);","import _ from '../lodash';\nimport {Actor}  from './Actor';\nimport {Message, Put, Get, UpdatedNodes} from './Message';\n\n// @ts-ignore\nimport Router from './Router';\n//import * as Comlink from \"comlink\";\n\nexport type NodeData = {\n    value: any;\n    updatedAt: number;\n};\n\nexport type Children = {\n    [key: string]: NodeData;\n}\n\nexport type Config = {\n    peerId?: string;\n    allowPublicSpace: boolean;\n    myPublicKey?: string;\n    enableStats: boolean;\n    webSocketPeers?: string[];\n    localOnly: boolean;\n}\n\nexport const DEFAULT_CONFIG: Config = {\n    allowPublicSpace: false,\n    enableStats: true,\n    localOnly: true\n}\n\n// TODO move memory storage to its own adapter? it would make things simpler here\nexport default class Node extends Actor {\n    root: Node;\n    parent?: Node;\n    children = new Map<string, Node>();\n    once_subscriptions = new Map<number, Function>();\n    on_subscriptions = new Map<number, Function>();\n    map_subscriptions = new Map<number, Function>();\n    counter = 0;\n    config: Config;\n    currentUser: any;\n    router: Router;\n\n    constructor(id = '', config?: Config, parent?: Node) {\n        super(id);\n        this.parent = parent;\n        this.config = config || (parent && parent.config) || DEFAULT_CONFIG;\n        if (parent) {\n            this.root = parent.root;\n            this.router = parent.router;\n        } else {\n            this.root = this;\n            //@ts-ignore\n            this.router = new Router({dbName: this.id + '-idb', peers: this.config.webSocketPeers});\n            //console.log('idbWorker', idbWorker);\n            //const router = Comlink.wrap(routerWorker);\n        }\n    }\n\n    getCurrentUser(): any {\n        return this.parent ? this.parent.getCurrentUser() : this.currentUser;\n    }\n\n    setCurrentUser(key: any) {\n        if (this.parent) {\n            this.parent.setCurrentUser(key);\n        } else {\n            this.currentUser = key;\n        }\n    }\n\n    handle(message: Message): void {\n        if (message instanceof Put) {\n            for (const [key, children] of Object.entries(message.updatedNodes)) {\n                if (!children || typeof children !== 'object') {\n                    continue;\n                }\n                if (key === this.id) {\n                    for (const [childKey, childData] of Object.entries(children)) {\n                        console.log('put', childKey, childData);\n                        this.get(childKey).doCallbacks(childData, childKey); // TODO children should have proper NodeData\n                    }\n                }\n            }\n            this.parent && this.parent.handle(message);\n        }\n    };\n\n    get(key: string): Node {\n        const existing = this.children.get(key);\n        if (existing) {\n            return existing;\n        }\n        const newNode = new Node(`${this.id}/${key}`, this.config, this);\n        this.children.set(key, newNode);\n        return newNode;\n    }\n\n    user(pub: string | undefined): Node {\n        pub = pub || (this.root.currentUser && this.root.currentUser.pub);\n        if (!pub) {\n            throw new Error(\"no public key!\");\n        }\n        return this.get('user').get(pub as string);\n    }\n\n    auth(key: any) {\n        // TODO get public key from key\n        this.root.setCurrentUser(key);\n        return;\n    }\n\n    doCallbacks = (data: NodeData, key: string) => {\n        if (typeof data.value === 'string' && data.value.startsWith('{\":\":\"')) {\n            data.value = JSON.parse(data.value)[':'];\n        }\n        console.log('doCallbacks', this.id, key, data);\n        for (const [id, callback] of this.on_subscriptions) {\n            const event = { off: () => this.on_subscriptions.delete(id) };\n            callback(data.value, key, null, event);\n        }\n        for (const [id, callback] of this.once_subscriptions) {\n            callback(data.value, key, null, {});\n            this.once_subscriptions.delete(id);\n        }\n        if (this.parent) {\n            const parent = this.parent;\n            for (const [id, callback] of parent.map_subscriptions) {\n                console.log('map_subscriptions', parent.id, id, key, data);\n                const event = { off: () => parent.map_subscriptions.delete(id) };\n                callback(data.value, key, null, event);\n            }\n        }\n    };\n\n    put(value: any): void {\n        const updatedAt = Date.now();\n        if (Array.isArray(value)) {\n            throw new Error('put() does not support arrays');\n        }\n        if (typeof value === 'function') {\n            throw new Error('put() does not support functions');\n        }\n        if (typeof value === 'object' && value !== null) {\n            // TODO: update the whole path of parent nodes\n            for (const key in value) {\n                this.get(key).put(value[key]);\n            }\n            return;\n        }\n        this.children = new Map();\n        const updatedNodes: UpdatedNodes = {};\n        this.addParentNodes(updatedNodes, value, updatedAt);\n        const put = Put.new(updatedNodes, this);\n        this.handle(put);\n        console.log('put', put);\n        this.router.postMessage(put);\n    }\n\n    private addParentNodes(updatedNodes: UpdatedNodes, value: any, updatedAt: number) {\n        if (this.parent) {\n            const childName = this.id.split('/').pop() as string;\n            const parentId = this.parent.id;\n            updatedNodes[parentId] = updatedNodes[parentId] || {};\n            updatedNodes[parentId][childName] = {value, updatedAt};\n            this.parent.addParentNodes(updatedNodes, {'#': this.parent.id }, updatedAt);\n        }\n    }\n\n    private request() {\n        if (this.parent) { // TODO router should decide whether to re-request from peers\n            const childKey = this.id.split('/').pop();\n            this.router.postMessage(Get.new(this.parent.id, this, undefined, childKey));\n        }\n    }\n\n    async once(callback?: Function | null): Promise<any> {\n        const id = this.counter++;\n        callback && this.once_subscriptions.set(id, callback);\n        this.request();\n    }\n\n    on(callback: Function): void {\n        const id = this.counter++;\n        this.on_subscriptions.set(id, callback);\n        //const event = { off: () => this.on_subscriptions.delete(id) };\n        this.request();\n    }\n\n    map(callback: Function): void {\n        const id = this.counter++;\n        this.map_subscriptions.set(id, callback);\n        this.request();\n    }\n\n    opt(opts: any) {\n        this.router.opt(opts);\n    }\n}","import peers from \"./peers\";\nimport Node from \"./db/Node\";\n\nlet globalState: any;\n\nexport default function(opts: any = {}) {\n  if (!globalState) {\n    peers.init();\n    const webSocketPeers = (opts.peers || peers.random());\n    console.log('webSocketPeers', webSocketPeers);\n    const myOpts = Object.assign({ webSocketPeers, localStorage: false, retry:Infinity }, opts);\n    if (opts.peers) {\n      console.log('adding peers', opts.peers);\n      opts.peers.forEach((url: string) => peers.add({url}));\n    }\n    globalState = new Node('global', myOpts);\n  }\n  return globalState;\n}","// @ts-nocheck\n\n/*eslint no-useless-escape: \"off\", camelcase: \"off\" */\n\nconst UNIQUE_ID_VALIDATORS = {\n  email: /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i,\n  bitcoin: /^[13][a-km-zA-HJ-NP-Z0-9]{26,33}$/,\n  bitcoin_address: /^[13][a-km-zA-HJ-NP-Z0-9]{26,33}$/,\n  ip: /^(([1-9]?\\d|1\\d\\d|2[0-5][0-5]|2[0-4]\\d)\\.){3}([1-9]?\\d|1\\d\\d|2[0-5][0-5]|2[0-4]\\d)$/,\n  ipv6: /^(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}$/,\n  gpg_fingerprint: null,\n  gpg_keyid: null,\n  google_oauth2: null,\n  tel: /^\\d{7,}$/,\n  phone: /^\\d{7,}$/,\n  keyID: null,\n  url: /[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/gi,\n  account: /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i,\n  uuid: /[0-9a-f]{8}\\-[0-9a-f]{4}\\-[0-9a-f]{4}\\-[0-9a-f]{4}\\-[0-9a-f]{12}/\n};\n\n// TODO this class could perhaps be removed\n\nclass Attribute {\n  constructor(a, b) {\n    if (typeof a === `object`) {\n      if (typeof a.value !== `string`) { throw new Error(`param1.value must be a string, got ${typeof a.value}: ${JSON.stringify(a.value)}`); }\n      if (typeof a.type !== `string`) { throw new Error(`param1.type must be a string, got ${typeof a.type}: ${JSON.stringify(a.type)}`); }\n      b = a.value;\n      a = a.type;\n    }\n    if (typeof a !== `string`) { throw new Error(`First param must be a string, got ${typeof a}: ${JSON.stringify(a)}`); }\n    if (!a.length) { throw new Error(`First param string is empty`); }\n    if (b) {\n      if (typeof b !== `string`) { throw new Error(`Second parameter must be a string, got ${typeof b}: ${JSON.stringify(b)}`); }\n      if (!b.length) { throw new Error(`Second param string is empty`); }\n      this.type = a;\n      this.value = b;\n    } else {\n      this.value = a;\n      const t = Attribute.guessTypeOf(this.value);\n      if (t) {\n        this.type = t;\n      } else {\n        throw new Error(`Type of attribute was omitted and could not be guessed`);\n      }\n    }\n  }\n\n  static getUuid() {\n    const b = a => a ? (a ^ Math.random() * 16 >> a / 4).toString(16) : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n    return new Attribute(`uuid`, b());\n  }\n\n  static getUniqueIdValidators() {\n    return UNIQUE_ID_VALIDATORS;\n  }\n\n  static isUniqueType(type) {\n    return Object.keys(UNIQUE_ID_VALIDATORS).indexOf(type) > -1;\n  }\n\n  isUniqueType() {\n    return Attribute.isUniqueType(this.type);\n  }\n\n  static guessTypeOf(value) {\n    for (const key in UNIQUE_ID_VALIDATORS) {\n      if (value.match(UNIQUE_ID_VALIDATORS[key])) {\n        return key;\n      }\n    }\n  }\n\n  static equals(a, b) {\n    return a.equals(b);\n  }\n\n  equals(a) {\n    return a && this.type === a.type && this.value === a.value;\n  }\n\n  uri() {\n    return `${encodeURIComponent(this.value)}:${encodeURIComponent(this.type)}`;\n  }\n}\n\nexport default Attribute;\n","import globalState from './global';\nimport session from './session';\n\n/**\n * Get a public space where only the specified user (public key) can write. Others can read.\n * @param pub The public key string or keypair object of the user. Defaults to the current user from session.\n * @returns {Node} The user space.\n */\nexport default function(pub: any = session.getKey()) {\n  if (typeof pub === 'string') {\n    return globalState().user(pub);\n  } else if (typeof pub === 'object') {\n    const userSpace = globalState().user(pub.pub);\n    userSpace.auth(pub);\n    return userSpace;\n  }\n}\n","// @ts-nocheck\n\nimport util from './util';\nimport Attribute from './Attribute';\nimport session from './session';\nimport publicState from './global';\nimport userState from './public';\nimport Key from './Key';\n\n// TODO: extract Group channels into their own class\n\nconst DEFAULT_PERMISSIONS = {read: true, write: true, admin: false};\n\n/**\n* Private communication channel between two or more participants ([Gun](https://github.com/amark/gun) public keys). Can be used independently of other Iris stuff.\n*\n* Used as a core element of [iris-messenger](https://github.com/irislib/iris-messenger).\n*\n* You can use iris.private(pub) to always use the same Channel object for a given pub.\n*\n* ---\n*\n* #### Key-value API\n* `channel.put(key, value)` and `channel.on(key, callback)`.\n*\n* Note that each participant has their own versions of each key-value  they don't overwrite each other. `channel.on()` callback returns them all by default and has a parameter that indicates whose value you got.\n*\n* While values are encrypted, encryption of keys is not implemented yet.\n*\n* #### Message API\n* `channel.send()` and `channel.getMessages()` for timestamp-indexed chat-style messaging.\n*\n* Message data is encrypted, but timestamps are public so that peers can return your messages in a sequential order.\n*\n* ---\n*\n* You can open a channel with yourself for a private key-value space or a \"note to self\" type chat with yourself.\n*\n* **Privacy disclaimer:** Channel ids, data values and messages are encrypted, but message timestamps are unencrypted so that peers can return them to you in a sequential order. By looking at the unencrypted timestamps (or Gun subscriptions), it is possible to guess who are communicating with each other. This could be improved by indexing messages by *day* only, so making the guess would be more difficult, while you could still return them in a semi-sequential order.\n*\n* @param {Object} options\n* @param {string} options.key your keypair\n* @param {Object} options.gun [gun](https://github.com/amark/gun) instance\n* @param options.participants (optional) string or string array or permissions object ({'pub1':{read:true,write:true,admin:false},'pub2'...}) of participant public keys (your own key is included by default)\n* @param {string} options.chatLink (optional) chat link instead of participants list\n* @param {string} options.uuid (group channels only) unique channel identifier. Leave out for new channel.\n* @param {string} options.name (group channels only) channel name\n* @example\n* // Copy & paste this to console at https://iris.to or other page that has gun, sea and iris-lib\n* // Due to an unsolved bug, someoneElse's messages only start showing up after a reload\n*\n* var gun1 = new Gun('https://gun-us.herokuapp.com/gun');\n* var gun2 = new Gun('https://gun-us.herokuapp.com/gun');\n* var myKey = await Key.getDefault();\n* var someoneElse = localStorage.getItem('someoneElsesKey');\n* if (someoneElse) {\n*  someoneElse = JSON.parse(someoneElse);\n* } else {\n*  someoneElse = await Key.generate();\n*  localStorage.setItem('someoneElsesKey', JSON.stringify(someoneElse));\n* }\n*\n* iris.Channel.initUser(gun1, myKey); // saves myKey.epub to gun.user().get('epub')\n* iris.Channel.initUser(gun2, someoneElse);\n*\n* var ourChannel = new iris.Channel({key: myKey, gun: gun1, participants: someoneElse.pub});\n* var theirChannel = new iris.Channel({key: someoneElse, gun: gun2, participants: myKey.pub});\n*\n* var myChannels = {}; // you can list them in a user interface\n* function printMessage(msg, info) {\n*  console.log(`[${new Date(msg.time).toLocaleString()}] ${info.from.slice(0,8)}: ${msg.text}`)\n* }\n* iris.Channel.getChannels(gun1, myKey, channel => {\n*  var pub = channel.getCurrentParticipants()[0];\n*  gun1.user(pub).get('profile').get('name').on(name => channel.name = name);\n*  myChannels[pub] = channel;\n*  channel.getMessages(printMessage);\n*  channel.on('mood', (mood, from) => console.log(from.slice(0,8) + ' is feeling ' + mood));\n* });\n*\n* // you can play with these in the console:\n* ourChannel.send('message from myKey');\n* theirChannel.send('message from someoneElse');\n*\n* ourChannel.put('mood', 'blessed');\n* theirChannel.put('mood', 'happy');\n*\n* @example https://github.com/irislib/iris-lib/blob/master/__tests__/Channel.js\n*/\nclass Channel {\n   // TODO: these should be done in a cleaner way\n  latestTime: any;\n  theirMsgsLastSeenDate: any;\n  myLastSeenTime: any;\n  theirMsgsLastSeenTime: any;\n  notificationSetting: any;\n  messageIds: any; // this is used from session.processMessage\n  latest: any;\n  uuid: any;\n  name: any;\n  attachments: any;\n\n  theirSecretUuids = {};\n  theirGroupSecrets = {};\n  secrets = {};\n  ourSecretChannelIds = {};\n  theirSecretChannelIds = {};\n  messages = {};\n  chatLinks = {};\n  groupSubscriptions = {};\n  directSubscriptions = {};\n  getParticipantsCallbacks = {};\n  myGroupSecret: any;\n  participants: any;\n\n  constructor(options: any) {\n    this.myGroupSecret = options.myGroupSecret;\n\n    if (options.chatLink) {\n      this.useChatLink(options);\n    }\n\n    if (typeof options.participants === `string`) {\n      this.addParticipant(options.participants, options.save);\n    } else if (Array.isArray(options.participants)) {\n      const o = {};\n      options.participants.forEach(p => o[p] = Object.assign({}, DEFAULT_PERMISSIONS));\n      options.participants = o;\n    }\n    if (typeof options.participants === `object`) { // it's a group channel\n      const keys = Object.keys(options.participants);\n      keys.forEach(k => {\n        if (k !== session.getKey().pub) {\n          this.addParticipant(k, options.save, Object.assign({}, DEFAULT_PERMISSIONS, options.participants[k]));\n        }\n      });\n      options.participants[session.getKey().pub] = options.participants[session.getKey().pub] || Object.assign({}, DEFAULT_PERMISSIONS);\n      if (options.uuid) {\n        this.uuid = options.uuid;\n        this.name = options.name;\n      } else {\n        options.uuid = Attribute.getUuid().value;\n        this.uuid = options.uuid;\n        options.participants[session.getKey().pub].admin = true;\n        options.participants[session.getKey().pub].founder = true;\n      }\n      this.getChatLinks({subscribe: true});\n    }\n    this.participants = options.participants;\n    if (options.uuid) { // It's a group channel\n      // share secret uuid with other participants. since secret is already non-deterministic, maybe uuid could also be?\n      // generate channel-specific secret and share it with other participants\n      // put() keys should be encrypted first? so you could do put(uuid, secret)\n      // what if you join the channel with 2 unconnected devices? on reconnect, the older secret would be overwritten and messages unreadable. maybe participants should store each others' old keys? or maybe you should store them and re-encrypt old stuff when key changes? return them with map() instead?\n      this.putDirect(`S${this.uuid}`, this.getMyGroupSecret());\n      this.getMySecretUuid().then(s => {\n        this.putDirect(this.uuid, s); // TODO: encrypt keys in put()\n      });\n      this.onTheirDirect(this.uuid, (s, k, from) => {\n        this.theirSecretUuids[from] = s;\n      });\n      this.onTheirDirect(`S${this.uuid}`, (s, k, from) => {\n        this.theirGroupSecrets[from] = s;\n      });\n      // need to make put(), on(), send() and getMessages() behave differently when it's a group and retain the old versions for mutual signaling\n    }\n    this.onTheir(`participants`, (participants, k, from) => {\n      let hasAdmin = false;\n      const keys = Object.keys(this.participants);\n      for (let i = 0; i < keys.length; i++) {\n        if (this.participants[keys[i]].admin || this.participants[keys[i]].inviter) {\n          hasAdmin = true;\n          break;\n        }\n      }\n      if (!hasAdmin) {\n        keys.forEach(k => this.participants[k].admin = true); // if no admins, make everyone admin\n      }\n      if (this.participants[from] && (this.participants[from].admin || this.participants[from].inviter)) {\n        if (typeof participants === `object`) {\n          if (JSON.stringify(this.participants) === JSON.stringify(participants)) { return; }\n          this.participants = participants;\n          delete this.participants[from].inviter;\n          Object.keys(participants).forEach(k => {\n            if (k !== session.getKey().pub) {\n              this.addParticipant(k, true, Object.assign({}, DEFAULT_PERMISSIONS, participants[k]), true);\n            }\n          });\n          this.participantsChanged();\n          options.saved = true;\n        }\n      }\n    });\n    if (!options.saved && (options.save === undefined || options.save === true)) {\n      this.save();\n    }\n  }\n\n  useChatLink(options) {\n    const s = options.chatLink.split('?');\n    if (s.length === 2) {\n      const chatWith = util.getUrlParameter('chatWith', s[1]);\n      const channelId = util.getUrlParameter('channelId', s[1]);\n      const inviter = util.getUrlParameter('inviter', s[1]);\n      const pub = inviter || chatWith;\n      if (chatWith) {\n        options.participants = pub;\n      } else if (channelId && inviter && inviter !== session.getKey().pub) { // TODO! initializing it twice breaks things - new secret is generated\n        options.uuid = channelId;\n        options.participants = {};\n        options.participants[inviter] = Object.assign({inviter: true}, DEFAULT_PERMISSIONS);\n      }\n      if (pub !== session.getKey().pub) {\n        const sharedSecret = util.getUrlParameter('s', s[1]);\n        const linkId = util.getUrlParameter('k', s[1]);\n        if (sharedSecret && linkId) {\n          this.save(); // save the channel first so it's there before inviter subscribes to it\n          options.saved = true;\n          publicState().user(pub).get('chatLinks').get(linkId).get('encryptedSharedKey').on(async encrypted => {\n            const sharedKey = await Key.decrypt(encrypted, sharedSecret);\n            const encryptedChatRequest = await Key.encrypt(session.getKey().pub, sharedSecret); // TODO encrypt is not deterministic, it uses salt\n            const channelRequestId = await util.getHash(encryptedChatRequest);\n            publicState(sharedKey).get('chatRequests').get(channelRequestId.slice(0, 12)).put(encryptedChatRequest);\n          });\n        }\n      }\n    }\n  }\n\n  getTheirSecretUuid(pub) {\n    return new Promise(resolve => {\n      if (!this.theirSecretUuids[pub]) {\n        this.onTheirDirect(this.uuid, s => {\n          this.theirSecretUuids[pub] = s;\n          resolve(this.theirSecretUuids[pub]);\n        }, pub);\n      } else {\n        resolve(this.theirSecretUuids[pub]);\n      }\n    });\n  }\n\n  getTheirGroupSecret(pub) {\n    if (pub === session.getKey().pub) { return this.getMyGroupSecret(); }\n    return new Promise(resolve => {\n      if (!this.theirGroupSecrets[pub]) {\n        this.onTheirDirect(`S${this.uuid}`, s => {\n          this.theirGroupSecrets[pub] = s;\n          resolve(this.theirGroupSecrets[pub]);\n        }, pub);\n      } else {\n        resolve(this.theirGroupSecrets[pub]);\n      }\n    });\n  }\n\n  changeMyGroupSecret() {\n    this.myGroupSecret = Key.random(32).toString('base64');\n    // TODO: secret should be archived and probably messages should include the encryption key id so past messages don't become unreadable\n    this.putDirect(`S${this.uuid}`, this.myGroupSecret);\n  }\n\n  /**\n  * Unsubscribe messages from a channel participants\n  *\n  * @param {string} participant public key\n  */\n  async mute(participant) {\n    publicState().user(participant).get(this.theirSecretUuids[participant]).off();\n    // TODO: persist\n  }\n\n  /**\n  * Mute user and prevent them from seeing your further (and maybe past) messages\n  *\n  * @param {string} participant public key\n  */\n  async block(participant) {\n    this.mute(participant);\n    this.putDirect(this.uuid, null);\n    this.putDirect(`S${this.uuid}`, null);\n    delete this.secrets[participant];\n    delete this.ourSecretChannelIds[participant];\n    delete this.theirSecretChannelIds[participant];\n    this.changeMyGroupSecret();\n  }\n\n  async getMySecretUuid() {\n    if (!this.mySecretUuid) {\n      const mySecret = await Key.secret(session.getKey().epub, session.getKey());\n      const mySecretHash = await util.getHash(mySecret);\n      this.mySecretUuid = await util.getHash(mySecretHash + this.uuid);\n    }\n    return this.mySecretUuid;\n  }\n\n  /**\n  * List participants of the channel (other than you)\n  */\n  getCurrentParticipants() {\n    return Object.keys(this.secrets);\n  }\n\n  /**\n  * Subscribe to the changing list of participants by channel admins\n  */\n  getParticipants(callback) {\n    if (this.getParticipantsCallbackId) {\n      this.getParticipantsCallbackId++;\n    } else {\n      this.getParticipantsCallbackId = 1;\n    }\n    this.getParticipantsCallbacks[this.getParticipantsCallbackId] = callback;\n    if (this.participants) {\n      callback(this.participants);\n    }\n  }\n\n  participantsChanged() {\n    Object.keys(this.getParticipantsCallbacks).forEach(id => {\n      this.getParticipantsCallbacks[id](this.participants);\n    });\n  }\n\n  /**\n  * Returns either the uuid of a group channel or the public key of a direct channel.\n  */\n  getId() {\n    return this.uuid || this.getCurrentParticipants()[0];\n  }\n\n  async getSecret(pub) {\n    if (!this.secrets[pub]) {\n      const epub = await util.gunOnceDefined(publicState().user(pub).get(`epub`));\n      this.secrets[pub] = await Key.secret(epub, session.getKey());\n    }\n    return this.secrets[pub];\n  }\n\n  /**\n  *\n  */\n  static async getOurSecretChannelId(pub, pair) {\n    const epub = await util.gunOnceDefined(publicState().user(pub).get(`epub`));\n    const secret = await Key.secret(epub, pair);\n    return util.getHash(secret + pub);\n  }\n\n  /**\n  *\n  */\n  static async getTheirSecretChannelId(pub, pair) {\n    const epub = await util.gunOnceDefined(publicState().user(pub).get(`epub`));\n    const secret = await Key.secret(epub, pair);\n    return util.getHash(secret + pair.pub);\n  }\n\n  /**\n  * Calls back with Channels that you have initiated or written to.\n  * @param {Object} keypair Key keypair that the gun instance is authenticated with\n  * @param callback callback function that is called for each public key you have a channel with\n  */\n  static async getChannels(callback, listenToChatLinks = true) {\n    const keypair = session.getKey();\n    const mySecret = await Key.secret(keypair.epub, keypair);\n    if (listenToChatLinks) {\n      Channel.getMyChatLinks( undefined, undefined, true);\n    }\n    const seen = {};\n\n    const handleChannel = async (value, ourSecretChannelId) => {\n      if (value && !seen[ourSecretChannelId]) {\n        seen[ourSecretChannelId] = true;\n        if (ourSecretChannelId.length > 44) {\n          publicState().user().get(`chats`).get(ourSecretChannelId).put(null);\n          return;\n        }\n        const encryptedChatId = await util.gunOnceDefined(publicState().user().get(`chats`).get(ourSecretChannelId).get(`pub`));\n        const chatId = await Key.decrypt(encryptedChatId, mySecret);\n        if (!chatId) {\n          return;\n        }\n        if (chatId.pub || typeof chatId === `string`) {\n          callback(new Channel({\n            key: keypair,\n            participants: chatId.pub || chatId,\n            save: false\n          }));\n        } else if (chatId.uuid && chatId.participants && chatId.myGroupSecret) {\n          callback(new Channel({\n            key: keypair,\n            participants: chatId.participants,\n            uuid: chatId.uuid,\n            myGroupSecret: chatId.myGroupSecret,\n            save: false\n          }));\n        }\n      }\n    };\n\n    publicState().user().get(`chats`).map(handleChannel);\n  }\n\n  getMyGroupSecret() { // group secret could be deterministic: hash(encryptToSelf(uuid + iterator))\n    if (!this.myGroupSecret) {\n      this.changeMyGroupSecret();\n    }\n    return this.myGroupSecret;\n  }\n\n  async getOurSecretChannelId(pub) {\n    if (!this.ourSecretChannelIds[pub]) {\n      const secret = await this.getSecret(pub);\n      this.ourSecretChannelIds[pub] = await util.getHash(secret + pub);\n    }\n    return this.ourSecretChannelIds[pub];\n  }\n\n  async getTheirSecretChannelId(pub) {\n    if (!this.theirSecretChannelIds[pub]) {\n      const secret = await this.getSecret(pub);\n      this.theirSecretChannelIds[pub] = await util.getHash(secret + session.getKey().pub);\n    }\n    return this.theirSecretChannelIds[pub];\n  }\n\n  /**\n  * Get messages from the channel\n  */\n  async getMessages(callback) { // TODO: save callback and apply it when new participants are added to channel\n    this.getCurrentParticipants().forEach(async pub => {\n      if (pub !== session.getKey().pub) {\n        // Subscribe to their messages\n        let theirSecretChannelId;\n        if (this.uuid) {\n          theirSecretChannelId = await this.getTheirSecretUuid(pub);\n        } else {\n          theirSecretChannelId = await this.getTheirSecretChannelId(pub);\n        }\n        publicState().user(pub).get(`chats`).get(theirSecretChannelId).get(`msgs`).map().once((data, key) => {this.messageReceived(callback, data, this.uuid || pub, false, key, pub);});\n      }\n      if (!this.uuid) {\n        // Subscribe to our messages\n        const ourSecretChannelId = await this.getOurSecretChannelId(pub);\n        userState().get(`chats`).get(ourSecretChannelId).get(`msgs`).map().once((data, key) => {this.messageReceived(callback, data, pub, true, key, session.getKey().pub);});\n      }\n    });\n    if (this.uuid) {\n      // Subscribe to our messages\n      const mySecretUuid = await this.getMySecretUuid();\n      userState().get(`chats`).get(mySecretUuid).get(`msgs`).map().once((data, key) => {this.messageReceived(callback, data, this.uuid, true, key, session.getKey().pub);});\n    }\n  }\n\n  async messageReceived(callback, data, channelId, selfAuthored, key, from) {\n    if (this.messages[key] || !data) {\n      return;\n    }\n    const secret = this.uuid ? (await this.getTheirGroupSecret(from)) : (await this.getSecret(channelId));\n    const decrypted = await Key.decrypt(data, secret);\n    if (typeof decrypted !== `object`) {\n      return;\n    }\n    const info = {selfAuthored, channelId, from};\n    this.messages[key] = decrypted;\n    callback(decrypted, info);\n  }\n\n  /**\n  * Get latest message in this channel. Useful for channel listing.\n  */\n  async getLatestMsg(callback) {\n    const callbackIfLatest = async (msg, info) => {\n      if (!this.latest) {\n        this.latest = msg;\n        callback(msg, info);\n      } else {\n        const t = (typeof this.latest.time === `string` ? this.latest.time : this.latest.time.toISOString());\n        if (t < msg.time) {\n          this.latest = msg;\n          callback(msg, info);\n        }\n      }\n    };\n    this.onMy('latestMsg', msg => callbackIfLatest(msg, {selfAuthored: true, from: session.getKey().pub}));\n    this.onTheir('latestMsg', (msg, k, from) => callbackIfLatest(msg, {selfAuthored: false, from}));\n  }\n\n  /**\n  * Useful for notifications\n  * @param {integer} time last seen msg time (default: now)\n  */\n  async setMyMsgsLastSeenTime(time?: string) {\n    time = time || new Date().toISOString();\n    return this.put(`msgsLastSeenTime`, time);\n  }\n\n  /**\n  * Useful for notifications\n  */\n  async getMyMsgsLastSeenTime(callback) {\n    this.onMy(`msgsLastSeenTime`, time => {\n      this.myMsgsLastSeenTime = time;\n      if (callback) {\n        callback(this.myMsgsLastSeenTime);\n      }\n    });\n  }\n\n  /**\n  * For \"seen\" status indicator\n  */\n  async getTheirMsgsLastSeenTime(callback) {\n    this.onTheir(`msgsLastSeenTime`, time => {\n      this.theirMsgsLastSeenTime = time;\n      if (callback) {\n        callback(this.theirMsgsLastSeenTime);\n      }\n    });\n  }\n\n  async removeParticipant(pub) {\n    this.addParticipant(pub, true, {read: false, write: false});\n  }\n\n  /**\n  * Add a public key to the channel or update its permissions\n  * @param {string} pub\n  */\n  async addParticipant(pub: string, save = true, permissions?: any, subscribe?: boolean) {\n    if (this.uuid) {\n      return;\n    }\n    if (permissions === undefined) {\n      permissions = DEFAULT_PERMISSIONS;\n    }\n    if (this.secrets[pub] && JSON.stringify(this.secrets[pub]) === JSON.stringify(permissions)) { // TODO: should be this.participants[pub]\n      return;\n    }\n    this.secrets[pub] = null;\n    this.getSecret(pub);\n    const ourSecretChannelId = await this.getOurSecretChannelId(pub);\n    if (save) {\n      // Save their public key in encrypted format, so in channel listing we know who we are channeling with\n      const mySecret = await Key.secret(session.getKey().epub, session.getKey());\n      publicState().user().get(`chats`).get(ourSecretChannelId).get(`pub`).put(await Key.encrypt({pub}, mySecret));\n    }\n    if (this.uuid) {\n      this.participants[pub] = permissions;\n      if (save) {\n        this.putDirect(`S${this.uuid}`, this.getMyGroupSecret());\n        this.getMySecretUuid().then(s => {\n          this.putDirect(this.uuid, s); // TODO: encrypt keys in put()\n        });\n        this.onTheirDirect(this.uuid, (s, k, from) => {\n          this.theirSecretUuids[from] = s;\n        });\n        this.onTheirDirect(`S${this.uuid}`, (s, k, from) => {\n          this.theirGroupSecrets[from] = s;\n        });\n        this.save();\n      }\n    }\n    if (subscribe) {\n      Object.values(this.directSubscriptions).forEach(arr => {\n        arr.forEach(o => {\n          if (!o.from || o.from === pub) {\n            this._onTheirDirectFromUser(pub, o.key, o.callback);\n          }\n        });\n      });\n      Object.values(this.groupSubscriptions).forEach(arr => {\n        arr.forEach(o => {\n          if (o.from && o.from !== pub) { return; }\n          if (permissions.write) {\n            this._onTheirGroupFromUser(pub, o.key, o.callback);\n          } else { // unsubscribe\n            o.event && o.event.off();\n          }\n        });\n      });\n    }\n  }\n\n  /**\n  * Send a message to the channel\n  * @param msg string or {time, text, ...} object\n  */\n  async send(msg) {\n    if (typeof msg === `string`) {\n      msg = msg.trim();\n      if (msg.length === 0) {\n        return;\n      }\n      msg = {\n        time: (new Date()).toISOString(),\n        text: msg\n      };\n    } else if (typeof msg === `object`) {\n      msg.time = msg.time || (new Date()).toISOString();\n    } else {\n      throw new Error(`msg param must be a string or an object`);\n    }\n    //publicState().user().get('message').set(temp);\n    if (this.uuid) {\n      const encrypted = await Key.encrypt(JSON.stringify(msg), this.getMyGroupSecret());\n      const mySecretUuid = await this.getMySecretUuid();\n      userState().get(`chats`).get(mySecretUuid).get(`msgs`).get(`${msg.time}`).put(encrypted);\n      userState().get(`chats`).get(mySecretUuid).get(`latestMsg`).put(encrypted);\n    } else {\n      const keys = this.getCurrentParticipants();\n      for (let i = 0;i < keys.length;i++) {\n        const encrypted = await Key.encrypt(JSON.stringify(msg), (await this.getSecret(keys[i])));\n        const ourSecretChannelId = await this.getOurSecretChannelId(keys[i]);\n        userState().get(`chats`).get(ourSecretChannelId).get(`msgs`).get(`${msg.time}`).put(encrypted);\n        userState().get(`chats`).get(ourSecretChannelId).get(`latestMsg`).put(encrypted);\n      }\n    }\n  }\n\n  /**\n  * Save the channel to our channels list without sending a message\n  */\n  async save() {\n    if (this.uuid) {\n      const mySecretUuid = await this.getMySecretUuid();\n      userState().get(`chats`).get(mySecretUuid).get('msgs').get('a').put(null);\n      this.put(`participants`, this.participants); // public participants list\n      const mySecret = await Key.secret(session.getKey().epub, session.getKey());\n      userState().get(`chats`).get(mySecretUuid).get(`pub`).put(await Key.encrypt({\n        uuid: this.uuid,\n        myGroupSecret: this.getMyGroupSecret(),\n        participants: this.participants // private participants list\n      }, mySecret));\n      this.participantsChanged();\n    } else {\n      const keys = this.getCurrentParticipants();\n      for (let i = 0;i < keys.length;i++) {\n        const ourSecretChannelId = await this.getOurSecretChannelId(keys[i]);\n        userState().get(`chats`).get(ourSecretChannelId).get('msgs').get('a').put(null);\n      }\n    }\n  }\n\n  /**\n  * Save a key-value pair, encrypt value. Each participant in the Channel writes to their own version of the key-value pair  they don't overwrite the same one.\n  * @param {string} key\n  * @param value\n  */\n  async put(key, value) {\n    return (this.uuid ? this.putGroup : this.putDirect).call(this, key, value);\n  }\n\n  async putGroup(key, value) {\n    if (key === `msgs`) { throw new Error(`Sorry, you can't overwrite the msgs field which is used for .send()`); }\n    const encrypted = await Key.encrypt(JSON.stringify(value), this.getMyGroupSecret());\n    const mySecretUuid = await this.getMySecretUuid();\n    userState().get(`chats`).get(mySecretUuid).get(key).put(encrypted);\n  }\n\n  async putDirect(key, value) {\n    if (key === `msgs`) { throw new Error(`Sorry, you can't overwrite the msgs field which is used for .send()`); }\n    const keys = this.getCurrentParticipants();\n    for (let i = 0;i < keys.length;i++) {\n      const encrypted = await Key.encrypt(JSON.stringify(value), (await this.getSecret(keys[i])));\n      const ourSecretChannelId = await this.getOurSecretChannelId(keys[i]);\n      userState().get(`chats`).get(ourSecretChannelId).get(key).put(encrypted);\n    }\n  }\n\n  /**\n  * Subscribe to a key-value pair. Callback returns every participant's value unless you limit it with *from* param.\n  * @param {string} key\n  * @param {function} callback\n  * @param {string} from public key whose value you want, or *\"me\"* for your value only, or *\"them\"* for the value of others only\n  */\n  async on(key: string, callback: Function, from?: string) {\n    return (this.uuid ? this.onGroup : this.onDirect).call(this, key, callback, from);\n  }\n\n  async onDirect(key: string, callback: Function, from?: string) {\n    if (!from || from === `me` || from === session.getKey().pub) {\n      this.onMy(key, (val: any) => callback(val, session.getKey().pub));\n    }\n    if (!from || (from !== `me` && from !== session.getKey().pub)) {\n      this.onTheir(key, (val: any, k: string, pub: string) => callback(val, pub));\n    }\n  }\n\n  async onGroup(key: string, callback: Function, from?: string) {\n    if (!from || from === `me` || from === session.getKey().pub) {\n      this.onMyGroup(key, val => callback(val, session.getKey().pub));\n    }\n    if (!from || (from !== `me` && from !== session.getKey().pub)) {\n      this.onTheirGroup(key, (val, k, pub) => callback(val, pub));\n    }\n  }\n\n  async onMy(key: string, callback: Function) {\n    return (this.uuid ? this.onMyGroup : this.onMyDirect).call(this, key, callback);\n  }\n\n  async onMyDirect(key: string, callback: Function) {\n    if (typeof callback !== 'function') {\n      throw new Error(`onMy callback must be a function, got ${typeof callback}`);\n    }\n    const keys = this.getCurrentParticipants();\n    for (let i = 0;i < keys.length;i++) {\n      const ourSecretChannelId = await this.getOurSecretChannelId(keys[i]);\n      publicState().user().get(`chats`).get(ourSecretChannelId).get(key).on(async (data: any) => {\n        const decrypted = await Key.decrypt(data, (await this.getSecret(keys[i])));\n        if (decrypted) {\n          callback(typeof decrypted.v !== `undefined` ? decrypted.v : decrypted, key);\n        }\n      });\n      break;\n    }\n  }\n\n  async onMyGroup(key, callback) {\n    if (typeof callback !== 'function') {\n      throw new Error(`onMy callback must be a function, got ${typeof callback}`);\n    }\n    const mySecretUuid = await this.getMySecretUuid();\n    const mySecret = await this.getMyGroupSecret();\n    publicState().user().get(`chats`).get(mySecretUuid).get(key).on(async data => {\n      const decrypted = await Key.decrypt(data, mySecret);\n      if (decrypted) {\n        callback(typeof decrypted.v !== `undefined` ? decrypted.v : decrypted, key, session.getKey().pub);\n      }\n    });\n  }\n\n  async onTheir(key: string, callback: Function, from: string) {\n    return (this.uuid ? this.onTheirGroup : this.onTheirDirect).call(this, key, callback, from);\n  }\n\n  async _onTheirDirectFromUser(key: string, callback: Function, pub: string) {\n    if (!this.hasWritePermission(pub)) { return; }\n    const theirSecretChannelId = await this.getTheirSecretChannelId(pub);\n    publicState().user(pub).get(`chats`).get(theirSecretChannelId).get(key).on(async (data: any) => {\n      if (!this.hasWritePermission(pub)) { return; }\n      const decrypted = await Key.decrypt(data, (await this.getSecret(pub)));\n      if (decrypted) {\n        callback(typeof decrypted.v !== `undefined` ? decrypted.v : decrypted, key, pub);\n      }\n    });\n  }\n\n  async onTheirDirect(key: string, callback: Function, from: string) { // TODO: subscribe to new channel participants\n    if (typeof callback !== 'function') {\n      throw new Error(`onTheir callback must be a function, got ${typeof callback}`);\n    }\n    if (!Object.prototype.hasOwnProperty.call(this.directSubscriptions, key)) {\n      this.directSubscriptions[key] = [];\n    }\n    this.directSubscriptions[key].push({key, callback, from});\n    const participants = this.getCurrentParticipants();\n    participants.forEach(async pub => {\n      if (from && pub !== from) { return; }\n      this._onTheirDirectFromUser(pub, key, callback);\n    });\n  }\n\n  hasWritePermission(pub) {\n    return !this.uuid || (this.participants && this.participants[pub] && this.participants[pub].write);\n  }\n\n  async _onTheirGroupFromUser(pub: string, key: string, callback: Function, subscription: any) {\n    if (!this.hasWritePermission(pub)) { return; }\n    const theirSecretUuid = await this.getTheirSecretUuid(pub);\n    publicState().user(pub).get(`chats`).get(theirSecretUuid).get(key).on(async (data: any, _a: any, _b: any, e: Event) => {\n      if (subscription) { subscription.event = e; }\n      if (!this.hasWritePermission(pub)) { return; }\n      const decrypted = await Key.decrypt(data, (await this.getTheirGroupSecret(pub)));\n      if (decrypted) {\n        callback(typeof decrypted.v !== `undefined` ? decrypted.v : decrypted, key, pub);\n      }\n    });\n  }\n\n  async onTheirGroup(key, callback, from) {\n    if (typeof callback !== 'function') {\n      throw new Error(`onTheir callback must be a function, got ${typeof callback}`);\n    }\n    if (!Object.prototype.hasOwnProperty.call(this.groupSubscriptions, key)) {\n      this.groupSubscriptions[key] = [];\n    }\n    const subscription = {key, callback, from};\n    this.groupSubscriptions[key].push(subscription);\n\n    this.getParticipants(participants => {\n      Object.keys(participants).forEach(async pub => {\n        if (from && pub !== from) { return; }\n        if (!(participants[pub] && participants[pub].write)) { return; }\n        this._onTheirGroupFromUser(pub, key, callback, subscription);\n      });\n    });\n  }\n\n  /**\n  * Set typing status\n  */\n  setTyping(isTyping, timeout = 5) {\n    isTyping = typeof isTyping === `undefined` ? true : isTyping;\n    timeout = timeout * 1000;\n    this.put(`typing`, isTyping ? new Date().toISOString() : new Date(0).toISOString());\n    clearTimeout(this.setTypingTimeout);\n    this.setTypingTimeout = setTimeout(() => this.put(`typing`, false), timeout);\n  }\n\n  /**\n  * Get typing status\n  */\n  getTyping(callback, timeout = 5) { // TODO callback not called on setTyping(false), at least for self chat\n    timeout = timeout * 1000;\n    this.onTheir(`typing`, (typing, key, pub) => {\n      if (callback) {\n        const isTyping = typing && new Date() - new Date(typing) <= timeout;\n        callback(isTyping, pub);\n        this.getTypingTimeouts = this.getTypingTimeouts || {};\n        clearTimeout(this.getTypingTimeouts[pub]);\n        if (isTyping) {\n          this.getTypingTimeouts[pub] = setTimeout(() => callback(false, pub), timeout);\n        }\n      }\n    });\n  }\n\n  /**\n  * Add a chat button to page\n  * @param options {label, channelOptions}\n  */\n  static addChatButton(options = {}) {\n    options = Object.assign({label: 'Chat'}, options);\n    if (!options.channelOptions) {\n      throw new Error('addChatButton missing options.channelOptions param');\n    }\n    util.injectCss();\n    let channel, box;\n    const btn = util.createElement('div', 'iris-chat-open-button', document.body);\n    btn.setAttribute('id', 'iris-chat-open-button');\n    btn.innerHTML = `<svg style=\"margin-right:7px;margin-bottom: -0.2em\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 510 510\" xml:space=\"preserve\"><path fill=\"currentColor\" d=\"M459,0H51C22.95,0,0,22.95,0,51v459l102-102h357c28.05,0,51-22.95,51-51V51C510,22.95,487.05,0,459,0z M102,178.5h306v51 H102V178.5z M306,306H102v-51h204V306z M408,153H102v-51h306V153z\"></path></svg> ${options.label}`;\n    btn.addEventListener('click', () => {\n      btn.setAttribute('style', 'display: none');\n      if (!channel) {\n        channel = new Channel(options.channelOptions);\n        box = channel.getChatBox();\n        document.body.appendChild(box);\n      } else {\n        box.setAttribute('style', ''); // show\n      }\n    });\n  }\n\n  /**\n  * Get a simple link that points to the channel.\n  *\n  * Direct channel: both users need to give their simple links. Use createChatLink() to get a two-way link that needs to be given by one user only.\n  *\n  * Group channel: Works only if the link recipient has been already added onto the channel participants list.\n  */\n  getSimpleLink(urlRoot = 'https://iris.to/') {\n    if (this.uuid) {\n      return `${urlRoot}?channelId=${this.uuid}&inviter=${session.getKey().pub}`;\n    }\n    return `${urlRoot}?chatWith=${this.getCurrentParticipants()[0]}`;\n  }\n\n  /**\n  *\n  */\n  async getChatLinks(opts: any = {}) {\n    let {callback, urlRoot, subscribe} = opts;\n    urlRoot = urlRoot || 'https://iris.to/';\n    if (!this.uuid) { throw new Error('Only group channels may have chat links'); }\n    const chatLinks: any[] = [];\n    const chatLinkSubscriptions = {};\n    this.on('chatLinks', (links: any, from: string) => {\n      // TODO: check admin permissions\n      if (!links || typeof links !== 'object') { return; }\n      Object.keys(links).forEach(linkId => {\n        const link = links[linkId];\n        if (link === null) {\n          chatLinkSubscriptions[linkId] && chatLinkSubscriptions[linkId].off(); // unsubscribe removed chat link\n          delete chatLinkSubscriptions[linkId];\n          callback && callback({id: linkId, url: null});\n          return;\n        }\n        if (chatLinks.indexOf(linkId) !== -1) { return; }\n        const channels = [];\n        chatLinks.push(linkId);\n        const url = Channel.formatChatLink({urlRoot, inviter: from, channelId: this.uuid, sharedSecret: link.sharedSecret, linkId});\n        callback && callback({url, id: linkId});\n        if (subscribe) {\n          publicState().user(link.sharedKey.pub).get('chatRequests').map(async (encPub, requestId, a, e) => {\n            if (!encPub || typeof encPub !== 'string' || encPub.length < 10) { return; }\n            chatLinkSubscriptions[linkId] = e;\n            const s = JSON.stringify(encPub);\n            if (channels.indexOf(s) === -1) {\n              channels.push(s);\n              const pub = await Key.decrypt(encPub, link.sharedSecret);\n              this.addParticipant(pub, undefined, undefined, true);\n            }\n          });\n        }\n      });\n    });\n  }\n\n  async createChatLink(urlRoot = 'https://iris.to/') {\n    const sharedKey = await Key.pair();\n    const sharedKeyString = JSON.stringify(sharedKey);\n    const sharedSecret = await Key.secret(sharedKey.epub, sharedKey);\n    const encryptedSharedKey = await Key.encrypt(sharedKeyString, sharedSecret);\n    const ownerSecret = await Key.secret(session.getKey().epub, session.getKey());\n    const ownerEncryptedSharedKey = await Key.encrypt(sharedKeyString, ownerSecret);\n    let linkId = await util.getHash(encryptedSharedKey);\n    linkId = linkId.slice(0, 12);\n\n    // User has to exist, in order for .get(chatRequests).on() to be ever triggered\n    publicState(sharedKey).get('chatRequests').put({a: 1});\n\n    this.chatLinks[linkId] = {sharedKey, sharedSecret};\n    this.put('chatLinks', this.chatLinks);\n    userState().get('chatLinks').get(linkId).put({encryptedSharedKey, ownerEncryptedSharedKey});\n\n    return Channel.formatChatLink({urlRoot, channelId: this.uuid, inviter: session.getKey().pub, sharedSecret, linkId});\n  }\n\n  /**\n  * Get a channel box element that you can add to your page\n  */\n  getChatBox() {\n    util.injectCss();\n    let minimized = false;\n\n    const chatBox = util.createElement('div', 'iris-chat-box');\n    const header = util.createElement('div', 'iris-chat-header', chatBox);\n    const minimize = util.createElement('span', 'iris-chat-minimize', header);\n    minimize.innerText = '';\n    minimize.addEventListener('click', e => {\n      e.stopPropagation();\n      chatBox.setAttribute('class', 'iris-chat-box minimized');\n      minimized = true;\n    });\n    const headerText = util.createElement('div', 'iris-chat-header-text', header);\n    const onlineIndicator = util.createElement('span', 'iris-online-indicator', headerText);\n    onlineIndicator.innerHTML = '&#x25cf;';\n    const nameEl = util.createElement('span', undefined, headerText);\n    const close = util.createElement('span', 'iris-chat-close', header);\n    close.innerHTML = '&#215;';\n    close.addEventListener('click', () => {\n      chatBox.setAttribute('style', 'display: none');\n      const openChatBtn = document.getElementById('iris-chat-open-button');\n      if (openChatBtn) {\n        openChatBtn.setAttribute('style', ''); // show\n      }\n    });\n    header.addEventListener('click', () => {\n      if (minimized) {\n        chatBox.setAttribute('class', 'iris-chat-box');\n        minimized = false;\n      }\n    });\n\n    const messages = util.createElement('div', 'iris-chat-messages', chatBox);\n\n    const typingIndicator = util.createElement('div', 'iris-typing-indicator', chatBox);\n    typingIndicator.innerText = 'typing...';\n    this.getTyping(isTyping => {\n      typingIndicator.setAttribute('class', `iris-typing-indicator${ isTyping ? ' yes' : ''}`);\n    });\n\n    const inputWrapper = util.createElement('div', 'iris-chat-input-wrapper', chatBox);\n    const textArea = util.createElement('textarea', undefined, inputWrapper);\n    textArea.setAttribute('rows', '1');\n    textArea.setAttribute('placeholder', 'Type a message');\n    if (util.isMobile) {\n      const sendBtn = util.createElement('button', undefined, inputWrapper);\n      sendBtn.innerHTML = `\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 486.736 486.736\" style=\"enable-background:new 0 0 486.736 486.736;\" xml:space=\"preserve\" width=\"100px\" height=\"100px\" fill=\"#000000\" stroke=\"#000000\" stroke-width=\"0\"><path fill=\"currentColor\" d=\"M481.883,61.238l-474.3,171.4c-8.8,3.2-10.3,15-2.6,20.2l70.9,48.4l321.8-169.7l-272.4,203.4v82.4c0,5.6,6.3,9,11,5.9 l60-39.8l59.1,40.3c5.4,3.7,12.8,2.1,16.3-3.5l214.5-353.7C487.983,63.638,485.083,60.038,481.883,61.238z\"></path></svg>\n      `;\n      sendBtn.addEventListener('click', () => {\n        this.send(textArea.value);\n        textArea.value = '';\n        this.setTyping(false);\n      });\n    }\n\n    const participants = this.getCurrentParticipants();\n    if (participants.length) {\n      const pub = participants[0];\n      publicState().user(pub).get('profile').get('name').on(name => nameEl.innerText = name);\n      Channel.getActivity(publicState(), pub, status => {\n        const cls = `iris-online-indicator${ status.isActive ? ' yes' : ''}`;\n        onlineIndicator.setAttribute('class', cls);\n        const undelivered = messages.querySelectorAll('.iris-chat-message:not(.delivered)');\n        undelivered.forEach(msg => {\n          if (msg.getAttribute('data-time') <= status.lastActive) {\n            const c = msg.getAttribute('class');\n            msg.setAttribute('class', `${c } delivered`);\n          }\n        });\n      });\n    }\n\n    this.getTheirMsgsLastSeenTime(time => {\n      const unseen = messages.querySelectorAll('.iris-seen:not(.yes)');\n      unseen.forEach(indicator => {\n        const msgEl = indicator.parentElement.parentElement.parentElement;\n        if (msgEl.getAttribute('data-time') <= time) {\n          const msgClass = msgEl.getAttribute('class');\n          if (msgClass.indexOf('delivered') === -1) {\n            msgEl.setAttribute('class', `${msgClass } delivered`);\n          }\n          indicator.setAttribute('class', 'iris-seen yes');\n        }\n      });\n    });\n\n    this.getMessages((msg, info) => {\n      const msgContent = util.createElement('div', 'iris-msg-content');\n      msgContent.innerText = msg.text;\n      const time = util.createElement('div', 'time', msgContent);\n      time.innerText = util.formatTime(new Date(msg.time));\n      if (info.selfAuthored) {\n        const cls = this.theirMsgsLastSeenTime >= msg.time ? 'iris-seen yes' : 'iris-seen';\n        const seenIndicator = util.createElement('span', cls, time);\n        seenIndicator.innerHTML = ' <svg version=\"1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 59 42\"><polygon fill=\"currentColor\" points=\"40.6,12.1 17,35.7 7.4,26.1 4.6,29 17,41.3 43.4,14.9\"></polygon><polygon class=\"iris-delivered-checkmark\" fill=\"currentColor\" points=\"55.6,12.1 32,35.7 29.4,33.1 26.6,36 32,41.3 58.4,14.9\"></polygon></svg>';\n      }\n      msgContent.innerHTML = msgContent.innerHTML.replace(/\\n/g, '<br>\\n');\n\n      const msgEl = util.createElement('div', `${info.selfAuthored ? 'our' : 'their'} iris-chat-message`);\n      msgEl.appendChild(msgContent);\n      msgEl.setAttribute('data-time', msg.time);\n      for (let i = messages.children.length; i >= 0; i--) {\n        if (i === 0) {\n          messages.insertBefore(msgEl, messages.firstChild);\n        } else {\n          const t = messages.children[i - 1].getAttribute('data-time');\n          if (t && t < msg.time) {\n            messages.children[i - 1].insertAdjacentElement('afterend', msgEl);\n            break;\n          }\n        }\n      }\n      messages.scrollTop = messages.scrollHeight;\n    });\n\n    textArea.addEventListener('keyup', event => {\n      //Channel.setActivity(publicState(), true); // TODO\n      this.setMyMsgsLastSeenTime(); // TODO\n      if (event.keyCode === 13) {\n        event.preventDefault();\n        const content = textArea.value;\n        const caret = util.getCaret(textArea);\n        if (event.shiftKey) {\n          textArea.value = `${content.substring(0, caret - 1) }\\n${ content.substring(caret, content.length)}`;\n        } else {\n          textArea.value = content.substring(0, caret - 1) + content.substring(caret, content.length);\n          this.send(textArea.value);\n          textArea.value = '';\n          this.setTyping(false);\n        }\n      } else {\n        this.setTyping(!!textArea.value.length);\n      }\n    });\n\n    return chatBox;\n  }\n\n  /**\n  * Set the user's online/active status\n  * @param {string} activity string: set the activity status every 3 seconds, null/false: stop updating\n  */\n  static setActivity(activity) {\n    if (publicState().irisActivityStatus === activity) { return; }\n    publicState().irisActivityStatus = activity;\n    clearTimeout(publicState().setActivityTimeout);\n    const update = () => {\n      publicState().user().get(`activity`).put({status: activity, time: new Date().toISOString()});\n    };\n    update();\n    function timerUpdate() {\n      update();\n      publicState().setActivityTimeout = setTimeout(timerUpdate, 3000);\n    }\n    if (activity) {\n      timerUpdate();\n    }\n  }\n\n  /**\n  * Get the online status of a user.\n  *\n  * @param {string} pubKey public key of the user\n  * @param {boolean} callback receives a boolean each time the user's online status changes\n  */\n  static getActivity(pubKey, callback) {\n    let timeout;\n    publicState().user(pubKey).get(`activity`).on(activity => {\n      if (!activity || !(activity.time && activity.status)) { return; }\n      clearTimeout(timeout);\n      const now = new Date();\n      const activityDate = new Date(activity.time);\n      const isActive = activityDate > new Date(now.getTime() - 10 * 1000) && activityDate < new Date(now.getTime() + 30 * 1000);\n      callback({isActive, lastActive: activity.time, status: activity.status});\n      if (isActive) {\n        timeout = setTimeout(() => callback({isOnline: false, lastActive: activity.time}), 10000);\n      }\n    });\n  }\n\n  static formatChatLink({urlRoot, chatWith, channelId, inviter, sharedSecret, linkId}) {\n    const enc = encodeURIComponent;\n    if (channelId && inviter) {\n      return `${urlRoot}?channelId=${enc(channelId)}&inviter=${enc(inviter)}&s=${enc(sharedSecret)}&k=${enc(linkId)}`;\n    }\n    return `${urlRoot}?chatWith=${enc(chatWith)}&s=${enc(sharedSecret)}&k=${enc(linkId)}`;\n  }\n\n  /**\n  * Creates a channel link that can be used for two-way communication, i.e. only one link needs to be exchanged.\n  */\n  static async createChatLink(urlRoot = 'https://iris.to/') {\n    const user = publicState().user();\n    const key = session.getKey();\n\n    // We create a new Gun user whose private key is shared with the chat link recipients.\n    // Chat link recipients can contact you by writing their public key to the shared key's user space.\n    const sharedKey = await Key.pair();\n    const sharedKeyString = JSON.stringify(sharedKey);\n    const sharedSecret = await Key.secret(sharedKey.epub, sharedKey);\n    const encryptedSharedKey = await Key.encrypt(sharedKeyString, sharedSecret);\n    const ownerSecret = await Key.secret(key.epub, key);\n    const ownerEncryptedSharedKey = await Key.encrypt(sharedKeyString, ownerSecret);\n    let linkId = await util.getHash(encryptedSharedKey);\n    linkId = linkId.slice(0, 12);\n\n    // User has to exist, in order for .get(chatRequests).on() to be ever triggered\n    publicState(sharedKey).get('chatRequests').put({a: 1}).get('chatRequests').put({a: 1});\n\n    user.get('chatLinks').get(linkId).put({encryptedSharedKey, ownerEncryptedSharedKey});\n\n    return Channel.formatChatLink({urlRoot, chatWith: key.pub, sharedSecret, linkId});\n  }\n\n  /**\n  *\n  */\n  static async getMyChatLinks(urlRoot = 'https://iris.to/', callback: Function, subscribe = false) {\n    const key = session.getKey();\n    const user = publicState().user();\n    const mySecret = await Key.secret(key.epub, key);\n    const chatLinks = [];\n    user.get('chatLinks').map((data, linkId) => {\n      if (!data || chatLinks.indexOf(linkId) !== -1) { return; }\n      const channels = [];\n      user.get('chatLinks').get(linkId).get('ownerEncryptedSharedKey').on(async enc => {\n        if (!enc || chatLinks.indexOf(linkId) !== -1) { return; }\n        chatLinks.push(linkId);\n        const sharedKey = await Key.decrypt(enc, mySecret);\n        const sharedSecret = await Key.secret(sharedKey.epub, sharedKey);\n        const url = Channel.formatChatLink({urlRoot, chatWith: key.pub, sharedSecret, linkId});\n        if (callback) {\n          callback({url, id: linkId});\n        }\n        if (subscribe) {\n          publicState().user(sharedKey.pub).get('chatRequests').map(async (encPub, requestId) => {\n            if (!encPub) { return; }\n            const s = JSON.stringify(encPub);\n            if (channels.indexOf(s) === -1) {\n              channels.push(s);\n              const pub = await Key.decrypt(encPub, sharedSecret);\n              const channel = new Channel({key, participants: pub});\n              channel.save();\n            }\n            publicState(sharedKey).get('chatRequests').get(requestId).put(null);\n          });\n        }\n      });\n    });\n  }\n\n  /**\n  *\n  */\n  removeGroupChatLink(linkId) {\n    this.chatLinks[linkId] = null;\n    this.put('chatLinks', this.chatLinks);\n    publicState().user().get('chatLinks').get(linkId).put(null);\n  }\n\n  /**\n  *\n  */\n  static removePrivateChatLink(key, linkId) {\n    publicState().user().auth(key);\n    publicState().user().get('chatLinks').get(linkId).put(null);\n  }\n\n  /**\n  *\n  */\n  static async deleteChannel(key, pub) {\n    publicState().user().auth(key);\n    const channelId = await Channel.getOurSecretChannelId(pub, key);\n    publicState().user().get('channels').get(channelId).put(null);\n    publicState().user().get('channels').get(channelId).off();\n  }\n\n  /**\n  *\n  */\n  static async deleteGroup(key, uuid) {\n    const mySecret = await Key.secret(key.epub, key);\n    const mySecretHash = await util.getHash(mySecret);\n    const mySecretUuid = await util.getHash(mySecretHash + uuid);\n    publicState().user().auth(key);\n    publicState().user().get('channels').get(mySecretUuid).put(null);\n    publicState().user().get('channels').get(mySecretUuid).off();\n  }\n}\n\nexport default Channel;\n","import Channel from './Channel';\nimport session from './session';\n\nconst channels = new Map<string, Channel>();\n\n/**\n * Private channel that only you and publicKey can read/write.\n * @param publicKey\n * @returns {Channel}\n */\nexport default function(publicKey = session.getKey(), chatLink?: string): Channel {\n  let channel = channels.get(publicKey);\n  if (!channel) {\n    channel = new Channel({participants: publicKey, chatLink})\n    channels.set(publicKey, channel);\n  }\n  return channel;\n}","import Node from './db/Node';\n\nlet local: Node;\n\n/**\n * Get a state that is only synced in memory and local storage.\n *\n * Useful for storing things like UI state, local indexes or logged in user.\n * @returns {Node}\n */\nexport default function() {\n  if (!local) {\n    local = new Node('local');\n  }\n  return local;\n}","import local from './local';\n\nlet blockedUsers: { [key: string]: boolean } = {};\n\nexport default function() {\n  if (!blockedUsers) {\n    blockedUsers = {};\n    local().get('block').map((isBlocked: boolean, user: string) => {\n      if (isBlocked === blockedUsers[user]) { return; }\n      if (isBlocked) {\n        blockedUsers[user] = isBlocked;\n        local().get('groups').map((_v: any, k: string) => {\n          local().get('groups').get(k).get(user).put(false);\n        });\n      } else {\n        delete blockedUsers[user];\n      }\n    });\n  }\n  return blockedUsers;\n}","import local from \"./local\";\nimport userSpace from './public';\nimport blockedUsers from './blockedUsers';\n\nlet counter = 0;\nconst cache = new Map<string, Map<string, any>>();\nconst callbacks = new Map();\n\ntype Event = {\n  off: () => void;\n}\n\n/**\n * Aggregates public data from all users in the group.\n *\n * For example, the public message feed, message replies and likes are aggregated using this.\n * @param groupName\n * @returns object\n */\nexport default function(groupName = 'everyone') {\n  return {\n    get(path: string, callback: any) {\n      const groupNode = local().get('groups').get(groupName);\n      const follows: { [key: string]: boolean; } = {};\n      requestAnimationFrame(() => {\n        groupNode.map((isFollowing: any, user: string) => {\n          if (blockedUsers()[user]) { return; } // TODO: allow to specifically query blocked users?\n          if (follows[user] && follows[user] === isFollowing) { return; }\n          follows[user] = isFollowing;\n          if (isFollowing) { // TODO: callback on unfollow, for unsubscribe\n            let node = userSpace(user);\n            if (path && path !== '/') {\n              node = path.split('/').reduce((sum:any, s:string) => sum.get(decodeURIComponent(s)), node);\n            }\n            callback(node, user);\n          }\n        });\n      });\n    },\n\n    _cached_map(cached: Map<string, any> | undefined, cacheKey: string, path: string, myEvent: Event, callback: Function) {\n      if (!cached) {\n        const cached = new Map();\n        cache.set(cacheKey, cached);\n        this.get(path, (node: any, from: string) => node.map((value: any, key: string, x: any) => {\n          const item = {value, key, from};\n          cached.set(key, item);\n          for (let cb of callbacks.get(cacheKey).values()) {\n            cb(value, key, x, myEvent, from);\n          }\n        }));\n      } else {\n        for (let item of cached.values()) {\n          callback(item.value, item.key, 0, myEvent, item.from);\n        }\n      }\n    },\n\n    // TODO: this should probably store just the most recent value, not everyone's value\n    // TODO: for counting of likes etc, use this.count() instead\n    _cached_on(cached: Map<string, any> | undefined, cacheKey: string, path: string, myEvent: Event, callback: Function) {\n      if (!cached) {\n        const cached = new Map();\n        cache.set(cacheKey, cached);\n        this.get(path, (node: any, from: string) => node.on((value: any, key: string, x: any) => {\n          const item = {value, key, from};\n          cached.set(from, item);\n          for (let cb of callbacks.get(cacheKey).values()) {\n            cb(value, key, x, myEvent, from);\n          }\n        }));\n      } else {\n        for (let item of cached.values()) {\n          callback(item.value, item.key, 0, myEvent, item.from);\n        }\n      }\n    },\n\n    _cached_count(cached: Map<string, any> | undefined, cacheKey: string, path: string, myEvent: Event, callback: Function) {\n      if (!cached) {\n        const cached = new Map();\n        cache.set(cacheKey, cached);\n        this.get(path, (node: any, from: string) => node.on((value: any, key: string) => {\n          value ? cached.set(from, true) : cached.delete(from);\n          const count = cached.size;\n          for (let cb of callbacks.get(cacheKey).values()) {\n            cb(count, key, null, myEvent, from);\n          }\n        }));\n      } else {\n        callback(cached.size, path.split('/').pop(), null, myEvent);\n      }\n    },\n\n    _cached_fn(fn: string, path: string, callback: Function) {\n      const cacheKey = `${fn}:${groupName}:${path}`;\n\n      let callbackId = counter++;\n      if (callbacks.has(cacheKey)) {\n        callbacks.get(cacheKey).set(callbackId, callback);\n      } else {\n        callbacks.set(cacheKey, new Map([[callbackId, callback]]));\n      }\n\n      const myEvent = {off: () => {\n        let myCallbacks = callbacks.get(cacheKey);\n        myCallbacks && myCallbacks.delete(callbackId);\n      }};\n\n      const cached = cache.get(cacheKey);\n\n      switch (fn) {\n        case 'map':\n          this._cached_map(cached, cacheKey, path, myEvent, callback);\n          break;\n        case 'on':\n          this._cached_on(cached, cacheKey, path, myEvent, callback);\n          break;\n        case 'count':\n          this._cached_count(cached, cacheKey, path, myEvent, callback);\n          break;\n      }\n    },\n\n    map(path: string, callback: Function) { // group queries are slow, so we cache them\n      this._cached_fn('map', path, callback);\n    },\n\n    on(path: string, callback: Function) {\n      this._cached_fn('on', path, callback);\n    },\n\n    count(path: string, callback: Function) {\n      this._cached_fn('count', path, callback);\n    }\n  }\n}","// @ts-nocheck\n\nimport _ from './lodash';\nimport session from './session';\nimport util from './util';\nimport publicState from './global';\nimport privateState from './private';\nimport local from './local';\nimport group from './group';\n\nconst NOTIFICATION_SERVICE_URL = 'https://iris-notifications.herokuapp.com/notify';\n// const notificationSound = new Audio('../../assets/audio/notification.mp3'); // TODO\nlet loginTime;\nlet unseenMsgsTotal = 0;\nlet unseenNotificationCount = 0;\nconst webPushSubscriptions = {};\n\nfunction desktopNotificationsEnabled() {\n  return window.Notification && Notification.permission === 'granted';\n}\n\nfunction notifyMsg(msg, info, channelId, onClick) {\n  function shouldNotify() {\n    if (msg.timeObj < loginTime) { return false; }\n    if (info.selfAuthored) { return false; }\n    if (document.visibilityState === 'visible') { return false; }\n    const channel = privateState(channelId);\n    if (channel.notificationSetting === 'nothing') { return false; }\n    if (channel.notificationSetting === 'mentions' && !msg.text.includes(session.getMyName())) { return false; }\n    return true;\n  }\n  function shouldDesktopNotify() {\n    if (!desktopNotificationsEnabled()) { return false; }\n    return shouldNotify();\n  }\n  function shouldAudioNotify() {\n    return shouldNotify();\n  }\n  if (shouldAudioNotify()) {\n    //notificationSound.play(); // TODO\n  }\n  if (shouldDesktopNotify()) {\n    let body, title;\n    const channel = privateState(channelId);\n    if (channel.uuid) {\n      title = channel.participantProfiles[info.from].name;\n      body = `${name}: ${msg.text}`;\n    } else {\n      title = 'Message'\n      body = msg.text;\n    }\n    body = util.truncateString(body, 50);\n    let desktopNotification = new Notification(title, { // TODO: replace with actual name\n      icon: '/assets/img/icon128.png',\n      body,\n      silent: true\n    });\n    desktopNotification.onclick = function() {\n      changeUnseenNotificationCount(-1);\n      onClick && onClick();\n      window.focus();\n    };\n  }\n}\n\nfunction changeChatUnseenMsgsCount(chatId, change) {\n  const chat = privateState(chatId);\n  if (!chat) return;\n  const chatNode = local().get('channels').get(chatId);\n  if (change) {\n    unseenMsgsTotal += change;\n    chat.unseen += change;\n  } else {\n    unseenMsgsTotal = unseenMsgsTotal - (chat.unseen || 0);\n    chat.unseen = 0;\n  }\n  chatNode.get('unseen').put(chat.unseen);\n  unseenMsgsTotal = unseenMsgsTotal >= 0 ? unseenMsgsTotal : 0;\n  local().get('unseenMsgsTotal').put(unseenMsgsTotal);\n}\n\nconst publicVapidKey = 'BMqSvZArOIdn7vGkYplSpkZ70-Qt8nhYbey26WVa3LF3SwzblSzm3n3HHycpNkAKVq7MCkrzFuTFs_en7Y_J2MI';\n\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nasync function subscribe(reg) {\n  try {\n    const subscription = await reg.pushManager.subscribe({\n      userVisibleOnly: true,\n      applicationServerKey: urlBase64ToUint8Array(publicVapidKey)\n    });\n    addWebPushSubscription(subscription);\n  } catch (e) {\n    console.error('web push subscription error', e);\n  }\n}\n\nasync function subscribeToWebPush() {\n  console.log('subscribing to web push', navigator.serviceWorker);\n  if (!desktopNotificationsEnabled() || !navigator.serviceWorker) { return false; }\n  await navigator.serviceWorker.ready;\n  const reg = await navigator.serviceWorker.getRegistration();\n  reg.active.postMessage({key: session.getKey()});\n  const sub = await reg.pushManager.getSubscription();\n  sub ? addWebPushSubscription(sub) : subscribe(reg);\n}\n\nconst addWebPushSubscriptionsToChats = _.debounce(() => {\n  const arr = Object.values(webPushSubscriptions);\n  session.channelIds.forEach(channelId => {\n    privateState(channelId).put('webPushSubscriptions', arr);\n  });\n}, 5000);\n\nfunction removeSubscription(hash) {\n  delete webPushSubscriptions[hash];\n  publicState().user().get('webPushSubscriptions').get(hash).put(null);\n  addWebPushSubscriptionsToChats();\n}\n\nasync function addWebPushSubscription(s, saveToGun = true) {\n  const myKey = session.getKey();\n  const mySecret = await Key.secret(myKey.epub, myKey);\n  const enc = await Key.encrypt(s, mySecret);\n  const hash = await util.getHash(JSON.stringify(s));\n  console.log('hash', hash);\n  if (saveToGun) {\n    publicState().user().get('webPushSubscriptions').get(hash).put(enc);\n  }\n  webPushSubscriptions[hash] = s;\n  addWebPushSubscriptionsToChats();\n}\n\nasync function getWebPushSubscriptions() {\n  const myKey = session.getKey();\n  const mySecret = await Key.secret(myKey.epub, myKey);\n  publicState().user().get('webPushSubscriptions').map(async enc => {\n    if (!enc) { return; }\n    const s = await Key.decrypt(enc, mySecret);\n    addWebPushSubscription(s, false);\n  });\n}\n\nfunction getEpub(user) {\n  return new Promise(resolve => {\n    publicState().user(user).get('epub').on(async (epub,k,x,e) => {\n      if (epub) {\n        e.off();\n        resolve(epub);\n      }\n    });\n  });\n}\n\nasync function getNotificationText(notification) {\n  const profile = await publicState().user(notification.from).get('profile').once();\n  const name = (profile && profile.name) || 'someone';\n  const event = notification.event || notification.action;\n  let eventText;\n  if (event === 'like') eventText = `${name} liked your post`;\n  else if (event === 'reply') eventText = `${name} replied to your post`;\n  else if (event === 'mention') eventText = `${name} mentioned you in their post`;\n  else if (event === 'follow') eventText = `${name} started following you`;\n  else eventText = `${name} sent you a notification: ${event}`;\n  return eventText;\n}\n\nfunction subscribeToIrisNotifications(onClick?: Function) {\n  let notificationsSeenTime: any;\n  let notificationsShownTime: any;\n  publicState().user().get('notificationsSeenTime').on(v => {\n    notificationsSeenTime = v;\n    console.log(v);\n  });\n  publicState().user().get('notificationsShownTime').on(v => notificationsShownTime = v);\n  const setNotificationsShownTime = _.debounce(() => {\n    publicState().user().get('notificationsShownTime').put(new Date().toISOString());\n  }, 1000);\n  const alreadyHave = new Set();\n  group().on(`notifications/${session.getPubKey()}`, async (encryptedNotification, k, x, e, from) => {\n      const id = from.slice(0,30) + encryptedNotification.slice(0,30);\n      if (alreadyHave.has(id)) { return; }\n      alreadyHave.add(id);\n      const epub = await getEpub(from);\n      const secret = await Key.secret(epub, session.getKey());\n      const notification = await Key.decrypt(encryptedNotification, secret);\n      if (!notification || typeof notification !== 'object') { return; }\n      setNotificationsShownTime();\n      notification.from = from;\n      local().get('notifications').get(notification.time).put(notification);\n      if (!notificationsSeenTime || (notificationsSeenTime < notification.time)) {\n        changeUnseenNotificationCount(1);\n      }\n      if (!notificationsShownTime || notificationsShownTime < notification.time) {\n        console.log('was new!');\n        const text = await getNotificationText(notification);\n        let desktopNotification = new Notification(text, {\n          icon: '/assets/img/icon128.png',\n          body: text,\n          silent: true\n        });\n        desktopNotification.onclick = function() {\n          const link = notification.target ? `/post/${notification.target}` : `/profile/${notification.from}`;\n          onClick && onClick(link);\n          changeUnseenNotificationCount(-1);\n          window.focus();\n        };\n      }\n    });\n}\n\nfunction changeUnseenNotificationCount(change) {\n  if (!change) {\n    unseenNotificationCount = 0;\n    publicState().user().get('notificationsSeenTime').put(new Date().toISOString());\n  } else {\n    unseenNotificationCount += change;\n    unseenNotificationCount = Math.max(unseenNotificationCount, 0);\n  }\n  local().get('unseenNotificationCount').put(unseenNotificationCount);\n}\n\nasync function sendIrisNotification(recipient, notification) {\n  if (!(recipient && notification)) { return; } // TODO: use typescript or sth :D\n  if (typeof notification === 'object') { notification.time = new Date().toISOString() }\n  const epub = await getEpub(recipient);\n  const secret = await Key.secret(epub, session.getKey());\n  const enc = await Key.encrypt(notification, secret);\n  publicState().user().get('notifications').get(recipient).put(enc);\n}\n\nasync function sendWebPushNotification(recipient, notification) {\n  console.log('sending web push notification to', recipient, notification);\n  const channel = privateState(recipient);\n  const myKey = session.getKey();\n  const shouldWebPush = (recipient === myKey.pub) || !(channel.activity && channel.activity.isActive);\n  if (shouldWebPush && channel.webPushSubscriptions) {\n    const subscriptions = [];\n    const participants = Object.keys(channel.webPushSubscriptions);\n    for (let i = 0; i < participants.length; i++) {\n      const participant = participants[i];\n      const secret = await channel.getSecret(participant);\n      const payload = {\n        title: await Key.encrypt(notification.title, secret),\n        body: await Key.encrypt(notification.body, secret),\n        from:{pub: myKey.pub, epub: myKey.epub}\n      };\n      channel.webPushSubscriptions[participant].forEach(s => {\n        if (s && s.endpoint) {\n          subscriptions.push({subscription: s, payload});\n        }\n      });\n    }\n    if (subscriptions.length === 0) {return;}\n    fetch(NOTIFICATION_SERVICE_URL, {\n      method: 'POST',\n      body: JSON.stringify({subscriptions}),\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).catch(() => {});\n  }\n}\n\nfunction init() {\n  loginTime = new Date();\n  unseenMsgsTotal = 0;\n}\n\nexport default {init, notifyMsg, getNotificationText, sendWebPushNotification, changeUnseenNotificationCount, subscribeToIrisNotifications, sendIrisNotification, changeChatUnseenCount: changeChatUnseenMsgsCount, webPushSubscriptions, subscribeToWebPush, getWebPushSubscriptions, removeSubscription};\n","import util from \"./util\";\nimport Node from \"./db/Node\";\n\n// TODO config {peers: ['http://localhost:8768/gun'], file: 'State.electron', multicast:false, localStorage: false}\nconst electron = util.isElectron ? new Node('electron').get('state') : null;\n\nexport default electron;","// @ts-nocheck\nimport Key from './Key';\nimport notifications from './notifications';\nimport Channel from './Channel';\nimport util from './util';\nimport _ from './lodash';\nimport Fuse from \"fuse.js\";\nimport local from './local';\nimport electron from './electron';\nimport user from './public';\nimport privateState from './private';\nimport blockedUsers from './blockedUsers';\n\nlet key: any;\nlet myName: string;\nlet latestChatLink: string;\nlet onlineTimeout: any;\nlet ourActivity: any;\nlet noFollows: boolean;\nlet noFollowers: boolean;\nlet searchIndex: any;\nlet initCalled: boolean;\nconst searchableItems: any = {};\nconst getExtendedFollowsCalled = new Map<string, number>();\n\nconst DEFAULT_FOLLOW = 'hyECQHwSo7fgr2MVfPyakvayPeixxsaAWVtZ-vbaiSc.TXIp8MnCtrnW6n2MrYquWPcc-DTmZzMBmc2yaGv9gIU';\n\nconst DEFAULT_SETTINGS = {\n  electron: {\n    openAtLogin: true,\n    minimizeOnClose: true\n  },\n  local: {\n    enableWebtorrent: !util.isMobile,\n    enablePublicPeerDiscovery: true,\n    autoplayWebtorrent: true,\n    maxConnectedPeers: util.isElectron ? 2 : 1\n  }\n};\n\n/**\n * User session management utilities.\n */\nexport default {\n  /**\n   * Log in with a key from localStorage.\n   *\n   * If no key is found and options.autologin is not false, a new user will be created.\n   *\n   * If options.autofollow is not false, the default follow will be added.\n   * @param options\n   */\n  init(options: any = {}) {\n    if (initCalled) { return; }\n    initCalled = true;\n    let localStorageKey = localStorage.getItem('chatKeyPair');\n    console.log('localStorageKey', localStorageKey);\n    if (localStorageKey) {\n      this.login(JSON.parse(localStorageKey));\n    } else if (options.autologin !== false) {\n      this.loginAsNewUser(options);\n    } else {\n      this.clearIndexedDB();\n    }\n    setTimeout(() => {\n      local().get('block').map(() => {\n        this.updateSearchIndex();\n      });\n      this.updateSearchIndex();\n    });\n    setInterval(() => {\n      if (this.taskQueue.length) {\n        //console.log('this.taskQueue', this.taskQueue.length);\n        const t = this.taskQueue.shift();\n        t && t();\n      }\n    }, 10);\n  },\n\n  DEFAULT_SETTINGS,\n  DEFAULT_FOLLOW,\n\n  taskQueue: [] as any[],\n\n  updateSearchIndex: _.throttle(() => {\n    const options = {keys: ['name'], includeScore: true, includeMatches: true, threshold: 0.3};\n    const values = Object.values(_.omit(searchableItems, Object.keys(blockedUsers())));\n    searchIndex = new Fuse(values, options);\n    local().get('searchIndexUpdated').put(true);\n  }, 2000, {leading:true}),\n\n  saveSearchResult: _.throttle(k => {\n      local().get('contacts').get(k).put({followDistance: searchableItems[k].followDistance,followerCount: searchableItems[k].followers.size});\n  }, 1000, {leading:true}),\n\n  addFollow(callback: Function, k: string, followDistance: number, follower?: string) {\n    if (searchableItems[k]) {\n      if (searchableItems[k].followDistance > followDistance) {\n        searchableItems[k].followDistance = followDistance;\n      }\n      follower && searchableItems[k].followers.add(follower);\n    } else {\n      searchableItems[k] = {key: k, followDistance, followers: new Set(follower && [follower])};\n      this.taskQueue.push(() => {\n        user(k).get('profile').get('name').on((name: string) => {\n          searchableItems[k].name = name;\n          local().get('contacts').get(k).get('name').put(name);\n          callback && callback(k, searchableItems[k]);\n        });\n      });\n    }\n    this.saveSearchResult(k);\n    callback && callback(k, searchableItems[k]);\n    this.updateSearchIndex();\n    this.updateNoFollows();\n    this.updateNoFollowers();\n  },\n\n  removeFollow(k: string, followDistance: number, follower: string) {\n    if (followDistance === 1) {\n      local().get('contacts').get(k).put(false);\n      local().get('groups').get('follows').get(k).put(false);\n      if (searchableItems[k]) {\n        searchableItems[k].followers.delete(follower);\n        this.updateNoFollows();\n        this.updateNoFollowers();\n      }\n    }\n    if (searchableItems[k] && searchableItems[k].followers.size === 0) {\n      delete searchableItems[k];\n      local().get('contacts').get(k).put(false);\n      local().get('groups').get('everyone').get(k).put(false);\n    }\n  },\n\n  getExtendedFollows(callback: Function, k = key.pub, maxDepth = 3, currentDepth = 1) {\n    const called = getExtendedFollowsCalled.get(k);\n    if (called && called <= currentDepth) {\n      return;\n    }\n    getExtendedFollowsCalled.set(k, currentDepth);\n\n    this.addFollow(callback, k, currentDepth - 1);\n\n    user(k).get('follow').map((isFollowing: boolean, followedKey: string) => { // TODO: unfollow\n      if (isFollowing) {\n        this.addFollow(callback, followedKey, currentDepth, k);\n        if (currentDepth < maxDepth) {\n          this.taskQueue.push(() => this.getExtendedFollows(callback, followedKey, maxDepth, currentDepth + 1));\n        }\n      } else {\n        this.removeFollow(followedKey, currentDepth, k);\n      }\n    });\n\n    return searchableItems;\n  },\n\n  updateNoFollows: _.throttle(() => {\n    const v = Object.keys(searchableItems).length <= 1;\n    if (v !== noFollows) {\n      noFollows = v;\n      local().get('noFollows').put(noFollows);\n    }\n  }, 1000, {leading:true}),\n\n  updateNoFollowers: _.throttle(() => {\n    const v = !(searchableItems[key.pub] && (searchableItems[key.pub].followers.size > 0));\n    if (v !== noFollowers) {\n      noFollowers = v;\n      local().get('noFollowers').put(noFollowers);\n    }\n  }, 1000, {leading:true}),\n\n  getSearchIndex() {\n    return searchIndex;\n  },\n\n  setOurOnlineStatus() {\n    const activeRoute = window.location.hash;\n    Channel.setActivity(ourActivity = 'active');\n    const setActive = _.debounce(() => {\n      const chatId = activeRoute && activeRoute.replace('#/profile/','').replace('#/chat/','');\n      const chat = privateState(chatId);\n      if (chat && !ourActivity) {\n        chat.setMyMsgsLastSeenTime();\n      }\n      Channel.setActivity(ourActivity = 'active');\n      clearTimeout(onlineTimeout);\n      onlineTimeout = setTimeout(() => Channel.setActivity(ourActivity = 'online'), 30000);\n    }, 1000);\n    document.addEventListener(\"touchmove\", setActive);\n    document.addEventListener(\"mousemove\", setActive);\n    document.addEventListener(\"keypress\", setActive);\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState === 'visible') {\n        Channel.setActivity(ourActivity = 'active');\n        const chatId = location.pathname.slice(1).replace('chat/','');\n        const chat = activeRoute && privateState(chatId);\n        if (chat) {\n          chat.setMyMsgsLastSeenTime();\n          notifications.changeChatUnseenCount(chatId, 0);\n        }\n      } else {\n        Channel.setActivity(ourActivity = 'online');\n      }\n    });\n    setActive();\n    window.addEventListener(\"beforeunload\", () => {\n      Channel.setActivity(ourActivity = null);\n    });\n  },\n\n  updateGroups() {\n    this.getExtendedFollows((k: string, info: any) => {\n      if (info.followDistance <= 1) {\n        local().get('groups').get('follows').get(k).put(true);\n      }\n      local().get('groups').get('everyone').get(k).put(true);\n      if (k === this.getPubKey()) {\n        this.updateNoFollowers();\n      }\n    });\n  },\n\n  /**\n   * Log in with a private key.\n   * @param key\n   */\n  login(k: any) {\n    console.log('login', k);\n    const shouldRefresh = !!key;\n    console.log('shouldRefresh', shouldRefresh, 'key', key);\n    key = k;\n    localStorage.setItem('chatKeyPair', JSON.stringify(k));\n    user().auth(key);\n    user().put({epub: key.epub});\n    notifications.subscribeToWebPush();\n    notifications.getWebPushSubscriptions();\n    //notifications.subscribeToIrisNotifications();\n    Channel.getMyChatLinks( undefined, (chatLink: any) => {\n      local().get('chatLinks').get(chatLink.id).put(chatLink.url);\n      latestChatLink = chatLink.url;\n    });\n    this.setOurOnlineStatus();\n    Channel.getChannels( (c: Channel) => this.addChannel(c));\n    user().get('profile').get('name').on((name: any) => {\n      if (name && typeof name === 'string') {\n        myName = name;\n      }\n    });\n    // a lot of this is iris-messenger stuff\n    notifications.init();\n    local().get('loggedIn').put(true);\n    console.log('local().get(\\'loggedIn\\').put(true);', local());\n    local().get('settings').once().then(settings => {\n      if (!settings) {\n        local().get('settings').put(DEFAULT_SETTINGS.local);\n      } else if (settings.enableWebtorrent === undefined || settings.autoplayWebtorrent === undefined) {\n        local().get('settings').get('enableWebtorrent').put(DEFAULT_SETTINGS.local.enableWebtorrent);\n        local().get('settings').get('autoplayWebtorrent').put(DEFAULT_SETTINGS.local.autoplayWebtorrent);\n      }\n    });\n    user().get('block').map((isBlocked: boolean, user: string) => {\n      local().get('block').get(user).put(isBlocked);\n      if (isBlocked) {\n        delete searchableItems[user];\n      }\n    });\n    this.updateGroups();\n    if (shouldRefresh) {\n      location.reload();\n    }\n    if (electron) {\n      electron.get('settings').on(electron => {\n        local().get('settings').get('electron').put(electron);\n      });\n      electron.get('user').put(key.pub);\n    }\n    local().get('filters').get('group').once().then(v => {\n      if (!v) {\n        local().get('filters').get('group').put('follows');\n      }\n    });\n  },\n\n\n\n  /**\n   * Create a new user account and log in.\n   * @param options {Object} - Options for the new account.\n   * @returns {Promise<*>}\n   */\n  loginAsNewUser(options: any = {}) {\n    const name = options.name || util.generateName();\n    console.log('loginAsNewUser name', name);\n    return Key.generate().then(k => {\n      this.login(k);\n      user().get('profile').put({a:null});\n      user().get('profile').get('name').put(name);\n      local().get('filters').put({a:null});\n      local().get('filters').get('group').put('follows');\n      Channel.createChatLink().then(l => latestChatLink = l);\n      setTimeout(() => {\n        if (options.autofollow !== false) {\n          console.log('autofollowing', DEFAULT_FOLLOW);\n          user().get('follow').get(DEFAULT_FOLLOW).put(true);\n        }\n      }, 1000); // maybe wait for login return instead\n    });\n  },\n\n  /**\n   * Log out the current user.\n   * @returns {Promise<void>}\n   */\n  async logOut() {\n    if (electron) {\n      electron.get('user').put(null);\n    }\n    // TODO: remove subscription from your channels\n    if (navigator.serviceWorker) {\n      const reg = await navigator.serviceWorker.getRegistration();\n      if (reg && reg.pushManager) {\n        reg.active?.postMessage({key: null});\n        const sub = await reg.pushManager.getSubscription();\n        if (sub) {\n          const hash = await util.getHash(JSON.stringify(sub));\n          notifications.removeSubscription(hash);\n          sub.unsubscribe && sub.unsubscribe();\n        }\n      }\n    }\n    this.clearIndexedDB();\n    localStorage.clear(); // TODO clear only iris data\n    window.location.hash = '';\n    window.location.href = '/';\n    location.reload();\n  },\n\n  clearIndexedDB() {\n    return new Promise(resolve => {\n      const r1 = window.indexedDB.deleteDatabase('local()');\n      const r2 = window.indexedDB.deleteDatabase('radata');\n      let r1done = false;\n      let r2done = false;\n      const check = () => {\n        r1done && r2done && resolve(undefined);\n      }\n      r1.onerror = r2.onerror = e => console.error(e);\n      //r1.onblocked = r2.onblocked = e => console.error('blocked', e);\n      r1.onsuccess = () => {\n        r1done = true;\n        check();\n      }\n      r2.onsuccess = () => {\n        r2done = true;\n        check();\n      }\n    });\n  },\n\n  getMyChatLink() {\n    return latestChatLink || util.getProfileLink(key.pub);\n  },\n\n  /**\n   * Get the keypair of the logged in user.\n   * @returns {*}\n   */\n  getKey() { return key; },\n\n  /**\n   * Get the public key of the logged in user.\n   * @returns {*}\n   */\n  getPubKey() {\n    return key && key.pub;\n  },\n\n  /**\n   * Get the name of the logged in user.\n   * @returns {*}\n   */\n  getMyName() { return myName; }, // TODO maybe remove and use iris.user().get('profile').get('name') instead?\n\n  myPeerUrl: (ip: string) => `http://${ip}:8767/gun`,\n\n  async shareMyPeerUrl(channel: Channel) {\n    const myIp = await local().get('settings').get('electron').get('publicIp').once();\n    myIp && channel.put && channel.put('my_peer', this.myPeerUrl(myIp));\n  },\n\n  newChannel(pub: string, chatLink?: string) {\n    if (!pub || this.channelIds.has(pub)) {\n      return;\n    }\n    const chat = privateState(pub, chatLink);\n    this.addChannel(chat);\n    return chat;\n  },\n\n  addChannel(chat: Channel) {\n    this.taskQueue.push(() => {\n      let pub = chat.getId();\n      if (this.channelIds.has(pub)) { return; }\n      this.channelIds.add(pub);\n      const chatNode = local().get('channels').get(pub);\n      chatNode.get('latestTime').on((t: string) => {\n        if (t && (!chat.latestTime || t > chat.latestTime)) {\n          chat.latestTime = t;\n        } else {\n          // chatNode.get('latestTime').put(chat.latestTime); // omg recursion\n        }\n      });\n      chatNode.get('theirMsgsLastSeenTime').on((t: string) => {\n        if (!t) { return; }\n        const d = new Date(t);\n        if (!chat.theirMsgsLastSeenDate || chat.theirMsgsLastSeenDate < d) {\n          chat.theirMsgsLastSeenDate = d;\n        }\n      });\n      chat.getLatestMsg && chat.getLatestMsg((latest: any, info: any) => {\n        this.processMessage(pub, latest, info);\n      });\n      notifications.changeChatUnseenCount(pub, 0);\n      chat.notificationSetting = 'all';\n      chat.onMy('notificationSetting', (val: any) => {\n        chat.notificationSetting = val;\n      });\n      //$(\".chat-list\").append(el);\n      chat.theirMsgsLastSeenTime = '';\n      chat.getTheirMsgsLastSeenTime((time: any) => {\n        if (chat && time && time >= chat.theirMsgsLastSeenTime) {\n          chat.theirMsgsLastSeenTime = time;\n          chatNode.get('theirMsgsLastSeenTime').put(time);\n        }\n      });\n      chat.getMyMsgsLastSeenTime((time: any) => {\n        chat.myLastSeenTime = new Date(time);\n        if (chat.latest && chat.myLastSeenTime >= chat.latest.time) {\n          notifications.changeChatUnseenCount(pub, 0);\n        }\n      });\n      chat.isTyping = false;\n      chat.getTyping(isTyping => {\n        chat.isTyping = isTyping;\n        local().get('channels').get(pub).get('isTyping').put(isTyping);\n      });\n      chat.online = {};\n      Channel.getActivity(pub, (activity) => {\n        if (chat) {\n          chatNode.put({theirLastActiveTime: activity && activity.lastActive, activity: activity && activity.isActive && activity.status});\n          chat.activity = activity;\n        }\n      });\n      if (chat.uuid) {\n        let isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n        chat.participantProfiles = {};\n        chat.on('name', v => {\n          chat.name = v;\n          searchableItems[chat.uuid] = {name: v, uuid: chat.uuid};\n          local().get('channels').get(chat.uuid).get('name').put(v);\n        });\n        chat.on('photo', v => {\n          searchableItems[chat.uuid] = searchableItems[chat.uuid] || {};\n          searchableItems[chat.uuid].photo = v;\n          local().get('channels').get(chat.uuid).get('photo').put(v)\n        });\n        chat.on('about', v => local().get('channels').get(chat.uuid).get('about').put(v));\n        chat.getParticipants(participants => {\n          delete participants.undefined; // TODO fix where it comes from\n          if (typeof participants === 'object') {\n            let keys = Object.keys(participants);\n            keys.forEach((k, i) => {\n              let hue = 360 / Math.max(keys.length, 2) * i; // TODO use css filter brightness\n              chat.participantProfiles[k] = {permissions: participants[k], color: `hsl(${hue}, 98%, ${isDarkMode ? 80 : 33}%)`};\n              user(k).get('profile').get('name').on(name => {\n                chat.participantProfiles[k].name = name;\n              });\n            });\n          }\n          local().get('channels').get(chat.uuid).get('participants').put(participants);\n        });\n        chat.inviteLinks = {};\n        chat.getChatLinks({callback: ({url, id}) => {\n          console.log('got chat link', id, url);\n          chat.inviteLinks[id] = url; // TODO use State\n          local().get('inviteLinksChanged').put(true);\n        }});\n      } else {\n        // TODO do we want this?\n        user(pub).get('profile').get('name').on(v => local().get('channels').get(pub).get('name').put(v))\n      }\n      if (chat.put) {\n        chat.onTheir('webPushSubscriptions', (s, k, from) => {\n          if (!Array.isArray(s)) { return; }\n          chat.webPushSubscriptions = chat.webPushSubscriptions || {};\n          chat.webPushSubscriptions[from || pub] = s;\n        });\n        const arr = Object.values(notifications.webPushSubscriptions);\n        setTimeout(() => chat.put('webPushSubscriptions', arr), 5000);\n        this.shareMyPeerUrl(chat);\n      }\n      chat.onTheir('call', call => {\n        local().get('call').put({pub, call});\n      });\n      local().get('channels').get(pub).put({enabled:true});\n      /* Disable private peer discovery, since they're not connecting anyway\n      if (chat.onTheir) {\n        chat.onTheir('my_peer', (url, k, from) => {\n          console.log('Got private peer url', url, 'from', from);\n          peers.addPeer({url, from})\n        });\n      }\n       */\n\n    });\n  },\n\n  // TODO: should perhaps be in Channel\n  processMessage(chatId: string, msg: any, info: any, onClickNotification?: Function) {\n    const chat = privateState(chatId);\n    chat.messageIds = chat.messageIds || {};\n    if (chat.messageIds[msg.time + info.from]) return;\n    chat.messageIds[msg.time + info.from] = true;\n    if (info) {\n      msg = Object.assign(msg, info);\n    }\n    if (msg.invite) {\n      const chatLink = `https://iris.to/?channelId=${msg.invite.group}&inviter=${chatId}`;\n      this.newChannel(msg.invite.group, chatLink);\n      return;\n    }\n    msg.selfAuthored = info.selfAuthored;\n    local().get('channels').get(chatId).get('msgs').get(msg.time + (msg.from && msg.from.slice(0, 10))).put(JSON.stringify(msg));\n    msg.timeObj = new Date(msg.time);\n    if (!info.selfAuthored && msg.timeObj > chat.myLastSeenTime) {\n      if (window.location.hash !== `#/chat/${  chatId}` || document.visibilityState !== 'visible') {\n        notifications.changeChatUnseenCount(chatId, 1);\n      } else if (ourActivity === 'active') {\n          chat.setMyMsgsLastSeenTime();\n        }\n    }\n    if (!info.selfAuthored && msg.time > chat.theirMsgsLastSeenTime) {\n      local().get('channels').get(chatId).get('theirMsgsLastSeenTime').put(msg.time);\n    }\n    if (!chat.latestTime || (msg.time > chat.latestTime)) {\n      local().get('channels').get(chatId).put({\n        latestTime: msg.time,\n        latest: {time: msg.time, text: msg.text, selfAuthored: info.selfAuthored}\n      });\n    }\n    // TODO: onclickNotification should do       route(`/chat/${  pub}`);\n    notifications.notifyMsg(msg, info, chatId, onClickNotification);\n  },\n\n  subscribeToMsgs(pub) {\n    const c = privateState(pub);\n    if (c.subscribed) { return; }\n    c.subscribed = true;\n    c.getMessages((msg, info) => {\n      this.processMessage(pub, msg, info);\n    });\n  },\n\n  /**\n   * Known private channels with other users\n   */\n  channelIds: new Set(),\n};\n","import publicSpace from './global';\nimport util from './util';\n\n/**\n * Content-addressed storage\n */\nexport default {\n  /**\n   * Get a file identified by its hash\n   * @param hash\n   * @param callback\n   * @returns {Promise<unknown>}\n   */\n  get(hash: string, callback: Function) {\n    return new Promise((resolve, reject) => {\n      if (!hash) {\n        reject('No hash provided');\n      }\n      if (typeof hash !== 'string') {\n        reject('Hash must be a string');\n      }\n      publicSpace().get('#').get(hash).on((v: any, _k: string, _x: any, e: any) => {\n        if (v) {\n          e.off();\n          callback && callback(v);\n          resolve(v);\n        }\n      });\n    });\n  },\n\n  /**\n   * Store a file and return its hash\n   * @param value\n   * @returns {Promise<string>}\n   */\n  async put(value: any) {\n    const hash = await util.getHash(value);\n    publicSpace().get('#').get(hash).put(value);\n    return hash;\n  }\n}","// @ts-nocheck\n\n/*jshint unused: false */\n`use strict`;\nimport util from './util';\nimport Attribute from './Attribute';\nimport Key from './Key';\n\nconst errorMsg = `Invalid  message:`;\n\nclass ValidationError extends Error {}\n\n/**\n* Signed message object. Your friends can index and relay your messages, while others can still verify that they were signed by you.\n*\n* Fields: signedData, signer (public key) and signature.\n*\n* signedData has an author, signer, type, time and optionally other fields.\n*\n* signature covers the utf8 string representation of signedData. Since messages are digitally signed, users only need to care about the message signer and not who relayed it or whose index it was found from.\n*\n* signer is the entity that verified its origin. In other words: message author and signer can be different entities, and only the signer needs to use Iris.\n*\n* For example, a crawler can import and sign other people's messages from Twitter. Only the users who trust the crawler will see the messages.\n*\n* Constructor: creates a message from the param obj.signedData that must contain at least the mandatory fields: author, type and time.\n* @param obj\n*\n* @example\n* https://github.com/irislib/iris-lib/blob/master/__tests__/SignedMessage.js\n*\n* Verification message:\n* {\n*   signedData: {\n*     author: {name:'Alice', key:'ABCD1234'},\n*     recipient: {\n*       name: 'Bob',\n*       email: ['bob@example.com', 'bob.saget@example.com'],\n*       bitcoin: '1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa'\n*     },\n*     type: 'verification'\n*   },\n*   signer: 'ABCD1234',\n*   signature: '1234ABCD'\n* }\n*/\nclass SignedMessage {\n  signedData: any;\n  pubKey: any;\n  sig: any;\n\n  constructor(obj: any) {\n    this.signedData = obj.signedData;\n    this.pubKey = obj.pubKey;\n    if (obj.sig) {\n      if (typeof obj.sig !== `string`) {\n        throw new ValidationError(`SignedMessage signature must be a string`);\n      }\n      this.sig = obj.sig;\n      this.getHash();\n    }\n    this._validate();\n  }\n\n  static _getArray(authorOrRecipient) {\n    const arr = [];\n    const keys = Object.keys(authorOrRecipient);\n    for (let i = 0;i < keys.length;i++) {\n      const type = keys[i];\n      const value = authorOrRecipient[keys[i]];\n      if (typeof value === `string`) {\n        arr.push(new Attribute(type, value));\n      } else { // array\n        for (let j = 0;j < value.length;j++) {\n          const elementValue = value[j];\n          arr.push(new Attribute(type, elementValue));\n        }\n      }\n    }\n    return arr;\n  }\n\n  static _getIterable(authorOrRecipient) {\n    return {\n      *[Symbol.iterator]() {\n        const keys = Object.keys(authorOrRecipient);\n        for (let i = 0;i < keys.length;i++) {\n          const type = keys[i];\n          const value = authorOrRecipient[keys[i]];\n          if (typeof value === `string`) {\n            yield new Attribute(type, value);\n          } else { // array\n            for (let j = 0;j < value.length;j++) {\n              const elementValue = value[j];\n              yield new Attribute(type, elementValue);\n            }\n          }\n        }\n      }\n    };\n  }\n\n  getAuthorIterable() {\n    return SignedMessage._getIterable(this.signedData.author);\n  }\n\n  getRecipientIterable() {\n    return SignedMessage._getIterable(this.signedData.recipient);\n  }\n\n  getAuthorArray() {\n    return SignedMessage._getArray(this.signedData.author);\n  }\n\n  getRecipientArray() {\n    return this.signedData.recipient ? SignedMessage._getArray(this.signedData.recipient) : [];\n  }\n\n  getSignerKeyID() {\n    return this.pubKey; // hack until gun supports keyID lookups\n    //return util.getHash(this.pubKey);\n  }\n\n  _validate() {\n    if (!this.signedData) {throw new ValidationError(`${errorMsg} Missing signedData`);}\n    if (typeof this.signedData !== `object`) {throw new ValidationError(`${errorMsg} signedData must be an object`);}\n    const d = this.signedData;\n\n    if (!d.type) {throw new ValidationError(`${errorMsg} Missing type definition`);}\n    if (!d.author) {throw new ValidationError(`${errorMsg} Missing author`);}\n    if (typeof d.author !== `object`) {throw new ValidationError(`${errorMsg} Author must be object`);}\n    if (Array.isArray(d.author)) {throw new ValidationError(`${errorMsg} Author must not be an array`);}\n    if (Object.keys(d.author).length === 0) {throw new ValidationError(`${errorMsg} Author empty`);}\n    if (this.pubKey) {\n      this.signerKeyHash = this.getSignerKeyID();\n    }\n    for (const attr in d.author) {\n      const t = typeof d.author[attr];\n      if (t !== `string`) {\n        if (Array.isArray(d.author[attr])) {\n          for (let i = 0;i < d.author[attr].length;i++) {\n            if (typeof d.author[attr][i] !== `string`) {throw new ValidationError(`${errorMsg} Author attribute must be string, got ${attr}: [${d.author[attr][i]}]`);}\n            if (d.author[attr][i].length === 0) {\n              throw new ValidationError(`${errorMsg} author ${attr} in array[${i}] is empty`);\n            }\n          }\n        } else {\n          throw new ValidationError(`${errorMsg} Author attribute must be string or array, got ${attr}: ${d.author[attr]}`);\n        }\n      }\n      if (attr === `keyID`) {\n        if (t !== `string`) {throw new ValidationError(`${errorMsg} Author keyID must be string, got ${t}`);}\n        if (this.signerKeyHash && d.author[attr] !== this.signerKeyHash) {throw new ValidationError(`${errorMsg} If message has a keyID author, it must be signed by the same key`);}\n      }\n    }\n    if (d.recipient) {\n      if (typeof d.recipient !== `object`) {throw new ValidationError(`${errorMsg} Recipient must be object`);}\n      if (Array.isArray(d.recipient)) {throw new ValidationError(`${errorMsg} Recipient must not be an array`);}\n      if (Object.keys(d.recipient).length === 0) {throw new ValidationError(`${errorMsg} Recipient empty`);}\n      for (const attr in d.recipient) {\n        const t = typeof d.recipient[attr];\n        if (t !== `string`) {\n          if (Array.isArray(d.recipient[attr])) {\n            for (let i = 0;i < d.recipient[attr].length;i++) {\n              if (typeof d.recipient[attr][i] !== `string`) {throw new ValidationError(`${errorMsg} Recipient attribute must be string, got ${attr}: [${d.recipient[attr][i]}]`);}\n              if (d.recipient[attr][i].length === 0) {\n                throw new ValidationError(`${errorMsg} recipient ${attr} in array[${i}] is empty`);\n              }\n            }\n          } else {\n            throw new ValidationError(`${errorMsg} Recipient attribute must be string or array, got ${attr}: ${d.recipient[attr]}`);\n          }\n        }\n      }\n    }\n    if (!(d.time || d.timestamp)) {throw new ValidationError(`${errorMsg} Missing time field`);}\n\n    if (!Date.parse(d.time || d.timestamp)) {throw new ValidationError(`${errorMsg} Invalid time field`);}\n\n    if (d.type === `rating`) {\n      if (isNaN(d.rating)) {throw new ValidationError(`${errorMsg} Invalid rating`);}\n      if (isNaN(d.maxRating)) {throw new ValidationError(`${errorMsg} Invalid maxRating`);}\n      if (isNaN(d.minRating)) {throw new ValidationError(`${errorMsg} Invalid minRating`);}\n      if (d.rating > d.maxRating) {throw new ValidationError(`${errorMsg} Rating is above maxRating`);}\n      if (d.rating < d.minRating) {throw new ValidationError(`${errorMsg} Rating is below minRating`);}\n      if (typeof d.context !== `string` || !d.context.length) {throw new ValidationError(`${errorMsg} Rating messages must have a context field`);}\n    }\n\n    if (d.type === `verification` || d.type === `unverification`) {\n      if (d.recipient.length < 2) {throw new ValidationError(`${errorMsg} At least 2 recipient attributes are needed for a connection / disconnection. Got: ${d.recipient}`);}\n    }\n\n    return true;\n  }\n\n  isPositive() {\n    return this.signedData.type === `rating` && this.signedData.rating > (this.signedData.maxRating + this.signedData.minRating) / 2;\n  }\n\n  isNegative() {\n    return this.signedData.type === `rating` && this.signedData.rating < (this.signedData.maxRating + this.signedData.minRating) / 2;\n  }\n\n  isNeutral() {\n    return this.signedData.type === `rating` && this.signedData.rating === (this.signedData.maxRating + this.signedData.minRating) / 2;\n  }\n\n  /**\n  * @param {Object} key keypair to sign the message with\n  */\n  async sign(key) {\n    this.sig = await Key.sign(this.signedData, key);\n    this.pubKey = key.pub;\n    await this.getHash();\n    return true;\n  }\n\n  /**\n  * Create an iris message. SignedMessage time is automatically set. If signingKey is specified and author omitted, signingKey will be used as author.\n  * @param {Object} signedData message data object including author, recipient and other possible attributes\n  * @param {Object} signingKey optionally, you can set the key to sign the message with\n  * @returns {Promise<SignedMessage>}  message\n  */\n  static async create(signedData, signingKey) {\n    if (!signedData.author && signingKey) {\n      signedData.author = {keyID: Key.getId(signingKey)};\n    }\n    signedData.time = signedData.time || (new Date()).toISOString();\n    const m = new SignedMessage({signedData});\n    if (signingKey) {\n      await m.sign(signingKey);\n    }\n    return m;\n  }\n\n  static createVerification(signedData, signingKey) {\n    signedData.type = `verification`;\n    return SignedMessage.create(signedData, signingKey);\n  }\n\n  static createRating(signedData, signingKey) {\n    signedData.type = `rating`;\n    signedData.context = signedData.context || `iris`;\n    signedData.maxRating = signedData.maxRating || 10;\n    signedData.minRating = signedData.minRating || -10;\n    return SignedMessage.create(signedData, signingKey);\n  }\n\n  getAuthor(index) {\n    for (const a of this.getAuthorIterable()) {\n      if (a.isUniqueType()) {\n        return index.getContacts(a);\n      }\n    }\n  }\n\n  getRecipient(index) {\n    if (!this.signedData.recipient) {\n      return undefined;\n    }\n    for (const a of this.getRecipientIterable()) {\n      if (a.isUniqueType()) {\n        return index.getContacts(a);\n      }\n    }\n  }\n\n  /**\n  * @returns {string} base64 sha256 hash of message\n  */\n  async getHash() {\n    if (this.sig && !this.hash) {\n      this.hash = await util.getHash(this.sig);\n    }\n    return this.hash;\n  }\n\n  getId() {\n    return this.getHash();\n  }\n\n  static async fromSig(obj) {\n    if (!obj.sig) {\n      throw new Error(`Missing signature in object:`, obj);\n    }\n    if (!obj.pubKey) {\n      throw new Error(`Missing pubKey in object:`);\n    }\n    //const signedData = await Key.verify(obj.sig, obj.pubKey); // disable sig verification while migrating to new gun :(\n    const signedData = JSON.parse(obj.sig.slice(4)).m;\n    const o = {signedData, sig: obj.sig, pubKey: obj.pubKey};\n    return new SignedMessage(o);\n  }\n\n  /**\n  * @return {boolean} true if message signature is valid. Otherwise throws ValidationError.\n  */\n  async verify() {\n    if (!this.pubKey) {\n      throw new ValidationError(`${errorMsg} SignedMessage has no .pubKey`);\n    }\n    if (!this.sig) {\n      throw new ValidationError(`${errorMsg} SignedMessage has no .sig`);\n    }\n    this.signedData = await Key.verify(this.sig, this.pubKey);\n    if (!this.signedData) {\n      throw new ValidationError(`${errorMsg} Invalid signature`);\n    }\n    if (this.hash) {\n      if (this.hash !== (await util.getHash(this.sig))) {\n        throw new ValidationError(`${errorMsg} Invalid message hash`);\n      }\n    } else {\n      this.getHash();\n    }\n    return true;\n  }\n\n  /**\n  * @returns {string}\n  */\n  serialize() {\n    return {sig: this.sig, pubKey: this.pubKey};\n  }\n\n  toString() {\n    return JSON.stringify(this.serialize());\n  }\n\n  /**\n  * @returns {Promise<SignedMessage>}\n  */\n  static async deserialize(s) {\n    return SignedMessage.fromSig(s);\n  }\n\n  static async fromString(s) {\n    return SignedMessage.fromSig(JSON.parse(s));\n  }\n\n  static async setReaction(gun, msg, reaction) {\n    const hash = await msg.getHash();\n    gun.get(`reactions`).get(hash).put(reaction);\n    gun.get(`reactions`).get(hash).put(reaction);\n    gun.get(`messagesByHash`).get(hash).get(`reactions`).get(this.rootContact.value).put(reaction);\n    gun.get(`messagesByHash`).get(hash).get(`reactions`).get(this.rootContact.value).put(reaction);\n  }\n}\n\nexport default SignedMessage;\n","/*eslint no-useless-escape: \"off\", camelcase: \"off\" */\n\nimport session from './session';\nimport peers from './peers';\nimport util from './util';\nimport local from './local';\nimport global from './global';\nimport publicState from './public';\nimport group from './group';\nimport electron from './electron';\nimport privateState from './private';\nimport staticState from './static';\nimport notifications from './notifications';\n\nimport SignedMessage from './SignedMessage';\nimport Channel from './Channel';\nimport Node from './db/Node';\n\nexport default {\n  local,\n  global,\n  group,\n  public: publicState,\n  private: privateState,\n  static: staticState,\n  electron,\n  peers,\n  session,\n  util,\n  notifications,\n  SignedMessage,\n  Channel,\n  Node,\n};"],"names":["_","throttle","func","limit","inThrottle","args","arguments","context","apply","setTimeout","debounce","inDebounce","clearTimeout","sample","arr","Math","floor","random","length","sampleSize","size","shuffled","slice","i","min","temp","index","defer","once","called","omit","obj","keys","newObj","Object","forEach","key","includes","defaults","undefined","pickBy","predicate","isEqual","a","b","Date","getTime","prototype","every","k","uniq","set","Set","Array","from","isNode","toString","call","global","process","e","userAgent","navigator","toLowerCase","isElectron","indexOf","isMobile","check","test","substr","vendor","gunOnceDefined","node","Promise","resolve","on","val","_k","_a","eve","off","animals","adjectives","getHash","str","format","encoder","TextEncoder","data","encode","crypto","subtle","digest","buffer","hash","arrayBufferToBase64","base64ToHex","console","log","capitalize","s","charAt","toUpperCase","generateName","raw","atob","result","hex","charCodeAt","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","window","btoa","getCaret","el","selectionStart","document","selection","focus","r","createRange","re","createTextRange","rc","duplicate","moveToBookmark","getBookmark","setEndPoint","text","injectCss","elementId","getElementById","sheet","createElement","id","innerHTML","head","prepend","getUrlParameter","sParam","sParams","sPageURL","location","search","substring","sURLVariables","split","sParameterName","decodeURIComponent","formatTime","date","t","toLocaleTimeString","timeStyle","formatDate","toLocaleString","dateStyle","getDaySeparatorText","dateStr","now","nowStr","toLocaleDateString","dayDifference","round","weekday","getProfileLink","pub","origin","encodeURIComponent","truncateString","type","cls","parent","setAttribute","appendChild","delay","myKey","Key","getActiveKey","datadir","keyfile","fs","privKeyFile","existsSync","f","readFileSync","fromString","generate","newKey","writeFileSync","chmodSync","Error","localStorage","getItem","setItem","getDefault","getActivePub","setActiveKey","save","util","JSON","stringify","getId","parse","ecdhSubtle","generateKey","name","namedCurve","then","exportKey","privateKey","priv","d","publicKey","x","y","sa","epriv","epub","dh","sign","_data","_pair","_cb","_opt","secret","pair","jwk","kty","crv","ext","key_ops","importKey","deriveKey","encrypt","verify","_msg","_pubKey","ELECTRON_GUN_URL","maxConnectedPeers","DEFAULT_PEERS","loc","host","is_localhost_but_not_dev","startsWith","hostname","endsWith","url","enabled","known","add","peer","visibility","session","getKey","encryptedUrl","encryptedUrlHash","publicState","user","get","put","lastSeen","toISOString","connect","remove","disconnect","peerFromGun","getSaved","p","reset","isMixedContent","opt","peers","disable","protocol","connectToLocalElectron","max","push","checkGunPeerCount","init","setInterval","generateUuid","replace","c","v","Actor","handle","_message","postMessage","message","Message","fromObject","Get","Put","deserialize","dam","Hi","serialize","generateMsgId","nodeId","recipients","childKey","jsonStr","checksum","updatedNodes","inResponseTo","entries","children","myNodeId","childValue","value","updatedAt","newFromKv","peerId","Memory","config","QuickLRU","maxSize","handlePut","handleGet","store","o","putMessage","mergeAndSave","nodeName","existing","MyDexie","dbName","version","stores","nodes","table","Dexie","IndexedDB","putQueue","values","map","notStored","db","bulkPut","queue","getQueue","bulkGet","callbacks","callback","open","err","error","stack","throttledPut","path","throttledGet","has","savePath","Websocket","router","ws","WebSocket","onopen","sendQueue","send","onmessage","event","onclose","onerror","readyState","OPEN","CONNECTING","Router","Map","storageAdapters","serverPeers","seenMessages","sendTo","topic","join","subscribers","subscribersByTopic","storageAdapter","subscriber","actor","opts","DEFAULT_CONFIG","allowPublicSpace","enableStats","localOnly","Node","on_subscriptions","once_subscriptions","map_subscriptions","root","webSocketPeers","getCurrentUser","currentUser","setCurrentUser","childData","doCallbacks","newNode","auth","isArray","addParentNodes","childName","pop","parentId","request","counter","globalState","myOpts","assign","retry","Infinity","UNIQUE_ID_VALIDATORS","email","bitcoin","bitcoin_address","ip","ipv6","gpg_fingerprint","gpg_keyid","google_oauth2","tel","phone","keyID","account","uuid","Attribute","guessTypeOf","getUuid","getUniqueIdValidators","isUniqueType","match","equals","uri","userSpace","DEFAULT_PERMISSIONS","read","write","admin","Channel","options","myGroupSecret","chatLink","useChatLink","participants","addParticipant","founder","getChatLinks","subscribe","putDirect","getMyGroupSecret","getMySecretUuid","onTheirDirect","theirSecretUuids","theirGroupSecrets","onTheir","hasAdmin","inviter","participantsChanged","saved","chatWith","channelId","sharedSecret","linkId","encrypted","decrypt","sharedKey","encryptedChatRequest","channelRequestId","getTheirSecretUuid","getTheirGroupSecret","changeMyGroupSecret","mute","participant","block","secrets","ourSecretChannelIds","theirSecretChannelIds","mySecretUuid","mySecret","mySecretHash","getCurrentParticipants","getParticipants","getParticipantsCallbackId","getParticipantsCallbacks","getSecret","getOurSecretChannelId","getTheirSecretChannelId","getChannels","listenToChatLinks","keypair","getMyChatLinks","seen","handleChannel","ourSecretChannelId","encryptedChatId","chatId","getMessages","theirSecretChannelId","messageReceived","userState","selfAuthored","messages","decrypted","info","getLatestMsg","callbackIfLatest","msg","latest","time","onMy","setMyMsgsLastSeenTime","getMyMsgsLastSeenTime","myMsgsLastSeenTime","getTheirMsgsLastSeenTime","theirMsgsLastSeenTime","removeParticipant","permissions","directSubscriptions","_onTheirDirectFromUser","groupSubscriptions","_onTheirGroupFromUser","trim","putGroup","onGroup","onDirect","onMyGroup","onTheirGroup","onMyDirect","hasWritePermission","hasOwnProperty","subscription","theirSecretUuid","_b","setTyping","isTyping","timeout","setTypingTimeout","getTyping","typing","getTypingTimeouts","addChatButton","label","channelOptions","channel","box","btn","body","addEventListener","getChatBox","getSimpleLink","urlRoot","chatLinks","chatLinkSubscriptions","links","link","channels","formatChatLink","encPub","requestId","createChatLink","sharedKeyString","encryptedSharedKey","ownerSecret","ownerEncryptedSharedKey","minimized","chatBox","header","minimize","innerText","stopPropagation","headerText","onlineIndicator","nameEl","close","openChatBtn","typingIndicator","inputWrapper","textArea","sendBtn","getActivity","status","isActive","undelivered","querySelectorAll","getAttribute","lastActive","unseen","indicator","msgEl","parentElement","msgClass","msgContent","seenIndicator","insertBefore","firstChild","insertAdjacentElement","scrollTop","scrollHeight","keyCode","preventDefault","content","caret","shiftKey","setActivity","activity","irisActivityStatus","setActivityTimeout","update","timerUpdate","pubKey","activityDate","isOnline","enc","removeGroupChatLink","removePrivateChatLink","deleteChannel","deleteGroup","local","blockedUsers","isBlocked","_v","cache","groupName","groupNode","follows","requestAnimationFrame","isFollowing","reduce","sum","_cached_map","cached","cacheKey","myEvent","item","cb","_cached_on","_cached_count","count","_cached_fn","fn","callbackId","myCallbacks","NOTIFICATION_SERVICE_URL","loginTime","unseenMsgsTotal","unseenNotificationCount","webPushSubscriptions","desktopNotificationsEnabled","Notification","permission","notifyMsg","onClick","shouldNotify","timeObj","visibilityState","privateState","notificationSetting","getMyName","shouldDesktopNotify","shouldAudioNotify","title","participantProfiles","desktopNotification","icon","silent","onclick","changeUnseenNotificationCount","changeChatUnseenMsgsCount","change","chat","chatNode","publicVapidKey","urlBase64ToUint8Array","base64String","padding","repeat","base64","rawData","outputArray","reg","pushManager","userVisibleOnly","applicationServerKey","addWebPushSubscription","subscribeToWebPush","serviceWorker","ready","getRegistration","active","getSubscription","sub","addWebPushSubscriptionsToChats","channelIds","removeSubscription","saveToGun","getWebPushSubscriptions","getEpub","getNotificationText","notification","profile","action","eventText","subscribeToIrisNotifications","notificationsSeenTime","notificationsShownTime","setNotificationsShownTime","alreadyHave","group","getPubKey","encryptedNotification","target","sendIrisNotification","recipient","sendWebPushNotification","shouldWebPush","subscriptions","payload","endpoint","fetch","method","headers","changeChatUnseenCount","electron","myName","latestChatLink","onlineTimeout","ourActivity","noFollows","noFollowers","searchIndex","initCalled","searchableItems","getExtendedFollowsCalled","DEFAULT_FOLLOW","DEFAULT_SETTINGS","openAtLogin","minimizeOnClose","enableWebtorrent","enablePublicPeerDiscovery","autoplayWebtorrent","localStorageKey","login","autologin","loginAsNewUser","clearIndexedDB","updateSearchIndex","taskQueue","shift","includeScore","includeMatches","threshold","Fuse","leading","saveSearchResult","followDistance","followerCount","followers","addFollow","follower","updateNoFollows","updateNoFollowers","removeFollow","getExtendedFollows","maxDepth","currentDepth","followedKey","getSearchIndex","setOurOnlineStatus","activeRoute","setActive","pathname","notifications","updateGroups","shouldRefresh","addChannel","settings","reload","l","autofollow","logOut","unsubscribe","clear","href","r1","indexedDB","deleteDatabase","r2","r1done","r2done","onsuccess","getMyChatLink","myPeerUrl","shareMyPeerUrl","myIp","newChannel","latestTime","theirMsgsLastSeenDate","processMessage","myLastSeenTime","online","theirLastActiveTime","isDarkMode","matchMedia","matches","photo","hue","color","inviteLinks","onClickNotification","messageIds","invite","subscribeToMsgs","subscribed","reject","publicSpace","_x","errorMsg","ValidationError","SignedMessage","signedData","sig","_validate","_getArray","authorOrRecipient","j","elementValue","_getIterable","Symbol","iterator","getAuthorIterable","author","getRecipientIterable","getAuthorArray","getRecipientArray","getSignerKeyID","signerKeyHash","attr","timestamp","isNaN","rating","maxRating","minRating","isPositive","isNegative","isNeutral","create","signingKey","m","createVerification","createRating","getAuthor","getContacts","getRecipient","fromSig","setReaction","gun","reaction","rootContact","staticState"],"mappings":"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"}